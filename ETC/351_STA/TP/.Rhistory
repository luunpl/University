#-------------question 4-----------------
#soit avec le menu choose directory
#soit avec l'instruction pour travailler dans le répertoire de travail TP
setwd("~/..../TP1")
#aussi accessible avec le menu session  > set working directory > choose directory
#------question 5-----
1:10
#------question 6-----
init<-1:10 #affecte à init la liste des 10 premiers entiers
1:10-> # meme chose que précédemment
init=1:10 # autre option pour définir un objet mais préférer les deux premières
init # affiche le contenu de l'objet
#------question 7-----
help(":") #affiche l'aide pour l'opérateur :
#---------------------Exercice 2--------------
#------question 2-----
c(1,2,3,4,5)
#------question 3-----
c(1,2,3,4,5)->x
#------question 4-----
x[2] #affiche le second ellement de x
x[c(2,4)] #affiche les elements en positions 2 et 4
x[-2]     #affiche tous les éléments de x sauf le deuxième
#------question 5-----
c(2,4,6,8,10)->y #crée y
c("a","b","c","d","e")->label #crée label
#------question 6----
matrix(c(x,y),ncol=2,byrow=F)->A #définit A qui contient les colonnes x et y
A
cbind(x,y) #produit la matrice des col x et y en donnant à chaque colonne le nom de son vect
#------question 7-----
A[1,2] #extrait et affiche l'élement en ligne 1 colonne 2
A[,1]#extrait la colonne 1
A[2,]#extrait la ligne 2
#------question 8-----
un<-rep(1,5) #vecteur de longueur 5 dont tous les élements sont 1.
matrix(c(x,y,un),ncol=3,byrow=F)->B # definit la matrice B
B # affiche B : matrice A complétée du vecteur un
cbind(A,un) # affiche B avec les noms de colonnes en plus
x[x>2]
x>2&x<5
A+A
#---------------------Exercice 3--------------
#--------question 1------------
x/5 #divise chaque element de x par 5
x*5 #multiplie chaque element par 5
#--------question 2-----------
x+2 #ajoute 2 à chaque coordonnée de x
#--------question 3-----------
sum(x) #calcule la somme des coordonnées de x
cumsum(x) #calcule les sommes cumulées
#--------question 4-----------
length(x) #retourne la taille du vecteur x
#--------question 5-----------
sqrt(x) #calcule les racines
#--------question 6-----------
x^3 #calcul les puissance 3
#--------question 7-----------
c(x,6)#ajoute un nouvel élément au vecteur x
length(c(x,6))#retourne la longueur de x complété de la valeur 6
c(x,1,1,1,1,1)#concatene x et le vecteur (1,1,1,1,1)
c(x,rep(1,5))#une autre façon de faire
c(x,c(1,1,1,1,1))
seq(from=1,to=10,by=.2) #construit la suite de nombres allant de 1 à 10 par pas de 0.2
seq(1,10,.2)            #dit en plus court
#--------question 8-----------
x>0 #retourne un vecteur logique TRUE pour tous les indices où la condition est vraie
which(x>0) #les indices pourlesquels la condition est vérifiée
#--------question 9-----------
length(which(x>0)) #le nombre de fois dans x ou la coordonnée est positive
#--------question 9-----------
which(x!=2)  #les positions où la coordonnée ne vaut pas 2
x>0&x<2      #logique resultat du test sur chaque coordonnées dans ]0,2[
sum(x>0&x<2) #nombre de coordonnées de x dans ]0,2[
#---------------------Exercice 4--------------
#--------question 1------------
x+y #ajoute les coordonnées deux à deux
x-y #les soustrait
#--------question 2------------
x*y #produit deux à deux
x/y #divise deux à deux
#--------question 3------------
cbind(x,y) #produit une matrice à deux colonnes avec x dans la premiere et y ds la sde
t(cbind(x,y))#transpose la matrice précédente. On pouvait l'obtenir directement avec
rbind(x,y) #concatène deux lignes pour produire une mat à deux lignes et 5 colonnes
#---------------------Exercice 5--------------
#--------question 1------------
A
sum(A) #somme les éléments de A
A+1   #ajoute 1 à chque element
#----------------------------------------------------------------------
# Exercice 1
#----------------------------------------------------------------------
#----------------------- question 1 -----------------------------------
HER=read.table("her.txt", header=TRUE, sep="\t")
B<-HER$BMI
#----------------------- question 2 -----------------------------------
summary(B)                           # statistiques descriptives
n<-length(R)                         # longueur de l'échantillon
hist(B, prob=T)                      # histogramme
boxplot(B)                           # boite à moustaches
#----------------------- question 3 -----------------------------------
t.test(B,mu=25)
#----------------------- question 4 -----------------------------------
t.test(B,mu=25, alternative="greater")$p.value
#----------------------- question 5 -----------------------------------
S<-HER$sex
BH<-B[S==0]
t.test(BH, mu=23, alternative="greater")
BF<-B[S==1]
t.test(BF, mu=22, alternative="less")
Tr<-HER$treat
BT<-B[T==1]
t.test(BH, mu=25, alternative="greater")
BNT<-B[T==0]
t.test(BF, mu=26, alternative="less")
#----------------------------------------------------------------------
# Exercice 2
#----------------------------------------------------------------------
p0 <- 0.7
#----------------------- question 1 -----------------------------------
x<- 74; n<- 100;
prop.test(x,n,p0)
prop.test(x,n,p0, correct=FALSE)
#----------------------- question 2 -----------------------------------
prop.test(x,n,p0,alternative="greater")
#----------------------- question 3 -----------------------------------
x<- 148; n<- 200;
prop.test(x,n,p0,alternative="greater")
#----------------------- question 4 -----------------------------------
x<- 740; n<- 1000;
prop.test(x,n,p0,alternative="greater")
#----------------------------------------------------------------------
# Exercice 3
#----------------------------------------------------------------------
#----------------------- question 1 -----------------------------------
data=read.table("her.txt", header=TRUE, sep="\t")
#----------------------- question 2 -----------------------------------
chol<-data$chol                          # echantillon continu
#----------------------- question 3 -----------------------------------
cholSup260<-(chol>260)                   # echantillon binarisé
#----------------------- question 4 -----------------------------------
n<-length(chol)
x <- sum(cholSup260)
p0 <- 0.55
#----------------------- question 5 -----------------------------------
prop.test(x,n, p0, correct=TRUE)        # calcul exact de la p-valeur
prop.test(x,n, p0, correct=FALSE)       # approximation gaussienne
#----------------------- question 6 -----------------------------------
prop.test(x,n, p0, alternative="less")
#----------------------------------------------------------------------
# Exercice 4
#----------------------------------------------------------------------
#----------------------- question 1 -----------------------------------
data=read.table("proteine.csv", header=TRUE, sep=";")
H<-data$hydro
#----------------------- question 2 -----------------------------------
summary(H)                           # statistiques descriptives
n<-length(H)                         # longueur de l'échantillon
hist(H, prob=T)                      # histogramme
boxplot(H)                           # boite à moustaches
#----------------------- question 3 -----------------------------------
t.test(H,mu=-1, alternative="less")  # test unilateral
#----------------------- question 4 -----------------------------------
HV = H[data$regne=="Viridiplantae"]  # extraction des données du groupe Viridiplantae
t.test(HV, mu=-1, alternative="less")
#----------------------- question 5 -----------------------------------
HM = H[data$regne=="Metazoa"]
t.test(HM, mu=-1, alternative="less")
#----------------------------------------------------------------------
# Exercice 1
#----------------------------------------------------------------------
#----------------------- question 1 -----------------------------------
ME <- 23                                    # malades exposes
SE <- 56                                    # sains exposes
MNE <- 67                                   # malades non exposes
SNE <- 136                                  # sains non exposes
ta <- rbind(c(ME,SE),c(MNE,SNE))            # table de contingence
rownames(ta) <- c("expose","non expose")
colnames(ta) <- c("malades","sains")
ta
#----------------------- question 1 -----------------------------------
prop.table(ta,1)    #fréquences conditionnelles à l'exposition
prop.table(ta,2)    #fréquences conditionnelles à l'etat du patient
barplot(prop.table(ta,1),beside=TRUE) #gris diff pour chaque rep condit à l'exp
#les deux conditi sont tres semblables on serait donc tenter de dire
#indépendance entre exposition et etat du patient
#----------------------- question 3 -----------------------------------
chisq.test(ta)
#----------------------------------------------------------------------
# Exercice 2
#----------------------------------------------------------------------
#----------------------- question 1 -----------------------------------
titanic <- read.table("titanic.csv",header=TRUE,sep=";")
P <- titanic$pclass
S <- titanic$survived
G <- titanic$gender
A <- titanic$age
#----------------------- question 2 -----------------------------------
ta <- table(S,G); ta
prop.table(ta,2)                            # proportions conditionnelles
#----------------------- question 3 -----------------------------------
chisq.test(ta)
# p-value =  2.567603e-67: les distributions sont significativement differentes
#----------------------- question 4 -----------------------------------
A10<- A<10
ta <- table(S,A10); ta
prop.table(ta,2)                            # proportions conditionnelles
chisq.test(ta)
# p-value =  0.0001763: les distributions sont significativement differentes
#----------------------- question 5 -----------------------------------
A21<- A<21
ta <- table(S,A21); ta
chisq.test(ta)
#----------------------------------------------------------------------
# Exercice 3
#----------------------------------------------------------------------
effobs<-c(1790,547,548,213)
probth<-c(9/16,3/16,3/16,1/16)
