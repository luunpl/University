(() => { var _a,_b,__freeze=Object.freeze,__defProp=Object.defineProperty,__template=(t,e)=>__freeze(__defProp(t,"raw",{value:__freeze(e||t.slice())}));!function(){"use strict";function t(t,e){for(var s=0;s<e.length;s++){const i=e[s];if("string"!=typeof i&&!Array.isArray(i))for(const e in i)if("default"!==e&&!(e in t)){const s=Object.getOwnPropertyDescriptor(i,e);s&&Object.defineProperty(t,e,s.get?s:{enumerable:!0,get:()=>i[e]})}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}const e="https://news.google.com",s="1.0.123",i="https://news.google.com/swg/js/v1";var n=(t=>(t.ENABLE_PUBLICATION_ID_SUFFIX_FOR_STORAGE_KEY="enable-pub-id-suffix-for-storage-key",t))(n||{}),r=(t=>(t.BACKGROUND_CLICK_BEHAVIOR_EXPERIMENT="background_click_behavior_experiment",t.INLINE_CTA_EXPERIMENT="inline_cta_experiment",t.MULTI_INSTANCE_CTA_EXPERIMENT="multi_instance_cta_experiment",t.ALWAYS_SHOW_BLOCKING_CONTRIBUTION_EXPERIMENT="bcontrib_experiment",t))(r||{}),o=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.IMPRESSION_PAYWALL=1]="IMPRESSION_PAYWALL",t[t.IMPRESSION_AD=2]="IMPRESSION_AD",t[t.IMPRESSION_OFFERS=3]="IMPRESSION_OFFERS",t[t.IMPRESSION_SUBSCRIBE_BUTTON=4]="IMPRESSION_SUBSCRIBE_BUTTON",t[t.IMPRESSION_SMARTBOX=5]="IMPRESSION_SMARTBOX",t[t.IMPRESSION_SWG_BUTTON=6]="IMPRESSION_SWG_BUTTON",t[t.IMPRESSION_CLICK_TO_SHOW_OFFERS=7]="IMPRESSION_CLICK_TO_SHOW_OFFERS",t[t.IMPRESSION_CLICK_TO_SHOW_OFFERS_OR_ALREADY_SUBSCRIBED=8]="IMPRESSION_CLICK_TO_SHOW_OFFERS_OR_ALREADY_SUBSCRIBED",t[t.IMPRESSION_SUBSCRIPTION_COMPLETE=9]="IMPRESSION_SUBSCRIPTION_COMPLETE",t[t.IMPRESSION_ACCOUNT_CHANGED=10]="IMPRESSION_ACCOUNT_CHANGED",t[t.IMPRESSION_PAGE_LOAD=11]="IMPRESSION_PAGE_LOAD",t[t.IMPRESSION_LINK=12]="IMPRESSION_LINK",t[t.IMPRESSION_SAVE_SUBSCR_TO_GOOGLE=13]="IMPRESSION_SAVE_SUBSCR_TO_GOOGLE",t[t.IMPRESSION_GOOGLE_UPDATED=14]="IMPRESSION_GOOGLE_UPDATED",t[t.IMPRESSION_SHOW_OFFERS_SMARTBOX=15]="IMPRESSION_SHOW_OFFERS_SMARTBOX",t[t.IMPRESSION_SHOW_OFFERS_SWG_BUTTON=16]="IMPRESSION_SHOW_OFFERS_SWG_BUTTON",t[t.IMPRESSION_SELECT_OFFER_SMARTBOX=17]="IMPRESSION_SELECT_OFFER_SMARTBOX",t[t.IMPRESSION_SELECT_OFFER_SWG_BUTTON=18]="IMPRESSION_SELECT_OFFER_SWG_BUTTON",t[t.IMPRESSION_SHOW_CONTRIBUTIONS_SWG_BUTTON=19]="IMPRESSION_SHOW_CONTRIBUTIONS_SWG_BUTTON",t[t.IMPRESSION_SELECT_CONTRIBUTION_SWG_BUTTON=20]="IMPRESSION_SELECT_CONTRIBUTION_SWG_BUTTON",t[t.IMPRESSION_METER_TOAST=21]="IMPRESSION_METER_TOAST",t[t.IMPRESSION_REGWALL=22]="IMPRESSION_REGWALL",t[t.IMPRESSION_SHOWCASE_REGWALL=23]="IMPRESSION_SHOWCASE_REGWALL",t[t.IMPRESSION_SWG_SUBSCRIPTION_MINI_PROMPT=24]="IMPRESSION_SWG_SUBSCRIPTION_MINI_PROMPT",t[t.IMPRESSION_SWG_CONTRIBUTION_MINI_PROMPT=25]="IMPRESSION_SWG_CONTRIBUTION_MINI_PROMPT",t[t.IMPRESSION_CONTRIBUTION_OFFERS=26]="IMPRESSION_CONTRIBUTION_OFFERS",t[t.IMPRESSION_TWG_COUNTER=27]="IMPRESSION_TWG_COUNTER",t[t.IMPRESSION_TWG_SITE_SUPPORTER_WALL=28]="IMPRESSION_TWG_SITE_SUPPORTER_WALL",t[t.IMPRESSION_TWG_PUBLICATION=29]="IMPRESSION_TWG_PUBLICATION",t[t.IMPRESSION_TWG_STATIC_BUTTON=30]="IMPRESSION_TWG_STATIC_BUTTON",t[t.IMPRESSION_TWG_DYNAMIC_BUTTON=31]="IMPRESSION_TWG_DYNAMIC_BUTTON",t[t.IMPRESSION_TWG_STICKER_SELECTION_SCREEN=32]="IMPRESSION_TWG_STICKER_SELECTION_SCREEN",t[t.IMPRESSION_TWG_PUBLICATION_NOT_SET_UP=33]="IMPRESSION_TWG_PUBLICATION_NOT_SET_UP",t[t.IMPRESSION_REGWALL_OPT_IN=34]="IMPRESSION_REGWALL_OPT_IN",t[t.IMPRESSION_NEWSLETTER_OPT_IN=35]="IMPRESSION_NEWSLETTER_OPT_IN",t[t.IMPRESSION_SUBSCRIPTION_OFFERS_ERROR=36]="IMPRESSION_SUBSCRIPTION_OFFERS_ERROR",t[t.IMPRESSION_CONTRIBUTION_OFFERS_ERROR=37]="IMPRESSION_CONTRIBUTION_OFFERS_ERROR",t[t.IMPRESSION_TWG_SHORTENED_STICKER_FLOW=38]="IMPRESSION_TWG_SHORTENED_STICKER_FLOW",t[t.IMPRESSION_SUBSCRIPTION_LINKING_LOADING=39]="IMPRESSION_SUBSCRIPTION_LINKING_LOADING",t[t.IMPRESSION_SUBSCRIPTION_LINKING_COMPLETE=40]="IMPRESSION_SUBSCRIPTION_LINKING_COMPLETE",t[t.IMPRESSION_SUBSCRIPTION_LINKING_ERROR=41]="IMPRESSION_SUBSCRIPTION_LINKING_ERROR",t[t.IMPRESSION_SURVEY=42]="IMPRESSION_SURVEY",t[t.IMPRESSION_REGWALL_ERROR=43]="IMPRESSION_REGWALL_ERROR",t[t.IMPRESSION_NEWSLETTER_ERROR=44]="IMPRESSION_NEWSLETTER_ERROR",t[t.IMPRESSION_SURVEY_ERROR=45]="IMPRESSION_SURVEY_ERROR",t[t.IMPRESSION_METER_TOAST_ERROR=46]="IMPRESSION_METER_TOAST_ERROR",t[t.IMPRESSION_MINI_PROMPT=47]="IMPRESSION_MINI_PROMPT",t[t.IMPRESSION_MINI_PROMPT_ERROR=48]="IMPRESSION_MINI_PROMPT_ERROR",t[t.IMPRESSION_REWARDED_AD=49]="IMPRESSION_REWARDED_AD",t[t.IMPRESSION_BYOP_NEWSLETTER_OPT_IN=50]="IMPRESSION_BYOP_NEWSLETTER_OPT_IN",t[t.IMPRESSION_REWARDED_AD_ERROR=51]="IMPRESSION_REWARDED_AD_ERROR",t[t.IMPRESSION_HOSTED_PAGE_SUBSCRIPTION_OFFERS=52]="IMPRESSION_HOSTED_PAGE_SUBSCRIPTION_OFFERS",t[t.IMPRESSION_HOSTED_PAGE_CONTRIBUTION_OFFERS=53]="IMPRESSION_HOSTED_PAGE_CONTRIBUTION_OFFERS",t[t.IMPRESSION_HOSTED_PAGE_SUBSCRIPTION_OFFERS_ERROR=54]="IMPRESSION_HOSTED_PAGE_SUBSCRIPTION_OFFERS_ERROR",t[t.IMPRESSION_HOSTED_PAGE_CONTRIBUTION_OFFERS_ERROR=55]="IMPRESSION_HOSTED_PAGE_CONTRIBUTION_OFFERS_ERROR",t[t.IMPRESSION_BYO_CTA=56]="IMPRESSION_BYO_CTA",t[t.IMPRESSION_BYO_CTA_ERROR=57]="IMPRESSION_BYO_CTA_ERROR",t[t.IMPRESSION_CONTRIBUTION_OFFERS_PURCHASE_UNAVAILABLE=58]="IMPRESSION_CONTRIBUTION_OFFERS_PURCHASE_UNAVAILABLE",t[t.ACTION_SUBSCRIBE=1e3]="ACTION_SUBSCRIBE",t[t.ACTION_PAYMENT_COMPLETE=1001]="ACTION_PAYMENT_COMPLETE",t[t.ACTION_ACCOUNT_CREATED=1002]="ACTION_ACCOUNT_CREATED",t[t.ACTION_ACCOUNT_ACKNOWLEDGED=1003]="ACTION_ACCOUNT_ACKNOWLEDGED",t[t.ACTION_SUBSCRIPTIONS_LANDING_PAGE=1004]="ACTION_SUBSCRIPTIONS_LANDING_PAGE",t[t.ACTION_PAYMENT_FLOW_STARTED=1005]="ACTION_PAYMENT_FLOW_STARTED",t[t.ACTION_PAY_PAYMENT_FLOW_STARTED=1090]="ACTION_PAY_PAYMENT_FLOW_STARTED",t[t.ACTION_PLAY_PAYMENT_FLOW_STARTED=1091]="ACTION_PLAY_PAYMENT_FLOW_STARTED",t[t.ACTION_OFFER_SELECTED=1006]="ACTION_OFFER_SELECTED",t[t.ACTION_SWG_BUTTON_CLICK=1007]="ACTION_SWG_BUTTON_CLICK",t[t.ACTION_VIEW_OFFERS=1008]="ACTION_VIEW_OFFERS",t[t.ACTION_ALREADY_SUBSCRIBED=1009]="ACTION_ALREADY_SUBSCRIBED",t[t.ACTION_NEW_DEFERRED_ACCOUNT=1010]="ACTION_NEW_DEFERRED_ACCOUNT",t[t.ACTION_LINK_CONTINUE=1011]="ACTION_LINK_CONTINUE",t[t.ACTION_LINK_CANCEL=1012]="ACTION_LINK_CANCEL",t[t.ACTION_GOOGLE_UPDATED_CLOSE=1013]="ACTION_GOOGLE_UPDATED_CLOSE",t[t.ACTION_USER_CANCELED_PAYFLOW=1014]="ACTION_USER_CANCELED_PAYFLOW",t[t.ACTION_SAVE_SUBSCR_TO_GOOGLE_CONTINUE=1015]="ACTION_SAVE_SUBSCR_TO_GOOGLE_CONTINUE",t[t.ACTION_SAVE_SUBSCR_TO_GOOGLE_CANCEL=1016]="ACTION_SAVE_SUBSCR_TO_GOOGLE_CANCEL",t[t.ACTION_SWG_BUTTON_SHOW_OFFERS_CLICK=1017]="ACTION_SWG_BUTTON_SHOW_OFFERS_CLICK",t[t.ACTION_SWG_BUTTON_SELECT_OFFER_CLICK=1018]="ACTION_SWG_BUTTON_SELECT_OFFER_CLICK",t[t.ACTION_SWG_BUTTON_SHOW_CONTRIBUTIONS_CLICK=1019]="ACTION_SWG_BUTTON_SHOW_CONTRIBUTIONS_CLICK",t[t.ACTION_SWG_BUTTON_SELECT_CONTRIBUTION_CLICK=1020]="ACTION_SWG_BUTTON_SELECT_CONTRIBUTION_CLICK",t[t.ACTION_USER_CONSENT_DEFERRED_ACCOUNT=1021]="ACTION_USER_CONSENT_DEFERRED_ACCOUNT",t[t.ACTION_USER_DENY_DEFERRED_ACCOUNT=1022]="ACTION_USER_DENY_DEFERRED_ACCOUNT",t[t.ACTION_DEFERRED_ACCOUNT_REDIRECT=1023]="ACTION_DEFERRED_ACCOUNT_REDIRECT",t[t.ACTION_GET_ENTITLEMENTS=1024]="ACTION_GET_ENTITLEMENTS",t[t.ACTION_METER_TOAST_SUBSCRIBE_CLICK=1025]="ACTION_METER_TOAST_SUBSCRIBE_CLICK",t[t.ACTION_METER_TOAST_EXPANDED=1026]="ACTION_METER_TOAST_EXPANDED",t[t.ACTION_METER_TOAST_CLOSED_BY_ARTICLE_INTERACTION=1027]="ACTION_METER_TOAST_CLOSED_BY_ARTICLE_INTERACTION",t[t.ACTION_METER_TOAST_CLOSED_BY_SWIPE_DOWN=1028]="ACTION_METER_TOAST_CLOSED_BY_SWIPE_DOWN",t[t.ACTION_METER_TOAST_CLOSED_BY_X_CLICKED=1029]="ACTION_METER_TOAST_CLOSED_BY_X_CLICKED",t[t.ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLICK=1030]="ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLICK",t[t.ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLICK=1031]="ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLICK",t[t.ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLOSE=1032]="ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLOSE",t[t.ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLOSE=1033]="ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLOSE",t[t.ACTION_CONTRIBUTION_OFFER_SELECTED=1034]="ACTION_CONTRIBUTION_OFFER_SELECTED",t[t.ACTION_SHOWCASE_REGWALL_GSI_CLICK=1035]="ACTION_SHOWCASE_REGWALL_GSI_CLICK",t[t.ACTION_SHOWCASE_REGWALL_EXISTING_ACCOUNT_CLICK=1036]="ACTION_SHOWCASE_REGWALL_EXISTING_ACCOUNT_CLICK",t[t.ACTION_SUBSCRIPTION_OFFERS_CLOSED=1037]="ACTION_SUBSCRIPTION_OFFERS_CLOSED",t[t.ACTION_CONTRIBUTION_OFFERS_CLOSED=1038]="ACTION_CONTRIBUTION_OFFERS_CLOSED",t[t.ACTION_TWG_STATIC_CTA_CLICK=1039]="ACTION_TWG_STATIC_CTA_CLICK",t[t.ACTION_TWG_DYNAMIC_CTA_CLICK=1040]="ACTION_TWG_DYNAMIC_CTA_CLICK",t[t.ACTION_TWG_SITE_LEVEL_SUPPORTER_WALL_CTA_CLICK=1041]="ACTION_TWG_SITE_LEVEL_SUPPORTER_WALL_CTA_CLICK",t[t.ACTION_TWG_DIALOG_SUPPORTER_WALL_CTA_CLICK=1042]="ACTION_TWG_DIALOG_SUPPORTER_WALL_CTA_CLICK",t[t.ACTION_TWG_COUNTER_CLICK=1043]="ACTION_TWG_COUNTER_CLICK",t[t.ACTION_TWG_SITE_SUPPORTER_WALL_ALL_THANKS_CLICK=1044]="ACTION_TWG_SITE_SUPPORTER_WALL_ALL_THANKS_CLICK",t[t.ACTION_TWG_PAID_STICKER_SELECTED_SCREEN_CLOSE_CLICK=1045]="ACTION_TWG_PAID_STICKER_SELECTED_SCREEN_CLOSE_CLICK",t[t.ACTION_TWG_PAID_STICKER_SELECTION_CLICK=1046]="ACTION_TWG_PAID_STICKER_SELECTION_CLICK",t[t.ACTION_TWG_FREE_STICKER_SELECTION_CLICK=1047]="ACTION_TWG_FREE_STICKER_SELECTION_CLICK",t[t.ACTION_TWG_MINI_SUPPORTER_WALL_CLICK=1048]="ACTION_TWG_MINI_SUPPORTER_WALL_CLICK",t[t.ACTION_TWG_CREATOR_BENEFIT_CLICK=1049]="ACTION_TWG_CREATOR_BENEFIT_CLICK",t[t.ACTION_TWG_FREE_TRANSACTION_START_NEXT_BUTTON_CLICK=1050]="ACTION_TWG_FREE_TRANSACTION_START_NEXT_BUTTON_CLICK",t[t.ACTION_TWG_PAID_TRANSACTION_START_NEXT_BUTTON_CLICK=1051]="ACTION_TWG_PAID_TRANSACTION_START_NEXT_BUTTON_CLICK",t[t.ACTION_TWG_STICKER_SELECTION_SCREEN_CLOSE_CLICK=1052]="ACTION_TWG_STICKER_SELECTION_SCREEN_CLOSE_CLICK",t[t.ACTION_TWG_ARTICLE_LEVEL_SUPPORTER_WALL_CTA_CLICK=1053]="ACTION_TWG_ARTICLE_LEVEL_SUPPORTER_WALL_CTA_CLICK",t[t.ACTION_REGWALL_OPT_IN_BUTTON_CLICK=1054]="ACTION_REGWALL_OPT_IN_BUTTON_CLICK",t[t.ACTION_REGWALL_ALREADY_OPTED_IN_CLICK=1055]="ACTION_REGWALL_ALREADY_OPTED_IN_CLICK",t[t.ACTION_NEWSLETTER_OPT_IN_BUTTON_CLICK=1056]="ACTION_NEWSLETTER_OPT_IN_BUTTON_CLICK",t[t.ACTION_NEWSLETTER_ALREADY_OPTED_IN_CLICK=1057]="ACTION_NEWSLETTER_ALREADY_OPTED_IN_CLICK",t[t.ACTION_REGWALL_OPT_IN_CLOSE=1058]="ACTION_REGWALL_OPT_IN_CLOSE",t[t.ACTION_NEWSLETTER_OPT_IN_CLOSE=1059]="ACTION_NEWSLETTER_OPT_IN_CLOSE",t[t.ACTION_SHOWCASE_REGWALL_SIWG_CLICK=1060]="ACTION_SHOWCASE_REGWALL_SIWG_CLICK",t[t.ACTION_TWG_CHROME_APP_MENU_ENTRY_POINT_CLICK=1061]="ACTION_TWG_CHROME_APP_MENU_ENTRY_POINT_CLICK",t[t.ACTION_TWG_DISCOVER_FEED_MENU_ENTRY_POINT_CLICK=1062]="ACTION_TWG_DISCOVER_FEED_MENU_ENTRY_POINT_CLICK",t[t.ACTION_SHOWCASE_REGWALL_3P_BUTTON_CLICK=1063]="ACTION_SHOWCASE_REGWALL_3P_BUTTON_CLICK",t[t.ACTION_SUBSCRIPTION_OFFERS_RETRY=1064]="ACTION_SUBSCRIPTION_OFFERS_RETRY",t[t.ACTION_CONTRIBUTION_OFFERS_RETRY=1065]="ACTION_CONTRIBUTION_OFFERS_RETRY",t[t.ACTION_TWG_SHORTENED_STICKER_FLOW_STICKER_SELECTION_CLICK=1066]="ACTION_TWG_SHORTENED_STICKER_FLOW_STICKER_SELECTION_CLICK",t[t.ACTION_INITIATE_UPDATED_SUBSCRIPTION_LINKING=1067]="ACTION_INITIATE_UPDATED_SUBSCRIPTION_LINKING",t[t.ACTION_SURVEY_SUBMIT_CLICK=1068]="ACTION_SURVEY_SUBMIT_CLICK",t[t.ACTION_SURVEY_CLOSED=1069]="ACTION_SURVEY_CLOSED",t[t.ACTION_SURVEY_DATA_TRANSFER=1070]="ACTION_SURVEY_DATA_TRANSFER",t[t.ACTION_REGWALL_PAGE_REFRESH=1071]="ACTION_REGWALL_PAGE_REFRESH",t[t.ACTION_NEWSLETTER_PAGE_REFRESH=1072]="ACTION_NEWSLETTER_PAGE_REFRESH",t[t.ACTION_SURVEY_PAGE_REFRESH=1073]="ACTION_SURVEY_PAGE_REFRESH",t[t.ACTION_METER_TOAST_PAGE_REFRESH=1074]="ACTION_METER_TOAST_PAGE_REFRESH",t[t.ACTION_MINI_PROMPT_INTERACTION=1075]="ACTION_MINI_PROMPT_INTERACTION",t[t.ACTION_SURVEY_PREVIOUS_BUTTON_CLICK=1076]="ACTION_SURVEY_PREVIOUS_BUTTON_CLICK",t[t.ACTION_SURVEY_NEXT_BUTTON_CLICK=1077]="ACTION_SURVEY_NEXT_BUTTON_CLICK",t[t.ACTION_REWARDED_AD_VIEW=1078]="ACTION_REWARDED_AD_VIEW",t[t.ACTION_REWARDED_AD_CLOSE=1079]="ACTION_REWARDED_AD_CLOSE",t[t.ACTION_REWARDED_AD_CLOSE_AD=1080]="ACTION_REWARDED_AD_CLOSE_AD",t[t.ACTION_REWARDED_AD_SIGN_IN=1081]="ACTION_REWARDED_AD_SIGN_IN",t[t.ACTION_REWARDED_AD_SUPPORT=1082]="ACTION_REWARDED_AD_SUPPORT",t[t.ACTION_BACK_TO_HOMEPAGE=1083]="ACTION_BACK_TO_HOMEPAGE",t[t.ACTION_BYOP_NEWSLETTER_OPT_IN_CLOSE=1084]="ACTION_BYOP_NEWSLETTER_OPT_IN_CLOSE",t[t.ACTION_BYOP_NEWSLETTER_OPT_IN_SUBMIT=1085]="ACTION_BYOP_NEWSLETTER_OPT_IN_SUBMIT",t[t.ACTION_SUBSCRIPTION_LINKING_CLOSE=1086]="ACTION_SUBSCRIPTION_LINKING_CLOSE",t[t.ACTION_BYO_CTA_CLOSE=1087]="ACTION_BYO_CTA_CLOSE",t[t.ACTION_BYO_CTA_BUTTON_CLICK=1088]="ACTION_BYO_CTA_BUTTON_CLICK",t[t.ACTION_BYO_CTA_PAGE_REFRESH=1089]="ACTION_BYO_CTA_PAGE_REFRESH",t[t.EVENT_PAYMENT_FAILED=2e3]="EVENT_PAYMENT_FAILED",t[t.EVENT_REGWALL_OPT_IN_FAILED=2001]="EVENT_REGWALL_OPT_IN_FAILED",t[t.EVENT_NEWSLETTER_OPT_IN_FAILED=2002]="EVENT_NEWSLETTER_OPT_IN_FAILED",t[t.EVENT_REGWALL_ALREADY_OPT_IN=2003]="EVENT_REGWALL_ALREADY_OPT_IN",t[t.EVENT_NEWSLETTER_ALREADY_OPT_IN=2004]="EVENT_NEWSLETTER_ALREADY_OPT_IN",t[t.EVENT_SUBSCRIPTION_LINKING_FAILED=2005]="EVENT_SUBSCRIPTION_LINKING_FAILED",t[t.EVENT_SURVEY_ALREADY_SUBMITTED=2006]="EVENT_SURVEY_ALREADY_SUBMITTED",t[t.EVENT_SURVEY_COMPLETION_RECORD_FAILED=2007]="EVENT_SURVEY_COMPLETION_RECORD_FAILED",t[t.EVENT_SURVEY_DATA_TRANSFER_FAILED=2008]="EVENT_SURVEY_DATA_TRANSFER_FAILED",t[t.EVENT_BYO_CTA_COMPLETION_RECORD_FAILED=2009]="EVENT_BYO_CTA_COMPLETION_RECORD_FAILED",t[t.EVENT_CUSTOM=3e3]="EVENT_CUSTOM",t[t.EVENT_CONFIRM_TX_ID=3001]="EVENT_CONFIRM_TX_ID",t[t.EVENT_CHANGED_TX_ID=3002]="EVENT_CHANGED_TX_ID",t[t.EVENT_GPAY_NO_TX_ID=3003]="EVENT_GPAY_NO_TX_ID",t[t.EVENT_GPAY_CANNOT_CONFIRM_TX_ID=3004]="EVENT_GPAY_CANNOT_CONFIRM_TX_ID",t[t.EVENT_GOOGLE_UPDATED=3005]="EVENT_GOOGLE_UPDATED",t[t.EVENT_NEW_TX_ID=3006]="EVENT_NEW_TX_ID",t[t.EVENT_UNLOCKED_BY_SUBSCRIPTION=3007]="EVENT_UNLOCKED_BY_SUBSCRIPTION",t[t.EVENT_UNLOCKED_BY_METER=3008]="EVENT_UNLOCKED_BY_METER",t[t.EVENT_NO_ENTITLEMENTS=3009]="EVENT_NO_ENTITLEMENTS",t[t.EVENT_HAS_METERING_ENTITLEMENTS=3010]="EVENT_HAS_METERING_ENTITLEMENTS",t[t.EVENT_OFFERED_METER=3011]="EVENT_OFFERED_METER",t[t.EVENT_UNLOCKED_FREE_PAGE=3012]="EVENT_UNLOCKED_FREE_PAGE",t[t.EVENT_INELIGIBLE_PAYWALL=3013]="EVENT_INELIGIBLE_PAYWALL",t[t.EVENT_UNLOCKED_FOR_CRAWLER=3014]="EVENT_UNLOCKED_FOR_CRAWLER",t[t.EVENT_TWG_COUNTER_VIEW=3015]="EVENT_TWG_COUNTER_VIEW",t[t.EVENT_TWG_SITE_SUPPORTER_WALL_VIEW=3016]="EVENT_TWG_SITE_SUPPORTER_WALL_VIEW",t[t.EVENT_TWG_STATIC_BUTTON_VIEW=3017]="EVENT_TWG_STATIC_BUTTON_VIEW",t[t.EVENT_TWG_DYNAMIC_BUTTON_VIEW=3018]="EVENT_TWG_DYNAMIC_BUTTON_VIEW",t[t.EVENT_TWG_PRE_TRANSACTION_PRIVACY_SETTING_PRIVATE=3019]="EVENT_TWG_PRE_TRANSACTION_PRIVACY_SETTING_PRIVATE",t[t.EVENT_TWG_POST_TRANSACTION_SETTING_PRIVATE=3020]="EVENT_TWG_POST_TRANSACTION_SETTING_PRIVATE",t[t.EVENT_TWG_PRE_TRANSACTION_PRIVACY_SETTING_PUBLIC=3021]="EVENT_TWG_PRE_TRANSACTION_PRIVACY_SETTING_PUBLIC",t[t.EVENT_TWG_POST_TRANSACTION_SETTING_PUBLIC=3022]="EVENT_TWG_POST_TRANSACTION_SETTING_PUBLIC",t[t.EVENT_REGWALL_OPTED_IN=3023]="EVENT_REGWALL_OPTED_IN",t[t.EVENT_NEWSLETTER_OPTED_IN=3024]="EVENT_NEWSLETTER_OPTED_IN",t[t.EVENT_SHOWCASE_METERING_INIT=3025]="EVENT_SHOWCASE_METERING_INIT",t[t.EVENT_DISABLE_MINIPROMPT_DESKTOP=3026]="EVENT_DISABLE_MINIPROMPT_DESKTOP",t[t.EVENT_SUBSCRIPTION_LINKING_SUCCESS=3027]="EVENT_SUBSCRIPTION_LINKING_SUCCESS",t[t.EVENT_SURVEY_SUBMITTED=3028]="EVENT_SURVEY_SUBMITTED",t[t.EVENT_LINK_ACCOUNT_SUCCESS=3029]="EVENT_LINK_ACCOUNT_SUCCESS",t[t.EVENT_SAVE_SUBSCRIPTION_SUCCESS=3030]="EVENT_SAVE_SUBSCRIPTION_SUCCESS",t[t.EVENT_SURVEY_DATA_TRANSFER_COMPLETE=3031]="EVENT_SURVEY_DATA_TRANSFER_COMPLETE",t[t.EVENT_RUNTIME_IS_READY=3032]="EVENT_RUNTIME_IS_READY",t[t.EVENT_START_API=3033]="EVENT_START_API",t[t.EVENT_SHOW_OFFERS_API=3034]="EVENT_SHOW_OFFERS_API",t[t.EVENT_SHOW_CONTRIBUTION_OPTIONS_API=3035]="EVENT_SHOW_CONTRIBUTION_OPTIONS_API",t[t.EVENT_REWARDED_AD_FLOW_INIT=3048]="EVENT_REWARDED_AD_FLOW_INIT",t[t.EVENT_REWARDED_AD_READY=3036]="EVENT_REWARDED_AD_READY",t[t.EVENT_REWARDED_AD_GPT_MISSING_ERROR=3037]="EVENT_REWARDED_AD_GPT_MISSING_ERROR",t[t.EVENT_REWARDED_AD_ADSENSE_MISSING_ERROR=3059]="EVENT_REWARDED_AD_ADSENSE_MISSING_ERROR",t[t.EVENT_REWARDED_AD_CONFIG_ERROR=3038]="EVENT_REWARDED_AD_CONFIG_ERROR",t[t.EVENT_REWARDED_AD_PAGE_ERROR=3039]="EVENT_REWARDED_AD_PAGE_ERROR",t[t.EVENT_REWARDED_AD_GPT_ERROR=3040]="EVENT_REWARDED_AD_GPT_ERROR",t[t.EVENT_REWARDED_AD_GRANTED=3041]="EVENT_REWARDED_AD_GRANTED",t[t.EVENT_REWARDED_AD_NOT_FILLED=3049]="EVENT_REWARDED_AD_NOT_FILLED",t[t.EVENT_REWARDED_AD_GPT_FILTERED=3060]="EVENT_REWARDED_AD_GPT_FILTERED",t[t.EVENT_REWARDED_AD_ADSENSE_FILTERED=3061]="EVENT_REWARDED_AD_ADSENSE_FILTERED",t[t.EVENT_GLOBAL_FREQUENCY_CAP_MET=3042]="EVENT_GLOBAL_FREQUENCY_CAP_MET",t[t.EVENT_PROMPT_FREQUENCY_CAP_MET=3043]="EVENT_PROMPT_FREQUENCY_CAP_MET",t[t.EVENT_ACTION_IMPRESSIONS_STORAGE_KEY_NOT_FOUND_ERROR=3044]="EVENT_ACTION_IMPRESSIONS_STORAGE_KEY_NOT_FOUND_ERROR",t[t.EVENT_LOCAL_STORAGE_TIMESTAMPS_PARSING_ERROR=3052]="EVENT_LOCAL_STORAGE_TIMESTAMPS_PARSING_ERROR",t[t.EVENT_FREQUENCY_CAP_CONFIG_NOT_FOUND_ERROR=3045]="EVENT_FREQUENCY_CAP_CONFIG_NOT_FOUND_ERROR",t[t.EVENT_PROMPT_FREQUENCY_CONFIG_NOT_FOUND=3053]="EVENT_PROMPT_FREQUENCY_CONFIG_NOT_FOUND",t[t.EVENT_FREQUENCY_CAP_LOCAL_STORAGE_CONFIG_ID_KEY_NOT_FOUND=3057]="EVENT_FREQUENCY_CAP_LOCAL_STORAGE_CONFIG_ID_KEY_NOT_FOUND",t[t.EVENT_BYOP_NEWSLETTER_OPT_IN_CONFIG_ERROR=3046]="EVENT_BYOP_NEWSLETTER_OPT_IN_CONFIG_ERROR",t[t.EVENT_BYOP_NEWSLETTER_OPT_IN_CODE_SNIPPET_ERROR=3047]="EVENT_BYOP_NEWSLETTER_OPT_IN_CODE_SNIPPET_ERROR",t[t.EVENT_SUBSCRIPTION_PAYMENT_COMPLETE=3050]="EVENT_SUBSCRIPTION_PAYMENT_COMPLETE",t[t.EVENT_CONTRIBUTION_PAYMENT_COMPLETE=3051]="EVENT_CONTRIBUTION_PAYMENT_COMPLETE",t[t.EVENT_PAY_PAYMENT_COMPLETE=3058]="EVENT_PAY_PAYMENT_COMPLETE",t[t.EVENT_HOSTED_PAGE_SUBSCRIPTION_PAYMENT_COMPLETE=3054]="EVENT_HOSTED_PAGE_SUBSCRIPTION_PAYMENT_COMPLETE",t[t.EVENT_HOSTED_PAGE_CONTRIBUTION_PAYMENT_COMPLETE=3055]="EVENT_HOSTED_PAGE_CONTRIBUTION_PAYMENT_COMPLETE",t[t.EVENT_COMPLETION_COUNT_FOR_REPEATABLE_ACTION_MISSING_ERROR=3056]="EVENT_COMPLETION_COUNT_FOR_REPEATABLE_ACTION_MISSING_ERROR",t[t.EVENT_SUBSCRIPTION_STATE=4e3]="EVENT_SUBSCRIPTION_STATE",t[t.FREE_ACCESS_EVENT_LANDING=5e3]="FREE_ACCESS_EVENT_LANDING",t[t.FREE_ACCESS_EVENT_FREE_ACCESS_PROGRAM=5001]="FREE_ACCESS_EVENT_FREE_ACCESS_PROGRAM",t[t.FREE_ACCESS_EVENT_REGWALL_IMPRESSION=5002]="FREE_ACCESS_EVENT_REGWALL_IMPRESSION",t[t.FREE_ACCESS_EVENT_UNLOCK_VIA_FREE_ACCESS_PROGRAM=5003]="FREE_ACCESS_EVENT_UNLOCK_VIA_FREE_ACCESS_PROGRAM",t[t.FREE_ACCESS_EVENT_UNLOCK_VIA_FREE_ACCESS_PROGRAM_FOR_NEW_REGISTRATION=5004]="FREE_ACCESS_EVENT_UNLOCK_VIA_FREE_ACCESS_PROGRAM_FOR_NEW_REGISTRATION",t[t.FREE_ACCESS_EVENT_UNLOCK_VIA_FREE_ACCESS_PROGRAM_FOR_USER_SIGN_IN=5005]="FREE_ACCESS_EVENT_UNLOCK_VIA_FREE_ACCESS_PROGRAM_FOR_USER_SIGN_IN",t[t.FREE_ACCESS_EVENT_UNLOCK_VIA_FREE_ACCESS_PROGRAM_FOR_USER_ALREADY_SIGNED_IN=5006]="FREE_ACCESS_EVENT_UNLOCK_VIA_FREE_ACCESS_PROGRAM_FOR_USER_ALREADY_SIGNED_IN",t[t.FREE_ACCESS_EVENT_NON_FREE_ACCESS_PROGRAM_PRE_SIGN_IN=5007]="FREE_ACCESS_EVENT_NON_FREE_ACCESS_PROGRAM_PRE_SIGN_IN",t[t.FREE_ACCESS_EVENT_NON_FREE_ACCESS_PROGRAM_POST_SIGN_IN=5008]="FREE_ACCESS_EVENT_NON_FREE_ACCESS_PROGRAM_POST_SIGN_IN",t))(o||{}),a=(t=>(t[t.CTA_MODE_UNSPECIFIED=0]="CTA_MODE_UNSPECIFIED",t[t.CTA_MODE_POPUP=1]="CTA_MODE_POPUP",t[t.CTA_MODE_INLINE=2]="CTA_MODE_INLINE",t))(a||{}),h=(t=>(t[t.UNKNOWN_ENTITLEMENT_RESULT=0]="UNKNOWN_ENTITLEMENT_RESULT",t[t.UNLOCKED_SUBSCRIBER=1001]="UNLOCKED_SUBSCRIBER",t[t.UNLOCKED_FREE=1002]="UNLOCKED_FREE",t[t.UNLOCKED_METER=1003]="UNLOCKED_METER",t[t.LOCKED_REGWALL=2001]="LOCKED_REGWALL",t[t.LOCKED_PAYWALL=2002]="LOCKED_PAYWALL",t[t.INELIGIBLE_PAYWALL=2003]="INELIGIBLE_PAYWALL",t))(h||{}),l=(t=>(t[t.UNKNOWN_ENTITLEMENT_SOURCE=0]="UNKNOWN_ENTITLEMENT_SOURCE",t[t.GOOGLE_SUBSCRIBER_ENTITLEMENT=1001]="GOOGLE_SUBSCRIBER_ENTITLEMENT",t[t.GOOGLE_SHOWCASE_METERING_SERVICE=2001]="GOOGLE_SHOWCASE_METERING_SERVICE",t[t.SUBSCRIBE_WITH_GOOGLE_METERING_SERVICE=2002]="SUBSCRIBE_WITH_GOOGLE_METERING_SERVICE",t[t.PUBLISHER_ENTITLEMENT=3001]="PUBLISHER_ENTITLEMENT",t))(l||{}),u=(t=>(t[t.UNKNOWN_CLIENT=0]="UNKNOWN_CLIENT",t[t.SWG_CLIENT=1]="SWG_CLIENT",t[t.AMP_CLIENT=2]="AMP_CLIENT",t[t.PROPENSITY_CLIENT=3]="PROPENSITY_CLIENT",t[t.SWG_SERVER=4]="SWG_SERVER",t[t.PUBLISHER_CLIENT=5]="PUBLISHER_CLIENT",t[t.SHOWCASE_CLIENT=6]="SHOWCASE_CLIENT",t))(u||{});class c{constructor(t=[],e=!0){const s=e?1:0;this.t=null==t[s]?null:t[s]}getComplete(){return this.t}setComplete(t){this.t=t}toArray(t=!0){const e=[this.t];return t&&e.unshift(this.label()),e}label(){return"AccountCreationRequest"}}class d{constructor(t=[],e=!0){const s=e?1:0;this.o=null==t[s]?null:t[s],this.h=null==t[1+s]?null:t[1+s]}getSubscriberOrMember(){return this.o}setSubscriberOrMember(t){this.o=t}getLinkRequested(){return this.h}setLinkRequested(t){this.h=t}toArray(t=!0){const e=[this.o,this.h];return t&&e.unshift(this.label()),e}label(){return"AlreadySubscribedResponse"}}class g{constructor(t=[],e=!0){const s=e?1:0;this.l=null==t[s]?null:t[s],this.u=null==t[1+s]?null:t[1+s],this.p=null==t[2+s]?null:t[2+s],this.m=null==t[3+s]?null:t[3+s],this._=null==t[4+s]?null:t[4+s],this.T=null==t[5+s]?null:t[5+s],this.I=null==t[6+s]?null:t[6+s],this.A=null==t[7+s]?null:t[7+s],this.C=t[8+s]||[],this.S=null==t[9+s]?null:t[9+s],this.R=null==t[10+s]?null:t[10+s],this.O=null==t[11+s]?null:new W(t[11+s],e),this.v=null==t[12+s]?null:t[12+s],this.N=null==t[13+s]?null:t[13+s],this.P=null==t[14+s]?null:new W(t[14+s],e),this.L=null==t[15+s]?null:new w(t[15+s],e),this.k=null==t[16+s]?null:new W(t[16+s],e),this.G=null==t[17+s]?null:t[17+s],this.M=null==t[18+s]?null:t[18+s]}getEmbedderOrigin(){return this.l}setEmbedderOrigin(t){this.l=t}getTransactionId(){return this.u}setTransactionId(t){this.u=t}getReferringOrigin(){return this.p}setReferringOrigin(t){this.p=t}getUtmSource(){return this.m}setUtmSource(t){this.m=t}getUtmCampaign(){return this._}setUtmCampaign(t){this._=t}getUtmMedium(){return this.T}setUtmMedium(t){this.T=t}getSku(){return this.I}setSku(t){this.I=t}getReadyToPay(){return this.A}setReadyToPay(t){this.A=t}getLabelList(){return this.C}setLabelList(t){this.C=t}getClientVersion(){return this.S}setClientVersion(t){this.S=t}getUrl(){return this.R}setUrl(t){this.R=t}getClientTimestamp(){return this.O}setClientTimestamp(t){this.O=t}getReaderSurfaceType(){return this.v}setReaderSurfaceType(t){this.v=t}getIntegrationVersion(){return this.N}setIntegrationVersion(t){this.N=t}getPageLoadBeginTimestamp(){return this.P}setPageLoadBeginTimestamp(t){this.P=t}getLoadEventStartDelay(){return this.L}setLoadEventStartDelay(t){this.L=t}getRuntimeCreationTimestamp(){return this.k}setRuntimeCreationTimestamp(t){this.k=t}getIsLockedContent(){return this.G}setIsLockedContent(t){this.G=t}getUrlFromMarkup(){return this.M}setUrlFromMarkup(t){this.M=t}toArray(t=!0){const e=[this.l,this.u,this.p,this.m,this._,this.T,this.I,this.A,this.C,this.S,this.R,this.O?this.O.toArray(t):[],this.v,this.N,this.P?this.P.toArray(t):[],this.L?this.L.toArray(t):[],this.k?this.k.toArray(t):[],this.G,this.M];return t&&e.unshift(this.label()),e}label(){return"AnalyticsContext"}}class p{constructor(t=[],e=!0){const s=e?1:0;this.D=null==t[s]?null:t[s],this.U=null==t[1+s]?null:t[1+s],this.F=null==t[2+s]?null:t[2+s]}getEventOriginator(){return this.D}setEventOriginator(t){this.D=t}getIsFromUserAction(){return this.U}setIsFromUserAction(t){this.U=t}getConfigurationId(){return this.F}setConfigurationId(t){this.F=t}toArray(t=!0){const e=[this.D,this.U,this.F];return t&&e.unshift(this.label()),e}label(){return"AnalyticsEventMeta"}}class m{constructor(t=[],e=!0){const s=e?1:0;this.W=null==t[s]?null:new g(t[s],e),this.B=null==t[1+s]?null:t[1+s],this.V=null==t[2+s]?null:new p(t[2+s],e),this.j=null==t[3+s]?null:new A(t[3+s],e)}getContext(){return this.W}setContext(t){this.W=t}getEvent(){return this.B}setEvent(t){this.B=t}getMeta(){return this.V}setMeta(t){this.V=t}getParams(){return this.j}setParams(t){this.j=t}toArray(t=!0){const e=[this.W?this.W.toArray(t):[],this.B,this.V?this.V.toArray(t):[],this.j?this.j.toArray(t):[]];return t&&e.unshift(this.label()),e}label(){return"AnalyticsRequest"}}class E{constructor(t=[],e=!0){const s=e?1:0;this.B=null==t[s]?null:t[s]}getEvent(){return this.B}setEvent(t){this.B=t}toArray(t=!0){const e=[this.B];return t&&e.unshift(this.label()),e}label(){return"AudienceActivityClientLogsRequest"}}class _{constructor(t=[],e=!0){const s=e?1:0;this.Y=null==t[s]?null:t[s]}getUnused(){return this.Y}setUnused(t){this.Y=t}toArray(t=!0){const e=[this.Y];return t&&e.unshift(this.label()),e}label(){return"CloseWindowRequest"}}class f{constructor(t=[],e=!0){const s=e?1:0;this.K=null==t[s]?null:t[s],this.q=null==t[1+s]?null:t[1+s],this.H=null==t[2+s]?null:t[2+s],this.J=null==t[3+s]?null:t[3+s],this.$=null==t[4+s]?null:t[4+s],this.X=null==t[5+s]?null:t[5+s],this.Z=null==t[6+s]?null:t[6+s],this.tt=null==t[7+s]?null:t[7+s]}getSwgUserToken(){return this.K}setSwgUserToken(t){this.K=t}getActionCompleted(){return this.q}setActionCompleted(t){this.q=t}getUserEmail(){return this.H}setUserEmail(t){this.H=t}getAlreadyCompleted(){return this.J}setAlreadyCompleted(t){this.J=t}getDisplayName(){return this.$}setDisplayName(t){this.$=t}getGivenName(){return this.X}setGivenName(t){this.X=t}getFamilyName(){return this.Z}setFamilyName(t){this.Z=t}getTermsAndConditionsConsent(){return this.tt}setTermsAndConditionsConsent(t){this.tt=t}toArray(t=!0){const e=[this.K,this.q,this.H,this.J,this.$,this.X,this.Z,this.tt];return t&&e.unshift(this.label()),e}label(){return"CompleteAudienceActionResponse"}}let w=class{constructor(t=[],e=!0){const s=e?1:0;this.seconds_=null==t[s]?null:t[s],this.nanos_=null==t[1+s]?null:t[1+s]}getSeconds(){return this.seconds_}setSeconds(t){this.seconds_=t}getNanos(){return this.nanos_}setNanos(t){this.nanos_=t}toArray(t=!0){const e=[this.seconds_,this.nanos_];return t&&e.unshift(this.label()),e}label(){return"Duration"}};class b{constructor(t=[],e=!0){const s=e?1:0;this.st=null==t[s]?null:t[s],this.nt=null==t[1+s]?null:t[1+s]}getJwt(){return this.st}setJwt(t){this.st=t}getSource(){return this.nt}setSource(t){this.nt=t}toArray(t=!0){const e=[this.st,this.nt];return t&&e.unshift(this.label()),e}label(){return"EntitlementJwt"}}class T{constructor(t=[],e=!0){const s=e?1:0;this.rt=null==t[s]?null:new b(t[s],e),this.ot=null==t[1+s]?null:new W(t[1+s],e),this.ht=null==t[2+s]?null:t[2+s],this.ut=null==t[3+s]?null:t[3+s],this.ct=null==t[4+s]?null:t[4+s],this.dt=null==t[5+s]?null:t[5+s],this.gt=null==t[6+s]?null:new W(t[6+s],e)}getUsedEntitlement(){return this.rt}setUsedEntitlement(t){this.rt=t}getClientEventTime(){return this.ot}setClientEventTime(t){this.ot=t}getEntitlementSource(){return this.ht}setEntitlementSource(t){this.ht=t}getEntitlementResult(){return this.ut}setEntitlementResult(t){this.ut=t}getToken(){return this.ct}setToken(t){this.ct=t}getIsUserRegistered(){return this.dt}setIsUserRegistered(t){this.dt=t}getSubscriptionTimestamp(){return this.gt}setSubscriptionTimestamp(t){this.gt=t}toArray(t=!0){const e=[this.rt?this.rt.toArray(t):[],this.ot?this.ot.toArray(t):[],this.ht,this.ut,this.ct,this.dt,this.gt?this.gt.toArray(t):[]];return t&&e.unshift(this.label()),e}label(){return"EntitlementsRequest"}}class I{constructor(t=[],e=!0){const s=e?1:0;this.st=null==t[s]?null:t[s],this.K=null==t[1+s]?null:t[1+s]}getJwt(){return this.st}setJwt(t){this.st=t}getSwgUserToken(){return this.K}setSwgUserToken(t){this.K=t}toArray(t=!0){const e=[this.st,this.K];return t&&e.unshift(this.label()),e}label(){return"EntitlementsResponse"}}class A{constructor(t=[],e=!0){const s=e?1:0;this.Et=null==t[s]?null:t[s],this._t=null==t[1+s]?null:t[1+s],this.ft=null==t[2+s]?null:t[2+s],this.I=null==t[3+s]?null:t[3+s],this.wt=null==t[4+s]?null:t[4+s],this.dt=null==t[5+s]?null:t[5+s],this.bt=null==t[6+s]?null:t[6+s],this.gt=null==t[7+s]?null:new W(t[7+s],e),this.Tt=null==t[8+s]?null:t[8+s],this.It=null==t[9+s]?null:t[9+s],this.At=null==t[10+s]?null:t[10+s]}getSmartboxMessage(){return this.Et}setSmartboxMessage(t){this.Et=t}getGpayTransactionId(){return this._t}setGpayTransactionId(t){this._t=t}getHadLogged(){return this.ft}setHadLogged(t){this.ft=t}getSku(){return this.I}setSku(t){this.I=t}getOldTransactionId(){return this.wt}setOldTransactionId(t){this.wt=t}getIsUserRegistered(){return this.dt}setIsUserRegistered(t){this.dt=t}getSubscriptionFlow(){return this.bt}setSubscriptionFlow(t){this.bt=t}getSubscriptionTimestamp(){return this.gt}setSubscriptionTimestamp(t){this.gt=t}getCampaignId(){return this.Tt}setCampaignId(t){this.Tt=t}getLinkedPublicationsCount(){return this.It}setLinkedPublicationsCount(t){this.It=t}getCtaMode(){return this.At}setCtaMode(t){this.At=t}toArray(t=!0){const e=[this.Et,this._t,this.ft,this.I,this.wt,this.dt,this.bt,this.gt?this.gt.toArray(t):[],this.Tt,this.It,this.At];return t&&e.unshift(this.label()),e}label(){return"EventParams"}}class C{constructor(t=[],e=!0){const s=e?1:0;this.t=null==t[s]?null:t[s],this.Ct=null==t[1+s]?null:t[1+s]}getComplete(){return this.t}setComplete(t){this.t=t}getError(){return this.Ct}setError(t){this.Ct=t}toArray(t=!0){const e=[this.t,this.Ct];return t&&e.unshift(this.label()),e}label(){return"FinishedLoggingResponse"}}class S{constructor(t=[],e=!0){const s=e?1:0;this.St=null==t[s]?null:t[s],this.ct=null==t[1+s]?null:t[1+s]}getAuthCode(){return this.St}setAuthCode(t){this.St=t}getToken(){return this.ct}setToken(t){this.ct=t}toArray(t=!0){const e=[this.St,this.ct];return t&&e.unshift(this.label()),e}label(){return"LinkSaveTokenRequest"}}class R{constructor(t=[],e=!0){const s=e?1:0;this.Rt=null==t[s]?null:t[s]}getRequested(){return this.Rt}setRequested(t){this.Rt=t}toArray(t=!0){const e=[this.Rt];return t&&e.unshift(this.label()),e}label(){return"LinkingInfoResponse"}}class y{constructor(t=[],e=!0){const s=e?1:0;this.Y=null==t[s]?null:t[s]}getUnused(){return this.Y}setUnused(t){this.Y=t}toArray(t=!0){const e=[this.Y];return t&&e.unshift(this.label()),e}label(){return"RewardedAdAlternateActionRequest"}}class O{constructor(t=[],e=!0){const s=e?1:0;this.yt=null==t[s]?null:t[s]}getAdUnit(){return this.yt}setAdUnit(t){this.yt=t}toArray(t=!0){const e=[this.yt];return t&&e.unshift(this.label()),e}label(){return"RewardedAdLoadAdRequest"}}class v{constructor(t=[],e=!0){const s=e?1:0;this.Ot=null==t[s]?null:t[s]}getSuccess(){return this.Ot}setSuccess(t){this.Ot=t}toArray(t=!0){const e=[this.Ot];return t&&e.unshift(this.label()),e}label(){return"RewardedAdLoadAdResponse"}}class N{constructor(t=[],e=!0){const s=e?1:0;this.yt=null==t[s]?null:t[s]}getAdUnit(){return this.yt}setAdUnit(t){this.yt=t}toArray(t=!0){const e=[this.yt];return t&&e.unshift(this.label()),e}label(){return"RewardedAdViewAdRequest"}}class P{constructor(t=[],e=!0){const s=e?1:0;this.I=null==t[s]?null:t[s],this.vt=null==t[1+s]?null:t[1+s],this.Nt=null==t[2+s]?null:t[2+s],this.Pt=null==t[3+s]?null:t[3+s],this.Lt=null==t[4+s]?null:t[4+s],this.kt=null==t[5+s]?null:t[5+s],this.Gt=null==t[6+s]?null:t[6+s],this.Mt=null==t[7+s]?null:t[7+s]}getSku(){return this.I}setSku(t){this.I=t}getOldSku(){return this.vt}setOldSku(t){this.vt=t}getOneTime(){return this.Nt}setOneTime(t){this.Nt=t}getPlayOffer(){return this.Pt}setPlayOffer(t){this.Pt=t}getOldPlayOffer(){return this.Lt}setOldPlayOffer(t){this.Lt=t}getCustomMessage(){return this.kt}setCustomMessage(t){this.kt=t}getAnonymous(){return this.Gt}setAnonymous(t){this.Gt=t}getSharingPolicyEnabled(){return this.Mt}setSharingPolicyEnabled(t){this.Mt=t}toArray(t=!0){const e=[this.I,this.vt,this.Nt,this.Pt,this.Lt,this.kt,this.Gt,this.Mt];return t&&e.unshift(this.label()),e}label(){return"SkuSelectedResponse"}}class L{constructor(t=[],e=!0){const s=e?1:0;this.Dt=null==t[s]?null:t[s]}getIsClicked(){return this.Dt}setIsClicked(t){this.Dt=t}toArray(t=!0){const e=[this.Dt];return t&&e.unshift(this.label()),e}label(){return"SmartBoxMessage"}}let k=class{constructor(t=[],e=!0){const s=e?1:0;this.xt=null==t[s]?null:t[s]}getSubscribe(){return this.xt}setSubscribe(t){this.xt=t}toArray(t=!0){const e=[this.xt];return t&&e.unshift(this.label()),e}label(){return"SubscribeResponse"}};class G{constructor(t=[],e=!0){const s=e?1:0;this.Ut=null==t[s]?null:t[s],this.Ot=null==t[1+s]?null:t[1+s],this.Ft=(t[2+s]||[]).map((t=>new M(t,e)))}getPublisherProvidedId(){return this.Ut}setPublisherProvidedId(t){this.Ut=t}getSuccess(){return this.Ot}setSuccess(t){this.Ot=t}getLinkResultsList(){return this.Ft}setLinkResultsList(t){this.Ft=t}toArray(t=!0){const e=[this.Ut,this.Ot,this.Ft?this.Ft.map((e=>e.toArray(t))):[]];return t&&e.unshift(this.label()),e}label(){return"SubscriptionLinkingCompleteResponse"}}class M{constructor(t=[],e=!0){const s=e?1:0;this.Ot=null==t[s]?null:t[s],this.Wt=null==t[1+s]?null:t[1+s],this.Ut=null==t[2+s]?null:t[2+s]}getSuccess(){return this.Ot}setSuccess(t){this.Ot=t}getSwgPublicationId(){return this.Wt}setSwgPublicationId(t){this.Wt=t}getPublisherProvidedId(){return this.Ut}setPublisherProvidedId(t){this.Ut=t}toArray(t=!0){const e=[this.Ot,this.Wt,this.Ut];return t&&e.unshift(this.label()),e}label(){return"SubscriptionLinkingLinkResult"}}class D{constructor(t=[],e=!0){const s=e?1:0;this.Bt=null==t[s]?null:t[s],this.Vt=null==t[1+s]?null:t[1+s],this.zt=null==t[2+s]?null:t[2+s],this.jt=null==t[3+s]?null:t[3+s]}getAnswerId(){return this.Bt}setAnswerId(t){this.Bt=t}getAnswerText(){return this.Vt}setAnswerText(t){this.Vt=t}getAnswerCategory(){return this.zt}setAnswerCategory(t){this.zt=t}getPpsValue(){return this.jt}setPpsValue(t){this.jt=t}toArray(t=!0){const e=[this.Bt,this.Vt,this.zt,this.jt];return t&&e.unshift(this.label()),e}label(){return"SurveyAnswer"}}class x{constructor(t=[],e=!0){const s=e?1:0;this.Yt=(t[s]||[]).map((t=>new F(t,e))),this.Kt=null==t[1+s]?null:t[1+s]}getSurveyQuestionsList(){return this.Yt}setSurveyQuestionsList(t){this.Yt=t}getStorePpsInLocalStorage(){return this.Kt}setStorePpsInLocalStorage(t){this.Kt=t}toArray(t=!0){const e=[this.Yt?this.Yt.map((e=>e.toArray(t))):[],this.Kt];return t&&e.unshift(this.label()),e}label(){return"SurveyDataTransferRequest"}}class U{constructor(t=[],e=!0){const s=e?1:0;this.Ot=null==t[s]?null:t[s]}getSuccess(){return this.Ot}setSuccess(t){this.Ot=t}toArray(t=!0){const e=[this.Ot];return t&&e.unshift(this.label()),e}label(){return"SurveyDataTransferResponse"}}class F{constructor(t=[],e=!0){const s=e?1:0;this.qt=null==t[s]?null:t[s],this.Ht=null==t[1+s]?null:t[1+s],this.Jt=null==t[2+s]?null:t[2+s],this.$t=(t[3+s]||[]).map((t=>new D(t,e)))}getQuestionId(){return this.qt}setQuestionId(t){this.qt=t}getQuestionText(){return this.Ht}setQuestionText(t){this.Ht=t}getQuestionCategory(){return this.Jt}setQuestionCategory(t){this.Jt=t}getSurveyAnswersList(){return this.$t}setSurveyAnswersList(t){this.$t=t}toArray(t=!0){const e=[this.qt,this.Ht,this.Jt,this.$t?this.$t.map((e=>e.toArray(t))):[]];return t&&e.unshift(this.label()),e}label(){return"SurveyQuestion"}}class W{constructor(t=[],e=!0){const s=e?1:0;this.seconds_=null==t[s]?null:t[s],this.nanos_=null==t[1+s]?null:t[1+s]}getSeconds(){return this.seconds_}setSeconds(t){this.seconds_=t}getNanos(){return this.nanos_}setNanos(t){this.nanos_=t}toArray(t=!0){const e=[this.seconds_,this.nanos_];return t&&e.unshift(this.label()),e}label(){return"Timestamp"}}class B{constructor(t=[],e=!0){const s=e?1:0;this.Xt=null==t[s]?null:t[s]}getClose(){return this.Xt}setClose(t){this.Xt=t}toArray(t=!0){const e=[this.Xt];return t&&e.unshift(this.label()),e}label(){return"ToastCloseRequest"}}class V{constructor(t=[],e=!0){const s=e?1:0;this.Qt=null==t[s]?null:t[s]}getNative(){return this.Qt}setNative(t){this.Qt=t}toArray(t=!0){const e=[this.Qt];return t&&e.unshift(this.label()),e}label(){return"ViewSubscriptionsResponse"}}const z={AccountCreationRequest:c,ActionRequest:class{constructor(t=[],e=!0){const s=e?1:0;this.Zt=null==t[s]?null:t[s]}getAction(){return this.Zt}setAction(t){this.Zt=t}toArray(t=!0){const e=[this.Zt];return t&&e.unshift(this.label()),e}label(){return"ActionRequest"}},AlreadySubscribedResponse:d,AnalyticsContext:g,AnalyticsEventMeta:p,AnalyticsRequest:m,AudienceActivityClientLogsRequest:E,CloseWindowRequest:_,CompleteAudienceActionResponse:f,Duration:w,EntitlementJwt:b,EntitlementsRequest:T,EntitlementsResponse:I,EventParams:A,FinishedLoggingResponse:C,LinkSaveTokenRequest:S,LinkingInfoResponse:R,OpenDialogRequest:class{constructor(t=[],e=!0){const s=e?1:0;this.ee=null==t[s]?null:t[s]}getUrlPath(){return this.ee}setUrlPath(t){this.ee=t}toArray(t=!0){const e=[this.ee];return t&&e.unshift(this.label()),e}label(){return"OpenDialogRequest"}},RewardedAdAlternateActionRequest:y,RewardedAdLoadAdRequest:O,RewardedAdLoadAdResponse:v,RewardedAdViewAdRequest:N,SkuSelectedResponse:P,SmartBoxMessage:L,SubscribeResponse:k,SubscriptionLinkingCompleteResponse:G,SubscriptionLinkingLinkResult:M,SubscriptionLinkingResponse:class{constructor(t=[],e=!0){const s=e?1:0;this.Ut=null==t[s]?null:t[s]}getPublisherProvidedId(){return this.Ut}setPublisherProvidedId(t){this.Ut=t}toArray(t=!0){const e=[this.Ut];return t&&e.unshift(this.label()),e}label(){return"SubscriptionLinkingResponse"}},SurveyAnswer:D,SurveyDataTransferRequest:x,SurveyDataTransferResponse:U,SurveyQuestion:F,Timestamp:W,ToastCloseRequest:B,ViewSubscriptionsResponse:V},j=1,Y="USER_TOKEN",K="READ_TIME",q="ents",H="isreadytopay",J="subscribe.google.com:rk",$="toast",X={PPS_TAXONOMIES:"ppstaxonomies"};var Q=(t=>(t.TYPE_REGISTRATION_WALL="TYPE_REGISTRATION_WALL",t.TYPE_NEWSLETTER_SIGNUP="TYPE_NEWSLETTER_SIGNUP",t.TYPE_REWARDED_SURVEY="TYPE_REWARDED_SURVEY",t.TYPE_REWARDED_AD="TYPE_REWARDED_AD",t.TYPE_CONTRIBUTION="TYPE_CONTRIBUTION",t.TYPE_SUBSCRIPTION="TYPE_SUBSCRIPTION",t.TYPE_BYO_CTA="TYPE_BYO_CTA",t))(Q||{});function Z(...t){/swg.debug=1/.test(self.location.hash)&&(t.unshift("[Subscriptions]"),tt(...t))}function tt(...t){console.log(...t)}function et(...t){console.warn(...t)}function st(t,e="Assertion failed",...s){if(t)return;const i=e.split("%s");let n=i.shift();for(const r of s){const t=i.shift();n+=it(r)+t}throw new Error(n)}function it(t){const e=t;return 1==(null==e?void 0:e.nodeType)?e.tagName.toLowerCase()+(e.id?"#"+e.id:""):String(t)}const nt=self.document.createElement("a"),rt={};function ot(t){const e=rt[t];if(e)return e;const s=function(t,e){t.href=e;const s={href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:"0"==t.port?"":t.port,pathname:t.pathname,search:t.search,hash:t.hash,origin:t.protocol+"//"+t.host};return t.origin&&"null"!==t.origin?s.origin=t.origin:"data:"!==s.protocol&&s.host||(s.origin=s.href),s}(nt,t);return rt[t]=s}function at(t){return t?(/^[?#]/.test(t)?t.slice(1):t).split("&").reduce(((t,e)=>{const s=e.split("=");try{const e=decodeURIComponent(s[0]||""),i=decodeURIComponent(s[1]||"");e&&(t[e]=i)}catch{et("SwG could not parse a URL query param: ".concat(s[0]))}return t}),{}):{}}function ht(t,e,s){const i=t.indexOf("?"),n=t.indexOf("#");let r="";return-1!=n&&(r=t.substring(n),t=t.substring(0,n)),-1==i?t+="?":i<t.length-1&&(t+="&"),(t+=encodeURIComponent(e)+"="+encodeURIComponent(s))+r}function lt(t){return JSON.stringify(t.toArray(!1))}function ut(t){const e=t.getRootNode().querySelector("link[rel='canonical']");return null==e?void 0:e.href}function ct(t){const e=t.getRootNode();return ut(t)||e.location.origin+e.location.pathname}const dt=ot(self.window.location.href);ot(self.document.referrer);const gt={[Q.TYPE_SUBSCRIPTION]:"/subscriptionoffersiframe",[Q.TYPE_CONTRIBUTION]:"/contributionoffersiframe",[Q.TYPE_REGISTRATION_WALL]:"/regwalliframe",[Q.TYPE_NEWSLETTER_SIGNUP]:"/newsletteriframe",[Q.TYPE_REWARDED_SURVEY]:"/surveyiframe",[Q.TYPE_BYO_CTA]:"/byoctaiframe",[Q.TYPE_REWARDED_AD]:"/rewardedadiframe"};function pt(t,e){const s=e.win().location.search;return new URLSearchParams(s).get(t)}const mt={zero:"0",nocache:"1",hr1:"3600000",hr12:"43200000"},Et={default:{frontEnd:e,payEnv:"PRODUCTION",playEnv:"PROD",feCache:"nocache"},prod:{frontEnd:"https://news.google.com",payEnv:"PRODUCTION",playEnv:"PROD",feCache:"nocache"},autopush:{frontEnd:"https://subscribe-autopush.sandbox.google.com",payEnv:"PRODUCTION",playEnv:"AUTOPUSH",feCache:"nocache"},qual:{frontEnd:"https://subscribe-qual.sandbox.google.com",payEnv:"SANDBOX",playEnv:"STAGING",feCache:"nocache"}};function _t(){const t=at(self.location.hash)["swg.mode"];return t&&Et[t]?Et[t]:Et.default}function ft(){return ot(_t().frontEnd).origin}function wt(t){const e=at(self.location.hash)["swg.experiments"];return void 0!==e&&(t=ht(t,"e",e)),"".concat(_t().frontEnd,"/swg/_/api/v1")+t}function bt(t){return"https://pubads.g.doubleclick.net"+t}function Tt(t,e={},s=""){const i=s?"swg/".concat(s):"swg";t=function(t){return ht(t,"_",function(t){const e=Number(mt[t]||1);if(0===e)return"_";const s=Date.now();return String(e<=1?s:Math.floor(s/e))}(_t().feCache))}("".concat(_t().frontEnd,"/").concat(i,"/ui/v1").concat(t));const n=at(self.location.hash),r=n["swg.boqjsmode"];void 0!==r&&(t=ht(t,"jsmode",r));const o=n["swg.experiments"];void 0!==o&&(t=ht(t,"e",o));for(const a in e)t=ht(t,a,e[a]);return t}function It(t){return Object.assign(t,{_client:"SwG ".concat(s)})}const At=new Set([o.ACTION_BYO_CTA_BUTTON_CLICK,o.ACTION_BYO_CTA_CLOSE,o.ACTION_CONTRIBUTION_OFFER_SELECTED,o.ACTION_NEWSLETTER_ALREADY_OPTED_IN_CLICK,o.ACTION_NEWSLETTER_OPT_IN_BUTTON_CLICK,o.ACTION_PAYMENT_COMPLETE,o.ACTION_PAYMENT_FLOW_STARTED,o.ACTION_REGWALL_ALREADY_OPTED_IN_CLICK,o.ACTION_REGWALL_OPT_IN_BUTTON_CLICK,o.ACTION_SURVEY_CLOSED,o.ACTION_SURVEY_NEXT_BUTTON_CLICK,o.ACTION_SURVEY_PREVIOUS_BUTTON_CLICK,o.ACTION_SURVEY_SUBMIT_CLICK,o.EVENT_NEWSLETTER_OPTED_IN,o.EVENT_REGWALL_OPTED_IN,o.EVENT_SURVEY_SUBMITTED,o.IMPRESSION_BYO_CTA,o.IMPRESSION_CONTRIBUTION_OFFERS,o.IMPRESSION_NEWSLETTER_OPT_IN,o.IMPRESSION_OFFERS,o.IMPRESSION_PAGE_LOAD,o.IMPRESSION_PAYWALL,o.IMPRESSION_REGWALL_OPT_IN,o.IMPRESSION_SURVEY]);class Ct{constructor(t,e){this.se=t,this.ie=e,this.ne=this.se.eventManager(),this.re=this.se.storage()}start(){this.ne.registerEventListener(this.oe.bind(this))}async oe(t){if(!t.eventType||!At.has(t.eventType))return;const e=await this.re.get(Y,!0);if(!e)return;const s=encodeURIComponent(this.se.pageConfig().getPublicationId()),i=this.ae(t);let n="/publication/".concat(s,"/audienceactivity");n=ht(n,"sut",e),this.ie.sendBeacon(wt(n),i)}ae(t){const e=new E;return e.setEvent(t.eventType),e}}var St=(t=>(t.UNSPECIFIED="UNSPECIFIED",t.DISMISSIBLE="DISMISSIBLE",t.BLOCKING="BLOCKING",t))(St||{}),Rt=(t=>(t.UNSPECIFIED="UNSPECIFIED",t.FINITE="FINITE",t.INFINITE="INFINITE",t))(Rt||{});function yt(t){return!!(null==t?void 0:t.seconds)||!!(null==t?void 0:t.nanos)}function Ot(t,e,s){var i,n;return(null==(i=s.promptFrequencyCap)?void 0:i.duration)||(t.logSwgEvent(o.EVENT_PROMPT_FREQUENCY_CONFIG_NOT_FOUND),null==(n=e.anyPromptFrequencyCap)?void 0:n.frequencyCapDuration)}function vt(t,e){if(0===e.length)return!1;const s=Math.max(...e),i=1e3*(t.seconds||0)+(n=t.nanos||0,Math.floor(n/Math.pow(10,6)));var n;return Date.now()-s<i}function Nt(t,e,s){const i=s?t[e.configId]:t[e.type];return e.closability===St.BLOCKING?(null==i?void 0:i.completions)||[]:[...(null==i?void 0:i.dismissals)||[],...(null==i?void 0:i.completions)||[]]}const Pt={ar:"المساهمة من خلال Google",bg:"Принос чрез Google",bn:"Google-এর মাধ্যমে নিজের অবদান রাখুন",cs:"Přispívat s Googlem",da:"Bidrag via Google",de:"Unterstützen mit Google",el:"Συνεισφέρετε μέσω Google",en:"Contribute with Google",es:"Contribuye con Google","es-419":"Contribuir con Google",et:"Panustage Google'i abil",fil:"Mag-contribute gamit ang Google",fr:"Contribuer avec Google","fr-ca":"Contribuer avec Google",gu:"Google વડે કન્ટ્રિબ્યૂટ કરો",hi:"Google खाते की मदद से योगदान करें",hr:"Podržite putem Googlea",hu:"Hozzájárulás a Google-lal",id:"Beri kontribusi dengan Google",it:"Contribuisci con Google",iw:"לתרומה באמצעות Google",ja:"Google で寄付",kn:"Google ಮೂಲಕ ಕೊಡುಗೆ ನೀಡಿ",ko:"Google을 통한 후원",lt:"Skirkite paramą su „Google“",lv:"Dāvināt, izmantojot Google",ml:"Google-ലൂടെ സംഭാവന ചെയ്യുക",mr:"Google वरून योगदान द्या",ms:"Sumbangkan dengan Google",nl:"Bijdragen met Google",no:"Bidra med Google",pa:"Contribute with Google",pl:"Wesprzyj z Google","pt-br":"Contribua usando o Google","pt-pt":"Contribuir com o Google",ro:"Contribuiți cu Google",ru:"Поддержать через Google",sk:"Prispieť s Googlom",sl:"Prispevajte z Googlom",sv:"Bidra med Google",ta:"Contribute with Google",te:"Google ద్వారా డొనేట్ చేయండి",th:"สนับสนุนผ่าน Google",tr:"Google ile Katkıda Bulun",uk:"Зробити внесок через Google",ur:"Google کے ساتھ تعاون کریں",vi:"Đóng góp bằng Google","zh-cn":"通过 Google 捐赠","zh-hk":"透過 Google 捐助","zh-tw":"透過 Google 捐款"},Lt={ar:"الاشتراك من خلال Google",bg:"Абонамент към Google",bn:"Google দিয়ে সাবস্ক্রাইব করুন",cs:"Předplatné s Googlem",da:"Abonner via Google",de:"Abonnieren mit Google",el:"Εγγραφείτε με την Google",en:"Subscribe with Google",es:"Suscríbete con Google","es-419":"Suscríbete con Google",et:"Tellige Google'iga",fil:"Mag-subscribe gamit ang Google",fr:"S'abonner avec Google","fr-ca":"S'abonner avec Google",gu:"Google વડે સબ્સ્ક્રાઇબ કરો",hi:"Google खाते की मदद से सदस्यता लें",hr:"Pretplatite se putem Googlea",hu:"Előfizetés a Google-lal",id:"Berlangganan dengan Google",it:"Abbonati con Google",iw:"הרשמה באמצעות Google",ja:"Google で購読",kn:"Subscribe with Google",ko:"Google을 통해 구독하기",lt:"Prenumeruoti su „Google“",lv:"Abonēt, izmantojot Google",ml:"Subscribe with Google",mr:"Google वरून सदस्य व्हा",ms:"Langgan dengan Google",nl:"Abonneren via Google",no:"Abonner med Google",pa:"Subscribe with Google",pl:"Subskrybuj z Google","pt-br":"Assine com o Google","pt-pt":"Subscrever com o Google",ro:"Abonați-vă cu Google",ru:"Подписка через Google",sk:"Predplatné s Googlom",sl:"Naročnine z Googlom",sv:"Subscribe with Google",ta:"Subscribe with Google",te:"Google ఖాతాతో సబ్‌స్క్రయిబ్ చేయండి",th:"สมัครผ่าน Google",tr:"Google ile Abone Ol",uk:"Передплата через Google",ur:"Google کے ساتھ سبسکرائب کریں",vi:"Đăng ký bằng Google","zh-cn":"通过 Google 订阅","zh-hk":"透過 Google 訂閱","zh-tw":"透過 Google 訂閱"},kt={ar:"تم إنشاء حساب باستخدام {EMAIL}.",bg:"Създаване на профил чрез {EMAIL}",bn:"{EMAIL}-এর সাহায্যে একটি অ্যাকাউন্ট তৈরি করা হয়েছে",cs:"Vytvořen účet pomocí e-mailu {EMAIL}",da:"Opret en konto med {EMAIL}",de:"Konto bei {EMAIL} wurde erstellt",el:"Δημιουργήθηκε ένας λογαριασμός με τη διεύθυνση {EMAIL}",en:"Created an account with {EMAIL}",es:"Has creado una cuenta con {EMAIL}","es-419":"Se creó una cuenta con {EMAIL}",et:"Lõite konto e-posti aadressiga {EMAIL}",fil:"Gumawa ng account gamit ang {EMAIL}",fr:"A créé un compte avec {EMAIL}","fr-ca":"Un compte a été créé avec l'adresse {EMAIL}",gu:"{EMAIL} વડે એકાઉન્ટ બનાવ્યું",hi:"{EMAIL} का इस्तेमाल करके, एक खाता बनाया गया",hr:"Izrađen je račun s e-adresom {EMAIL}",hu:"Fiók létrehozva a következővel: {EMAIL}",id:"Membuat akun dengan {EMAIL}",it:"È stato creato un account con l'indirizzo {EMAIL}",iw:"יצרת חשבון באמצעות {EMAIL}",ja:"{EMAIL} でアカウントを作成しました",kn:"{EMAIL} ಮೂಲಕ ಒಂದು ಖಾತೆಯನ್ನು ರಚಿಸಲಾಗಿದೆ",ko:"{EMAIL}(으)로 계정을 만들었습니다.",lt:"Sukurta paskyra pas „{EMAIL}“",lv:"Ir izveidots konts ar e-pastu {EMAIL}",ml:"{EMAIL} ഉപയോഗിച്ച് അക്കൗണ്ട് സൃഷ്ടിച്ചു",mr:"{EMAIL} वापरून खाते तयार केले",ms:"Membuat akaun dengan {EMAIL}",nl:"Account gemaakt met {EMAIL}",no:"Du har opprettet en konto med {EMAIL}",pa:"{EMAIL} ਨਾਲ ਖਾਤਾ ਬਣਾਇਆ ਗਿਆ",pl:"Utworzono konto za pomocą adresu {EMAIL}","pt-br":"Conta criada com o e-mail {EMAIL}","pt-pt":"Criou uma conta com {EMAIL}",ro:"A fost creat un cont cu {EMAIL}",ru:"Вы зарегистрировали аккаунт на адрес {EMAIL}.",sk:"Vytvorený účet pomocou e‑mailu {EMAIL}",sl:"Z e-poštnim naslovom {EMAIL} je bil ustvarjen račun.",sv:"Du skapade ett konto med {EMAIL}",ta:"{EMAIL} மூலம் கணக்கு உருவாக்கப்பட்டது",te:"{EMAIL}తో ఖాతాను క్రియేట్ చేయండి",th:"สร้างบัญชีด้วย {EMAIL}",tr:"{EMAIL} ile bir hesap oluşturun",uk:"Обліковий запис створено за допомогою електронної адреси {EMAIL}",ur:"{EMAIL} سے اکاؤنٹ بنایا گیا",vi:"Đã tạo một tài khoản bằng {EMAIL}","zh-cn":"已使用 {EMAIL} 创建账号","zh-hk":"已使用 {EMAIL} 建立帳戶","zh-tw":"已使用 {EMAIL} 建立帳戶"},Gt={ar:"تم الاشتراك في النشرة الإخبارية باستخدام {EMAIL}.",bg:"Регистрирахте се за бюлетина чрез {EMAIL}",bn:"নিউজলেটারের জন্য {EMAIL}-এর সাহায্যে সাইন-আপ করা হয়েছে",cs:"Registrace k odběru zpravodaje pomocí e-mailu {EMAIL}",da:"{EMAIL} er nu tilmeldt nyhedsbrevet",de:"Du hast dich für den Newsletter von {EMAIL} angemeldet",el:"Έχετε εγγραφεί στο ενημερωτικό δελτίο με τη διεύθυνση {EMAIL}",en:"Signed up with {EMAIL} for the newsletter",es:"Te has suscrito a la newsletter con {EMAIL}","es-419":"Te registraste con {EMAIL} para recibir el boletín informativo",et:"Tellisite uudiskirja e-posti aadressiga {EMAIL}",fil:"Nag-sign up para sa newsletter gamit ang {EMAIL}",fr:"S'est abonné à la newsletter avec {EMAIL}","fr-ca":"Vous êtes inscrit au bulletin d'information avec l'adresse {EMAIL}",gu:"ન્યૂઝલેટર માટે {EMAIL} વડે સાઇન અપ કર્યું",hi:"न्यूज़लेटर पाने के लिए, {EMAIL} से साइन अप किया गया",hr:"Registrirali ste se za bilten putem e-adrese {EMAIL}",hu:"Megtörtént a hírlevélre feliratkozás a következővel: {EMAIL}",id:"Mendaftar dengan {EMAIL} untuk mendapatkan newsletter",it:"Iscrizione alla newsletter con l'indirizzo {EMAIL} effettuata",iw:"נרשמת באמצעות {EMAIL} לקבלת הניוזלטר",ja:"{EMAIL} でニュースレターを登録しました",kn:"ಸುದ್ಧಿ ಪತ್ರಕ್ಕಾಗಿ {EMAIL} ಮೂಲಕ ಸೈನ್ ಅಪ್ ಮಾಡಲಾಗಿದೆ",ko:"{EMAIL}(으)로 뉴스레터에 가입했습니다.",lt:"Prisiregistruota naujienlaiškiui pas „{EMAIL}“",lv:"Reģistrēts informatīvajam izdevumam ar e-pastu {EMAIL}",ml:"വാര്‍ത്താക്കുറിപ്പിന് {EMAIL} ഉപയോഗിച്ച് സൈൻ അപ്പ് ചെയ്തു",mr:"{EMAIL} वापरून बातमीपत्रकासाठी साइन अप केले",ms:"Mendaftar dengan {EMAIL} untuk surat berita",nl:"Aangemeld met {EMAIL} voor de nieuwsbrief",no:"Du har registrert deg for nyhetsbrevet med {EMAIL}",pa:"ਸੂਚਨਾ-ਪੱਤਰ ਲਈ {EMAIL} ਨਾਲ ਸਾਈਨ-ਅੱਪ ਕੀਤਾ ਗਿਆ",pl:"Zapisano się na newsletter za pomocą adresu {EMAIL}","pt-br":"Inscrição na newsletter feita com o e-mail {EMAIL}","pt-pt":"Inscreveu-se com {EMAIL} na newsletter",ro:"V-ați înscris la buletinul informativ cu adresa {EMAIL}",ru:"Вы подписались на новостную рассылку, используя аккаунт {EMAIL}.",sk:"Registrácia na odber bulletinu pomocou e‑mailu {EMAIL}",sl:"Z e-poštnim naslovom {EMAIL} ste se prijavili za glasilo.",sv:"Du registrerade dig för nyhetsbrevet med {EMAIL}",ta:"{EMAIL} மூலம் செய்திமடலுக்குப் பதிவு செய்யப்பட்டது",te:"న్యూస్ లెటర్ కోసం {EMAIL}తో సైన్ అప్ చేయండి",th:"ลงชื่อเข้าใช้ด้วย {EMAIL} สำหรับจดหมายข่าว",tr:"Bülten için {EMAIL} ile kaydoldunuz",uk:"Ви підписалися на інформаційні листи на електронну адресу {EMAIL}",ur:"نیوز لیٹر کے لیے {EMAIL} سے سائن اپ کیا گیا",vi:"Đã đăng ký nhận bản tin bằng {EMAIL}","zh-cn":"已使用 {EMAIL} 订阅简报","zh-hk":"已使用 {EMAIL} 註冊通訊","zh-tw":"已使用 {EMAIL} 訂閱電子報"},Mt={ar:"تعذَّرت عملية التسجيل. يُرجى إعادة المحاولة.",bg:"Регистрацията не бе успешна. Опитайте да се регистрирате отново.",bn:"রেজিস্ট্রেশন করা যায়নি। আবার রেজিস্টার করার চেষ্টা করুন।",cs:"Registrace se nezdařila. Zkuste se zaregistrovat znovu.",da:"Tilmeldingen mislykkedes. Prøv at tilmelde dig igen.",de:"Registrierung fehlgeschlagen. Versuche es noch einmal.",el:"H εγγραφή απέτυχε. Δοκιμάστε να εγγραφείτε ξανά.",en:"Registration failed. Try registering again.",es:"Registro fallido. Prueba a registrarte de nuevo.","es-419":"No se pudo completar el registro. Vuelve a intentarlo.",et:"Registreerimine nurjus. Proovige uuesti registreerida.",fil:"Hindi nairehistro. Subukang irehistro ulit.",fr:"Échec de l'enregistrement. Réessayez.","fr-ca":"Échec de l'inscription. Essayez de vous inscrire à nouveau.",gu:"રજિસ્ટ્રેશન કરવામાં નિષ્ફળ થયા. ફરી રજિસ્ટર કરવાનો પ્રયાસ કરો.",hi:"रजिस्ट्रेशन नहीं हो सका. फिर से रजिस्टर करने की कोशिश करें.",hr:"Registracija nije uspjela. Pokušajte se registrirati ponovo.",hu:"Sikertelen regisztráció. Próbáljon meg újra regisztrálni.",id:"Pendaftaran gagal. Coba daftar lagi.",it:"Registrazione non riuscita. Prova a registrarti di nuovo.",iw:"הרישום נכשל. כדאי לנסות שוב.",ja:"登録できませんでした。もう一度お試しください。",kn:"ನೋಂದಣಿ ವಿಫಲವಾಗಿದೆ. ಪುನಃ ನೋಂದಾಯಿಸಲು ಪ್ರಯತ್ನಿಸಿ.",ko:"등록에 실패했습니다. 다시 등록해 보세요.",lt:"Registracija nesėkminga. Bandykite registruotis dar kartą.",lv:"Reģistrēšanās neizdevās. Mēģiniet reģistrēties vēlreiz.",ml:"രജിസ്റ്റർ ചെയ്യാനായില്ല. വീണ്ടും രജിസ്റ്റർ ചെയ്യാൻ ശ്രമിക്കുക.",mr:"नोंदणी करता आली नाही. पुन्हा नोंदणी करून पहा.",ms:"Pendaftaran gagal. Cuba daftar lagi.",nl:"Registratie mislukt. Probeer opnieuw te registreren.",no:"Registreringen mislyktes. Prøv å registrere deg på nytt.",pa:"ਰਜਿਸਟਰੇਸ਼ਨ ਕਰਨਾ ਅਸਫਲ ਰਿਹਾ। ਰਜਿਟਰ ਕਰਨ ਦੀ ਦੁਬਾਰਾ ਕੋਸ਼ਿਸ਼ ਕਰੋ।",pl:"Rejestracja się nie udała. Spróbuj jeszcze raz się zarejestrować.","pt-br":"Não foi possível fazer o registro. Tente de novo.","pt-pt":"Falha no registo. Tente registar-se novamente.",ro:"Nu s-a realizat înregistrarea. Încercați să vă înregistrați din nou.",ru:"Не удалось пройти регистрацию. Повторите попытку.",sk:"Registrácia sa nepodarila. Skúste sa zaregistrovať znova.",sl:"Registracija ni uspela. Poskusite se znova registrirati.",sv:"Registreringen misslyckades. Försök att registrera dig igen.",ta:"பதிவுசெய்ய முடியவில்லை. மீண்டும் முயலவும்.",te:"రిజిస్ట్రేషన్ విఫలమైంది. రిజిస్ట్రేషన్‌ను మళ్లీ ట్రై చేయండి.",th:"ลงทะเบียนไม่สำเร็จ ลองลงทะเบียนอีกครั้ง",tr:"Kayıt işlemi başarısız oldu. Tekrar kayıt yaptırmayı deneyin.",uk:"Не вдалося зареєструватися. Повторіть спробу.",ur:"رجسٹریشن ناکام ہو گئی۔ دوبارہ رجسٹر کرنے کی کوشش کریں۔",vi:"Không đăng ký được. Hãy thử đăng ký lại.","zh-cn":"注册失败，请尝试重新注册。","zh-hk":"註冊失敗。請嘗試重新註冊。","zh-tw":"註冊失敗，請再試一次。"},Dt={ar:"تعذَّرت عملية الاشتراك. يُرجى إعادة المحاولة.",bg:"Регистрацията не бе успешна. Опитайте да се регистрирате отново.",bn:"সাইন-আপ করা যায়নি। আবার সাইন-আপ করার চেষ্টা করুন।",cs:"Registrace se nezdařila. Zkuste se zaregistrovat znovu.",da:"Tilmeldingen mislykkedes. Prøv at tilmelde dig igen.",de:"Anmeldung fehlgeschlagen. Versuche es noch einmal.",el:"Η εγγραφή απέτυχε. Δοκιμάστε να εγγραφείτε ξανά.",en:"Sign-up failed. Try signing up again.",es:"Suscripción fallida. Prueba a suscribirte de nuevo.","es-419":"Se produjo un error durante el registro. Vuelve a intentarlo.",et:"Registreerumine nurjus. Proovige uuesti registreeruda.",fil:"Hindi nakapag-sign up. Subukang mag-sign up ulit.",fr:"Échec de l'inscription. Réessayez.","fr-ca":"Échec de l'inscription. Essayez de vous inscrire à nouveau.",gu:"સાઇન અપ કરવામાં નિષ્ફળ થયા. ફરી સાઇન અપ કરવાનો પ્રયાસ કરો.",hi:"साइन अप नहीं किया जा सका. फिर से साइन अप करने की कोशिश करें.",hr:"Registracija nije uspjela. Pokušajte se registrirati ponovo.",hu:"A regisztráció nem sikerült. Próbáljon meg újra regisztrálni.",id:"Pendaftaran gagal. Coba daftar lagi.",it:"Iscrizione non riuscita. Prova a iscriverti di nuovo.",iw:"ההרשמה נכשלה. כדאי לנסות שוב.",ja:"登録できませんでした。もう一度お試しください。",kn:"ಸೈನ್ ಅಪ್ ವಿಫಲವಾಗಿದೆ. ಪುನಃ ಸೈನ್ ಅಪ್ ಮಾಡಲು ಪ್ರಯತ್ನಿಸಿ.",ko:"가입에 실패했습니다. 다시 가입해 보세요.",lt:"Nepavyko prisiregistruoti. Bandykite prisiregistruoti dar kartą.",lv:"Reģistrācija neizdevās. Mēģiniet reģistrēties vēlreiz.",ml:"സൈൻ അപ്പ് ചെയ്യാനായില്ല. വീണ്ടും സൈൻ അപ്പ് ചെയ്യാൻ ശ്രമിക്കുക.",mr:"साइनअप करता आले नाही. पुन्हा साइन अप करून पहा.",ms:"Daftar gagal. Cuba daftar lagi.",nl:"Aanmelding mislukt. Probeer opnieuw aan te melden.",no:"Registreringen mislyktes. Prøv å registrere deg på nytt.",pa:"ਸਾਈਨ-ਅੱਪ ਕਰਨਾ ਅਸਫਲ ਰਿਹਾ। ਸਾਈਨ-ਅੱਪ ਕਰਨ ਦੀ ਦੁਬਾਰਾ ਕੋਸ਼ਿਸ਼ ਕਰੋ।",pl:"Rejestracja się nie udała. Spróbuj jeszcze raz się zarejestrować.","pt-br":"Não foi possível se inscrever. Tente de novo.","pt-pt":"Falha na inscrição. Tente inscrever-se novamente.",ro:"Nu s-a realizat înscrierea. Încercați să vă înscrieți din nou.",ru:"Не удалось зарегистрироваться. Повторите попытку.",sk:"Registrácia sa nepodarila. Skúste sa zaregistrovať znova.",sl:"Prijava ni uspela. Poskusite se znova prijaviti.",sv:"Registreringen misslyckades. Försök att registrera dig igen.",ta:"பதிவுசெய்ய முடியவில்லை. மீண்டும் முயலவும்.",te:"సైన్ అప్ విఫలమైంది. మళ్లీ సైన్ అప్ చేసి ట్రై చేయండి.",th:"ลงชื่อสมัครรับไม่สำเร็จ ลองลงชื่อสมัครรับอีกครั้ง",tr:"Kaydolma işlemi başarısız oldu. Tekrar kaydolmayı deneyin.",uk:"Не вдалося підписатися. Повторіть спробу.",ur:"سائن اپ ناکام ہو گیا۔ دوبارہ سائن اپ کرنے کی کوشش کریں۔",vi:"Không đăng ký nhận bản tin được. Hãy thử đăng ký lại.","zh-cn":"注册失败，请尝试重新注册。","zh-hk":"申請失敗。請嘗試重新申請。","zh-tw":"訂閱失敗，請再試一次。"},xt={ar:"لم يتم العثور على أي اشتراك.",bg:"Няма намерено членство",bn:"কোনও মেম্বারশিপ খুঁজে পাওয়া যায়নি",cs:"Nebylo nalezeno žádné členství",da:"Der blev ikke fundet noget medlemskab",de:"Keine Mitgliedschaftsdaten gefunden",el:"Δεν βρέθηκε συνδρομή",en:"No membership found",es:"No se han encontrado suscripciones","es-419":"No se encontró ninguna membresía",et:"Liikmesust ei leitud",fil:"Walang nakitang membership",fr:"Aucun abonnement trouvé","fr-ca":"Aucun abonnement trouvé",gu:"કોઈ મેમ્બરશિપ મળી નથી",hi:"पैसे चुकाकर ली जाने वाली कोई सदस्यता नहीं मिली",hr:"Nije pronađena nijedna pretplata",hu:"Nem található tagság",id:"Langganan tidak ditemukan",it:"Nessun abbonamento trovato",iw:"לא נמצא מינוי",ja:"メンバーシップが見つかりません",kn:"ಯಾವುದೇ ಸದಸ್ಯತ್ವವು ಕಂಡುಬಂದಿಲ್ಲ",ko:"멤버십 정보를 찾을 수 없습니다.",lt:"Narystės nerasta",lv:"Netika atrasts neviens abonements.",ml:"അംഗത്വമൊന്നും കണ്ടെത്തിയില്ല",mr:"कोणतेही सदस्यत्व आढळले नाही",ms:"Tiada keahlian ditemukan",nl:"Geen lidmaatschap gevonden",no:"Fant ingen abonnementer",pa:"ਕੋਈ ਮੈਂਬਰਸ਼ਿਪ ਨਹੀਂ ਮਿਲੀ",pl:"Nie znaleziono subskrypcji","pt-br":"Nenhuma assinatura foi encontrada","pt-pt":"Nenhuma subscrição encontrada",ro:"Niciun abonament găsit",ru:"Подписка не найдена.",sk:"Nenašlo sa žiadne členstvo",sl:"Ni naročnin",sv:"Inget medlemskap hittades",ta:"மெம்பர்ஷிப் இல்லை",te:"మెంబర్‌షిప్ కనుగొనబడలేదు",th:"ไม่พบการเป็นสมาชิก",tr:"Üyelik bulunamadı",uk:"Немає підписок",ur:"کوئی رکنیت نہیں ملی",vi:"Không tìm thấy gói thành viên nào","zh-cn":"未找到会员资料","zh-hk":"找不到會籍","zh-tw":"找不到會員資料"},Ut={ar:'عبارة الحث على اتخاذ إجراء في ميزة "اشترِك مع Google"',bg:"Подканваща фраза за „Абонамент към Google“",bn:"Subscribe with Google CTA",cs:"Výzva k akci Předplatného s Googlem",da:"CTA for Abonner med Google",de:"„Abonnieren mit Google“-CTA",el:"CTA για τη λειτουργία Εγγραφείτε με την Google",en:"Subscribe with Google CTA",es:"CTA de Suscríbete con Google","es-419":"CTA de Suscríbete con Google",et:"CTA Tellige Google'iga",fil:"CTA ng Mag-subscribe gamit ang Google",fr:"CTA S'abonner avec Google","fr-ca":"Appel à l'action S'abonner avec Google",gu:"Subscribe with Google CTA",hi:"Subscribe with Google का सीटीए",hr:"CTA za Pretplatu putem Googlea",hu:"Előfizetés a Google-lal CTA",id:"CTA Berlangganan dengan Google",it:"CTA Abbonati con Google",iw:"‫CTA של Subscribe with Google",ja:"「Google で購読」の CTA",kn:"Subscribe with Google CTA",ko:"Google을 통한 구독 CTA",lt:"Prenumeruoti su „Google“ raginimas veikti",lv:"Abonēšana, izmantojot Google NLP",ml:"Subscribe with Google CTA",mr:"Subscribe with Google CTA",ms:"CTA Langgan dengan Google",nl:"CTA voor Abonneren via Google",no:"Handlingsfremmende oppfordring for Abonner med Google",pa:"Subscribe with Google CTA",pl:"Wezwanie do działania Subskrybuj z Google","pt-br":"CTA do Assine com o Google","pt-pt":"AAA Subscreva com o Google",ro:"Îndemnul Abonați-vă cu Google",ru:'Призыв к действию в сервисе "Подписка через Google"',sk:"Výzva na akciu Predplatného s Googlom",sl:"Poziv k dejanju za Naročnine z Googlom",sv:"Uppmaning för Subscribe with Google",ta:"Subscribe with Google CTA",te:"Subscribe with Google CTA",th:'CTA "สมัครผ่าน Google"',tr:"Google ile Abone Ol CTA Mesajı",uk:'Заклик до дії "Передплата через Google"',ur:"‫Google کے ساتھ سبسکرائب کریں کا CTA",vi:"CTA cho dịch vụ Đăng ký bằng Google","zh-cn":"“通过 Google 订阅”CTA","zh-hk":"「透過 Google 訂閱」呼籲字句 (CTA)","zh-tw":"「透過 Google 訂閱」行動號召"},Ft={ar:'زر "اشترِك مع Google"',bg:"Бутон „Абонамент към Google“",bn:"Subscribe with Google-এর বোতাম",cs:"Tlačítko Předplatného s Googlem",da:"Knap til Abonner med Google",de:"„Abonnieren mit Google“-Schaltfläche",el:"Κουμπί για τη λειτουργία Εγγραφείτε με την Google",en:"Subscribe with Google Button",es:"Botón Suscríbete con Google","es-419":"Botón de Suscríbete con Google",et:"Nupp Tellige Google'iga",fil:"Button na Mag-subscribe gamit ang Google",fr:"Bouton S'abonner avec Google","fr-ca":"Bouton S'abonner avec Google",gu:"Subscribe with Google બટન",hi:"Subscribe with Google बटन",hr:"Gumb Pretplata putem Googlea",hu:"Előfizetés a Google-lal gomb",id:"Tombol Berlangganan dengan Google",it:"Pulsante Abbonati con Google",iw:"כפתור של Subscribe with Google",ja:"「Google で購読」のボタン",kn:"Subscribe with Google ಬಟನ್",ko:"Google을 통한 구독 버튼",lt:"Prenumeruoti su „Google“ mygtukas",lv:"Poga “Abonēšana, izmantojot Google”",ml:"Subscribe with Google ബട്ടൺ",mr:"Subscribe with Google बटण",ms:"Butang Langgan dengan Google",nl:"Abonneren via Google-knop",no:"Abonner med Google-knapp",pa:"Subscribe with Google ਬਟਨ",pl:"Przycisk Subskrybuj z Google","pt-br":"Botão do Assine com o Google","pt-pt":"Botão Subscreva com o Google",ro:"Butonul Abonați-vă cu Google",ru:'Кнопка сервиса "Подписка через Google"',sk:"Tlačidlo Predplatného s Googlom",sl:"Gumb za Naročnine z Googlom",sv:"Knapp för Subscribe with Google",ta:"Subscribe with Google பட்டன்",te:"Subscribe with Google బటన్",th:'ปุ่ม "สมัครผ่าน Google"',tr:"Google ile Abone Ol Düğmesi",uk:'Кнопка "Передплата через Google"',ur:"‫Google کے ساتھ سبسکرائب کریں کا بٹن",vi:"Nút Đăng ký bằng Google","zh-cn":"“通过 Google 订阅”按钮","zh-hk":"「透過 Google 訂閱」按鈕","zh-tw":"「透過 Google 訂閱」按鈕"},Wt={ar:'إشعار "اشترِك مع Google"',bg:"Известие за „Абонамент към Google“",bn:"Subscribe with Google-এর বিজ্ঞপ্তি",cs:"Oznámení Předplatného s Googlem",da:"Notifikation om Abonner med Google",de:"„Abonnieren mit Google“-Benachrichtigung",el:"Ειδοποίηση από τη λειτουργία Εγγραφείτε με την Google",en:"Subscribe with Google Notification",es:"Notificación de Suscríbete con Google","es-419":"Notificación de Suscríbete con Google",et:"Märguanne Tellige Google'iga",fil:"Notification ng Mag-subscribe gamit ang Google",fr:"Notification S'abonner avec Google","fr-ca":"Notification S'abonner avec Google",gu:"Subscribe with Google નોટિફિકેશન",hi:"Subscribe with Google की सूचना",hr:"Obavijest o Pretplati putem Googlea",hu:"Előfizetés a Google-lal értesítés",id:"Notifikasi Berlangganan dengan Google",it:"Notifica Abbonati con Google",iw:"התראה לגבי Subscribe with Google",ja:"「Google で購読」の通知",kn:"Subscribe with Google ನೋಟಿಫಿಕೇಶನ್",ko:"Google을 통한 구독 알림",lt:"„Prenumeruoti su „Google“ pranešimas",lv:"Paziņojums par funkciju “Abonēšana, izmantojot Google”",ml:"Subscribe with Google അറിയിപ്പ്",mr:"Subscribe with Google नोटिफिकेशन",ms:"Pemberitahuan Langgan dengan Google",nl:"Melding voor Abonneren via Google",no:"Abonner med Google-varsel",pa:"Subscribe with Google ਸੂਚਨਾ",pl:"Powiadomienie Subskrybuj z Google","pt-br":"Notificação do Assine com o Google","pt-pt":"Notificação da funcionalidade Subscreva com o Google",ro:"Notificarea Abonați-vă cu Google",ru:'Уведомление сервиса "Подписка через Google"',sk:"Upozornenie Predplatného s Googlom",sl:"Obvestilo o Naročninah z Googlom",sv:"Avisering om Subscribe with Google",ta:"Subscribe with Google அறிவிப்பு",te:"Subscribe with Google నోటిఫికేషన్",th:'การแจ้งเตือน "สมัครผ่าน Google"',tr:"Google ile Abone Ol Bildirimi",uk:'Сповіщення "Передплата через Google"',ur:"‫Google کے ساتھ سبسکرائب کریں کی اطلاع",vi:"Thông báo về dịch vụ Đăng ký bằng Google","zh-cn":"“通过 Google 订阅”通知","zh-hk":"「透過 Google 訂閱」通知","zh-tw":"「透過 Google 訂閱」通知"},Bt={ar:"سبق أن اشتركت في النشرة الإخبارية.",bg:"Регистрирали сте се преди.",bn:"আপনি আগেই সাইন-আপ করেছেন।",cs:"Už jste se zaregistrovali dříve.",da:"Du har tilmeldt dig før.",de:"Du hast dich bereits angemeldet.",el:"Έχετε εγγραφεί στο παρελθόν.",en:"You have signed up before.",es:"Ya te has registrado.","es-419":"Ya te registraste antes.",et:"Olete varem juba registreerunud.",fil:"Nag-sign up ka na dati.",fr:"Vous vous êtes déjà inscrit.","fr-ca":"Vous vous êtes inscrit auparavant.",gu:"તમે પહેલેથી જ સાઇન અપ કર્યું છે.",hi:"आपने न्यूज़लेटर के लिए पहले ही साइन अप कर लिया है.",hr:"Već ste se registrirali.",hu:"Ön korábban már regisztrált.",id:"Anda telah mendaftar sebelumnya.",it:"Hai già effettuato l'iscrizione.",iw:"כבר נרשמת.",ja:"すでに登録しています。",kn:"ನೀವು ಮೊದಲು ಸೈನ್ ಅಪ್ ಮಾಡಿದ್ದೀರಿ.",ko:"이전에 가입한 사용자입니다.",lt:"Jau esate prisiregistravę.",lv:"Jūs jau iepriekš reģistrējāties.",ml:"നിങ്ങൾ മുമ്പ് സെെൻ അപ്പ് ചെയ്‌തിട്ടുണ്ട്.",mr:"तुम्ही यापूर्वी साइन अप केले आहे.",ms:"Anda sudah mendaftar sebelum ini.",nl:"Je hebt je al eerder aangemeld.",no:"Du er allerede registrert.",pa:"ਤੁਸੀਂ ਪਹਿਲਾਂ ਹੀ ਸਾਈਨ-ਅੱਪ ਕਰ ਚੁੱਕੇ ਹੈ।",pl:"Już wcześniej się zarejestrowałeś(-aś).","pt-br":"Você já se inscreveu.","pt-pt":"Já se inscreveu anteriormente.",ro:"V-ați mai înscris în trecut.",ru:"Вы уже зарегистрированы.",sk:"Už ste sa zaregistrovali.",sl:"Ste se že registrirali.",sv:"Du har redan registrerat dig.",ta:"ஏற்கெனவே பதிவு செய்துள்ளீர்கள்.",te:"మీరు ఇంతకు ముందే సైన్ అప్ చేశారు.",th:"คุณสมัครรับมาก่อนแล้ว",tr:"Daha önce kaydolmuştunuz.",uk:"Ви вже зареєструвалися.",ur:"آپ پہلے سائن اپ کر چکے ہیں۔",vi:"Bạn đã đăng ký trước đó.","zh-cn":"您之前已订阅。","zh-hk":"你之前已註冊。","zh-tw":"你先前已訂閱。"};class Vt{constructor(){}resized(){}}async function zt(t,e,s,i){const n=await t.acceptResult();if(n.origin!=e||s&&!n.originVerified||i&&!n.secureChannel)throw new Error("channel mismatch");return n.data}function jt(t,e,s,i){const n=t.createElement(e);return function(t,e={}){for(const[s,i]of Object.entries(e))t.setAttribute(s,i)}(n,s),i&&(n.textContent=i),n}function Yt(t,e){var s;const i=jt(t.getWin().document,"style",{type:"text/css"});return i.textContent=e,null==(s=t.getHead())||s.appendChild(i),i}function Kt(t){let e=t;do{if(e.nextSibling)return!0}while(e=e.parentNode);return!1}function qt(t){return"AbortError"===(null==t?void 0:t.name)}function Ht(t){const e=new Error("AbortError: "+t);return e.name="AbortError",e}class Jt{static throwAsync(t){setTimeout((()=>{throw t}))}}function $t(t,e){const s=t.en;if(!e)return s;let i="string"==typeof e?e:(n=e).lang?n.lang:(null==(o=null==(r=null==n?void 0:n.ownerDocument)?void 0:r.documentElement)?void 0:o.lang)?n.ownerDocument.documentElement.lang:"en";var n,r,o;i=i.toLowerCase(),i=i.replace(/_/g,"-");const a=i.split("-");for(;a.length;){const e=a.join("-");if(e in t)return t[e];a.pop()}return s}const Xt={"align-content":"normal",animation:"none","align-items":"normal","align-self":"auto","alignment-baseline":"auto","backface-visibility":"hidden","background-clip":"border-box","background-image":"none","baseline-shift":"0","block-size":"auto",border:"none","border-collapse":"separate",bottom:"0","box-sizing":"border-box","break-after":"auto","break-before":"auto","break-inside":"auto","buffered-rendering":"auto","caption-side":"top","caret-color":"rgb(51, 51, 51)",clear:"none",color:"rgb(51, 51, 51)","color-rendering":"auto","column-count":"auto","column-fill":"balance","column-gap":"normal","column-rule-color":"rgb(51, 51, 51)","column-rule-style":"none","column-rule-width":"0","column-span":"none","column-width":"auto",contain:"none","counter-increment":"none","counter-reset":"none",cursor:"auto",direction:"inherit",display:"block","empty-cells":"show",filter:"none",flex:"none","flex-flow":"row nowrap",float:"none","flood-color":"rgb(0, 0, 0)","flood-opacity":"1",font:"none","font-size":"medium","font-family":"",height:"auto",hyphens:"manual","image-rendering":"auto","inline-size":"",isolation:"auto","justify-content":"normal","justify-items":"normal","justify-self":"auto","letter-spacing":"normal","lighting-color":"rgb(255, 255, 255)","line-break":"auto","line-height":"normal","margin-bottom":"0",mask:"none","max-block-size":"none","max-height":"none","max-inline-size":"none","max-width":"none","min-block-size":"none","min-height":"0","min-inline-size":"0","min-width":"0","mix-blend-mode":"normal","object-fit":"fill","offset-distance":"none","offset-path":"none","offset-rotate":"auto 0deg",opacity:"1",order:"0",orphans:"2",outline:"none","overflow-anchor":"auto","overflow-wrap":"normal",overflow:"visible",padding:"0",page:"",perspective:"none","pointer-events":"auto",position:"static",quotes:"",resize:"none",right:"0","scroll-behavior":"auto","tab-size":"8","table-layout":"auto","text-align":"start","text-align-last":"auto","text-anchor":"start","text-combine-upright":"none","text-decoration":"none","text-indent":"0","text-orientation":"mixed","text-overflow":"clip","text-rendering":"auto","text-shadow":"none","text-size-adjust":"auto","text-transform":"none","text-underline-position":"auto",top:"auto","touch-action":"auto",transform:"none",transition:"none 0s ease 0s","unicode-bidi":"normal","user-select":"auto","vector-effect":"none","vertical-align":"baseline",visibility:"visible","white-space":"normal",widows:"2","word-break":"normal","word-spacing":"0","word-wrap":"normal","writing-mode":"horizontal-tb",zoom:"1","z-index":"auto"};function Qt(t,e){for(const[s,i]of Object.entries(e))t.style.setProperty(s,i.toString(),"important")}function Zt(t,e,s){t.style.setProperty(e,s)}class te extends Vt{constructor(t,e,s,i,n,r=!1,o=!1,a=!0){super(),this.he=t,this.le=e,this.ue=s,this.ce=i,this.titleLang=n,this.ge=r,this.pe=o,this.me=a,this.Ee=null,this._e=this.he.document;const h={frameborder:"0",scrolling:"no",title:$t(Ut,n)};this.fe=jt(this._e,"iframe",h),this.we=new Promise((t=>{this.be=t}))}getElement(){return this.fe}async init(t){const e=await this.le.openIframe(this.fe,this.ue,this.ce);return this.Te(e,t)}shouldFadeBody(){return this.ge}hasLoadingIndicator(){return this.pe}Te(t,e){return this.Ee=t,this.be(t),e?this.Ee.onResizeRequest((t=>{e.resizeView(this,t)})):t.onResizeRequest((t=>{Qt(this.fe,{height:"".concat(t,"px")})})),this.Ee.whenReady()}Ie(){return this.we}async on(t,e){(await this.Ie()).on(t,e)}async execute(t){(await this.Ie()).execute(t)}async acceptResult(){return(await this.Ie()).acceptResult()}async acceptResultAndVerify(t,e,s){return zt(await this.Ie(),t,e,s)}async whenComplete(){await this.acceptResult()}async onCancel(t){try{await this.acceptResult()}catch(e){throw qt(e)&&t(),e}}resized(){this.Ee&&this.Ee.resized()}shouldAnimateFade(){return this.me}}var ee=(t=>(t.NONE="none",t.CONTRIBUTION="contribution",t.CONTRIBUTION_LARGE="contribution_large",t.SUBSCRIPTION="subscription",t.SUBSCRIPTION_LARGE="subscription_large",t))(ee||{}),se=(t=>(t.OPEN="OPEN",t.CLOSED="CLOSED",t))(se||{}),ie=(t=>(t.EVENT_SHOWCASE_METER_OFFERED="EVENT_SHOWCASE_METER_OFFERED",t.EVENT_SHOWCASE_UNLOCKED_BY_SUBSCRIPTION="EVENT_SHOWCASE_UNLOCKED_BY_SUBSCRIPTION",t.EVENT_SHOWCASE_UNLOCKED_BY_METER="EVENT_SHOWCASE_UNLOCKED_BY_METER",t.EVENT_SHOWCASE_UNLOCKED_FREE_PAGE="EVENT_SHOWCASE_UNLOCKED_FREE_PAGE",t.EVENT_SHOWCASE_NO_ENTITLEMENTS_REGWALL="EVENT_SHOWCASE_NO_ENTITLEMENTS_REGWALL",t.EVENT_SHOWCASE_INELIGIBLE_PAYWALL="EVENT_SHOWCASE_INELIGIBLE_PAYWALL",t.EVENT_SHOWCASE_NO_ENTITLEMENTS_PAYWALL="EVENT_SHOWCASE_NO_ENTITLEMENTS_PAYWALL",t))(ie||{}),ne=(t=>(t.SHOW_OFFERS="showOffers",t.SHOW_SUBSCRIBE_OPTION="showSubscribeOption",t.SHOW_ABBRV_OFFER="showAbbrvOffer",t.SHOW_CONTRIBUTION_OPTIONS="showContributionOptions",t.SUBSCRIBE="subscribe",t.CONTRIBUTE="contribute",t.COMPLETE_DEFERRED_ACCOUNT_CREATION="completeDeferredAccountCreation",t.LINK_ACCOUNT="linkAccount",t.SHOW_LOGIN_PROMPT="showLoginPrompt",t.SHOW_LOGIN_NOTIFICATION="showLoginNotification",t.SHOW_METER_TOAST="showMeterToast",t))(ne||{}),re=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.IMPRESSIONS=1]="IMPRESSIONS",t))(re||{}),oe=(t=>(t.AUTO="auto",t.REDIRECT="redirect",t))(oe||{}),ae=(t=>(t.SUBSCRIPTION="SUBSCRIPTION",t.UI_CONTRIBUTION="UI_CONTRIBUTION",t))(ae||{}),he=(t=>(t.LIGHT="light",t.DARK="dark",t))(he||{}),le=(t=>(t.PREFERENCE_UNSPECIFIED="PREFERENCE_UNSPECIFIED",t.PREFERENCE_GOOGLE_PROVIDED_PROMPT="PREFERENCE_GOOGLE_PROVIDED_PROMPT",t.PREFERENCE_PUBLISHER_PROVIDED_PROMPT="PREFERENCE_PUBLISHER_PROVIDED_PROMPT",t.PREFERENCE_ADSENSE_REWARDED_AD="PREFERENCE_ADSENSE_REWARDED_AD",t))(le||{});async function ue(t,e,s,i){const n=t.ownerDocument.defaultView,r=t.style.transition||"";await new Promise((r=>{n.setTimeout((()=>{n.setTimeout(r,s);const o="".concat(s,"ms ").concat(i);Qt(t,Object.assign({transition:"transform ".concat(o,", opacity ").concat(o)},e))}))})),Qt(t,{transition:r})}const ce={height:"0"};class de{constructor(t,e,s={}){this.ue=e,this.ce=s,this.Ae=null,this._e=t.doc(),this.le=t.activities();const i=t.clientConfigManager().getLanguage(),n={frameborder:"0",scrolling:"no",class:"swg-toast",title:$t(Wt,i)};this.fe=jt(this._e.getWin().document,"iframe",n),Qt(this.fe,ce)}getElement(){return this.fe}open(){var t;return null==(t=this._e.getBody())||t.appendChild(this.fe),this.Ce()}async Ce(){const t=await this.le.openIframe(this.fe,this.ue,this.ce);await t.whenReady(),function(t){for(const e of["height"])Zt(t,e,"")}(this.fe),this.Ae=this.Se({callback:()=>(Qt(this.fe,{transform:"translateY(100%)",opacity:"1",visibility:"visible"}),ue(this.fe,{transform:"translateY(0)",opacity:"1",visibility:"visible"},400,"ease-out"))}),this._e.getWin().setTimeout((()=>{this.close()}),8e3)}async Se({callback:t}){await this.Ae;try{await t()}catch{}}close(){return this.Ae=this.Se({callback:()=>(this._e.getWin().setTimeout((()=>{var t;null==(t=this._e.getBody())||t.removeChild(this.fe)}),500),ue(this.fe,{transform:"translateY(100%)",opacity:"1",visibility:"visible"},400,"ease-out"))}),this.Ae}}const ge=/^(\)\]\}'\n)/;class pe{constructor(t){this.he=t}async fetchCredentialedJson(t){const e=await this.fetch(t,{method:"GET",headers:{Accept:"text/plain, application/json"},credentials:"include"}),s=(await e.text()).replace(ge,"");return JSON.parse(s)}async sendPost(t,e){const s={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},credentials:"include",body:"f.req="+lt(e)},i=await this.fetch(t,s);if(!i)return{};const n=await i.text();try{const t=n.replace(ge,"");return JSON.parse(t)}catch(r){return Jt.throwAsync(r),{}}}async fetch(t,e){try{return await this.he.fetch(t,e)}catch(s){const e=ot(t).origin;throw new Error("XHR Failed fetching (".concat(e,"/...): (Note: a CORS error above may indicate that this publisher or domain is not configured in Publisher Center. The CORS error happens because 4xx responses do not set CORS headers.)\n\n")+s)}}sendBeacon(t,e){const s=new Blob(["f.req="+lt(e)],{type:"application/x-www-form-urlencoded;charset=UTF-8"});navigator.sendBeacon(t,s)}}var me=(t=>(t.UNKNOWN="unknown",t.NON_SUBSCRIBER="non_subscriber",t.SUBSCRIBER="subscriber",t.PAST_SUBSCRIBER="past_subscriber",t))(me||{}),Ee=(t=>(t.IMPRESSION_PAYWALL="paywall",t.IMPRESSION_AD="ad_shown",t.IMPRESSION_OFFERS="offers_shown",t.ACTION_SUBSCRIPTIONS_LANDING_PAGE="subscriptions_landing_page",t.ACTION_OFFER_SELECTED="offer_selected",t.ACTION_PAYMENT_FLOW_STARTED="payment_flow_start",t.ACTION_PAYMENT_COMPLETED="payment_complete",t.EVENT_CUSTOM="custom",t))(Ee||{});const _e={[Ee.IMPRESSION_PAYWALL]:o.IMPRESSION_PAYWALL,[Ee.IMPRESSION_AD]:o.IMPRESSION_AD,[Ee.IMPRESSION_OFFERS]:o.IMPRESSION_OFFERS,[Ee.ACTION_SUBSCRIPTIONS_LANDING_PAGE]:o.ACTION_SUBSCRIPTIONS_LANDING_PAGE,[Ee.ACTION_OFFER_SELECTED]:o.ACTION_OFFER_SELECTED,[Ee.ACTION_PAYMENT_FLOW_STARTED]:o.ACTION_PAYMENT_FLOW_STARTED,[Ee.ACTION_PAYMENT_COMPLETED]:o.ACTION_PAYMENT_COMPLETE,[Ee.EVENT_CUSTOM]:o.EVENT_CUSTOM},fe={[o.UNKNOWN]:null,[o.IMPRESSION_PAYWALL]:Ee.IMPRESSION_PAYWALL,[o.IMPRESSION_AD]:Ee.IMPRESSION_AD,[o.IMPRESSION_OFFERS]:Ee.IMPRESSION_OFFERS,[o.IMPRESSION_SUBSCRIBE_BUTTON]:null,[o.IMPRESSION_SMARTBOX]:null,[o.ACTION_SUBSCRIBE]:null,[o.ACTION_PAYMENT_COMPLETE]:Ee.ACTION_PAYMENT_COMPLETED,[o.ACTION_ACCOUNT_CREATED]:null,[o.ACTION_ACCOUNT_ACKNOWLEDGED]:null,[o.ACTION_SUBSCRIPTIONS_LANDING_PAGE]:Ee.ACTION_SUBSCRIPTIONS_LANDING_PAGE,[o.ACTION_PAYMENT_FLOW_STARTED]:Ee.ACTION_PAYMENT_FLOW_STARTED,[o.ACTION_OFFER_SELECTED]:Ee.ACTION_OFFER_SELECTED,[o.EVENT_PAYMENT_FAILED]:null,[o.EVENT_CUSTOM]:Ee.EVENT_CUSTOM},we={[ie.EVENT_SHOWCASE_METER_OFFERED]:[o.EVENT_HAS_METERING_ENTITLEMENTS,o.EVENT_OFFERED_METER],[ie.EVENT_SHOWCASE_UNLOCKED_BY_SUBSCRIPTION]:[o.EVENT_UNLOCKED_BY_SUBSCRIPTION],[ie.EVENT_SHOWCASE_UNLOCKED_BY_METER]:[o.EVENT_HAS_METERING_ENTITLEMENTS,o.EVENT_UNLOCKED_BY_METER],[ie.EVENT_SHOWCASE_UNLOCKED_FREE_PAGE]:[o.EVENT_UNLOCKED_FREE_PAGE],[ie.EVENT_SHOWCASE_NO_ENTITLEMENTS_REGWALL]:[o.EVENT_NO_ENTITLEMENTS,o.IMPRESSION_REGWALL,o.IMPRESSION_SHOWCASE_REGWALL],[ie.EVENT_SHOWCASE_NO_ENTITLEMENTS_PAYWALL]:[o.EVENT_NO_ENTITLEMENTS,o.IMPRESSION_PAYWALL],[ie.EVENT_SHOWCASE_INELIGIBLE_PAYWALL]:[o.EVENT_INELIGIBLE_PAYWALL,o.EVENT_NO_ENTITLEMENTS]},be={[o.IMPRESSION_REGWALL]:h.LOCKED_REGWALL,[o.EVENT_UNLOCKED_BY_METER]:h.UNLOCKED_METER,[o.EVENT_UNLOCKED_BY_SUBSCRIPTION]:h.UNLOCKED_SUBSCRIBER,[o.EVENT_UNLOCKED_FREE_PAGE]:h.UNLOCKED_FREE,[o.IMPRESSION_PAYWALL]:h.LOCKED_PAYWALL,[o.EVENT_INELIGIBLE_PAYWALL]:h.INELIGIBLE_PAYWALL};function Te(t,e,s,i){return{eventCategory:t,eventAction:e,eventLabel:s,nonInteraction:i}}const Ie={[o.IMPRESSION_OFFERS]:Te("NTG paywall","paywall modal impression","",!0),[o.IMPRESSION_CONTRIBUTION_OFFERS]:Te("NTG membership","offer impressions","",!0),[o.ACTION_OFFER_SELECTED]:Te("NTG paywall","click","",!1),[o.ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLICK]:Te("NTG subscription","marketing modal click","",!1),[o.IMPRESSION_SWG_SUBSCRIPTION_MINI_PROMPT]:Te("NTG subscription","marketing modal impression","",!0),[o.ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLICK]:Te("NTG membership","marketing modal click","",!1),[o.IMPRESSION_SWG_CONTRIBUTION_MINI_PROMPT]:Te("NTG membership","membership modal impression","",!0),[o.IMPRESSION_NEWSLETTER_OPT_IN]:Te("NTG newsletter","newsletter modal impression","",!0),[o.EVENT_NEWSLETTER_OPTED_IN]:Te("NTG newsletter","newsletter signup","success",!1),[o.IMPRESSION_BYOP_NEWSLETTER_OPT_IN]:Te("NTG newsletter","newsletter modal impression","",!0),[o.ACTION_BYOP_NEWSLETTER_OPT_IN_SUBMIT]:Te("NTG newsletter","newsletter signup","success",!1),[o.IMPRESSION_REGWALL_OPT_IN]:Te("NTG account","registration modal impression","",!0),[o.EVENT_REGWALL_OPTED_IN]:Te("NTG account","registration","success",!1),[o.ACTION_SURVEY_DATA_TRANSFER]:Te("","survey submission","",!1),[o.IMPRESSION_BYO_CTA]:Te("","custom cta modal impression","",!0),[o.ACTION_BYO_CTA_BUTTON_CLICK]:Te("","custom cta click","",!1)},Ae={[o.ACTION_PAYMENT_COMPLETE]:Te("NTG subscription","submit","success",!1)},Ce={[o.ACTION_PAYMENT_COMPLETE]:Te("NTG membership","submit","success",!1)};function Se(t){return _e[t]}function Re(t){return"[object Object]"===Object.prototype.toString.call(t)}function ye(t,e){return Object.values(t).includes(e)}function Oe(t){return"function"==typeof t}function ve(t){return"boolean"==typeof t}const Ne={0:"unknown",1:"pop up",2:"inline"};class Pe{constructor(t){this.se=t,this.ne=t.eventManager()}start(){this.ne.registerEventListener(this.oe.bind(this))}oe(t,e){var s,i,n,r,o,a;const h=Pe.isGaEligible(this.se),l=Pe.isGtagEligible(this.se),u=Pe.isGtmEligible(this.se);if(!(h||l||u))return;const{ga:c,gtag:d,dataLayer:g}=this.se.win(),p=(null==(s=t.additionalParameters)?void 0:s.subscriptionFlow)||(null==(n=null==(i=t.additionalParameters)?void 0:i.getSubscriptionFlow)?void 0:n.call(i))||"";let m=function(t,e){if(!t)return;let s;return e===ne.SUBSCRIBE?s=Ae[t]:e===ne.CONTRIBUTE&&(s=Ce[t]),s||Ie[t]}(t.eventType,p);if(!m)return;const E=(null==e?void 0:e.googleAnalyticsParameters)||{},_=(null==(o=null==(r=t.additionalParameters)?void 0:r.getCtaMode)?void 0:o.call(r))||(null==(a=t.additionalParameters)?void 0:a.ctaMode)||null;if(null!=_&&(E.cta_mode=Ne[_]),m={...m,eventCategory:E.event_category||m.eventCategory,eventLabel:E.event_label||m.eventLabel},h&&c("send","event",m),l){const t={event_category:m.eventCategory,event_label:m.eventLabel,non_interaction:m.nonInteraction,...E};d("event",m.eventAction,t)}u&&g.push({event:m.eventAction,event_category:m.eventCategory,event_label:m.eventLabel,non_interaction:m.nonInteraction,configurationId:t.configurationId||"",...E})}static isGaEligible(t){return Oe(t.win().ga)}static isGtagEligible(t){return Oe(t.win().gtag)}static isGtmEligible(t){var e;return Oe(null==(e=t.win().dataLayer)?void 0:e.push)}}async function Le(t,e,s,i,n,r){const a=await async function(t,e,s,i,n){if(n)try{return await n({configurationId:e,data:t})}catch(r){return et("[swg.js] Exception in publisher provided logging callback: ".concat(r)),!1}return function(t,e,s){var i;return!!(Pe.isGaEligible(e)||Pe.isGtagEligible(e)||Pe.isGtmEligible(e))&&(null==(i=t.getSurveyQuestionsList())||i.map((t=>{var i;const n={eventType:o.ACTION_SURVEY_DATA_TRANSFER,eventOriginator:u.SWG_CLIENT,isFromUserAction:!0,additionalParameters:{ctaMode:s}};null==(i=t.getSurveyAnswersList())||i.map((s=>{const i={googleAnalyticsParameters:{survey_question:t.getQuestionText()||"",survey_question_category:t.getQuestionCategory()||"",survey_answer:s.getAnswerText()||"",survey_answer_category:s.getAnswerCategory()||"",content_id:t.getQuestionCategory()||"",content_group:t.getQuestionText()||"",content_type:s.getAnswerText()||"",event_category:t.getQuestionCategory()||"",event_label:s.getAnswerText()||""}};e.eventManager().logEvent(n,i)}))})),!0)}(t,s,i)}(t,i,e,n,r);a?e.eventManager().logSwgEvent(o.EVENT_SURVEY_DATA_TRANSFER_COMPLETE,!0,ke(n)):e.eventManager().logSwgEvent(o.EVENT_SURVEY_DATA_TRANSFER_FAILED,!1,ke(n));const h=new U;t.getStorePpsInLocalStorage()&&await async function(t,e){var s,i;const n=X.PPS_TAXONOMIES,r=t.getSurveyQuestionsList().flatMap((t=>t.getSurveyAnswersList())).map((t=>null==t?void 0:t.getPpsValue())).filter((t=>null!==t)),o=await e.storage().get(n,!0);let a=[];try{const t=null==(i=null==(s=JSON.parse(o))?void 0:s[1])?void 0:i.values;a=Array.isArray(t)?t:[]}catch{}const h=Array.from(new Set(r.concat(a))),l={[j]:{values:h}};await Promise.resolve(e.storage().set(n,JSON.stringify(l),!0))}(t,e),h.setSuccess(a),s.execute(h)}function ke(t){const e=new A;return e.setCtaMode(t),e}function Ge(t){const e=new Uint8Array(t.length);for(let s=0;s<t.length;s++){const i=t.charCodeAt(s);st(i<=255,"Characters must be in range [0,255]"),e[s]=i}return e}function Me(t){const e=new Array(t.length);for(let s=0;s<t.length;s++)e[s]=String.fromCharCode(t[s]);return e.join("")}function De(t){if("undefined"!=typeof TextDecoder)return new TextDecoder("utf-8").decode(t);const e=Me(new Uint8Array(t));return decodeURIComponent(escape(e))}function xe(t){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(t):Ge(unescape(encodeURIComponent(t)))}function Ue(t){return Ge(atob(t.replaceAll("-","+").replaceAll("_","/")))}function Fe(t){const e=Me(t);return btoa(e).replaceAll("+","-").replaceAll("/","_").replaceAll("=","")}function We(t,e){try{return JSON.parse(t)}catch(s){return void(e&&e(s))}}function Be(t,e){const s=We(t);return null==s?void 0:s[e]}class Ve{constructor(){}decode(t){return this.Re(t).payload}Re(t){function e(){throw new Error('Invalid token: "'.concat(t,'"'))}const s=t.split(".");3!=s.length&&e();const i=Ue(s[0]),n=Ue(s[1]);return{header:We(De(i),e),payload:We(De(n),e),verifiable:"".concat(s[0],".").concat(s[1]),sig:s[2]}}}class ze{constructor(t,e,s,i,n,r,o=null,a=null,h=null,l=null){this.raw=t,this.purchaseData=e,this.userData=s,this.entitlements=i,this.productType=n,this.ye=r,this.oldSku=o,this.swgUserToken=a,this.paymentRecurrence=h,this.requestMetadata=l}clone(){return new ze(this.raw,this.purchaseData,this.userData,this.entitlements,this.productType,this.ye,this.oldSku,this.swgUserToken)}json(){return{purchaseData:this.purchaseData.json(),userData:this.userData?this.userData.json():null,entitlements:this.entitlements?this.entitlements.json():null,oldSku:this.oldSku,productType:this.productType,swgUserToken:this.swgUserToken}}complete(){return this.ye()}}class je{constructor(t,e){this.raw=t,this.signature=e,this.data=t}clone(){return new je(this.raw,this.signature)}json(){return{data:this.raw,signature:this.signature}}}class Ye{constructor(t,e){this.idToken=t,this.data=e,this.id=e.sub,this.email=e.email,this.emailVerified=e.email_verified,this.name=e.name,this.givenName=e.given_name,this.familyName=e.family_name,this.pictureUrl=e.picture}clone(){return new Ye(this.idToken,this.data)}json(){return{id:this.id,email:this.email,emailVerified:this.emailVerified,name:this.name,givenName:this.givenName,familyName:this.familyName,pictureUrl:this.pictureUrl}}}const Ke={IMMEDIATE_WITH_TIME_PRORATION:1};function qe(t,e,s=null){const i=new A;return i.setSku(t),null!=s&&i.setSubscriptionFlow(s),i.setCtaMode(e?a.CTA_MODE_INLINE:a.CTA_MODE_POPUP),i}class He{constructor(t,e,s=ae.SUBSCRIPTION,i=!1,n=""){this.se=t,this.Oe=e,this.ve=s,this.Ne=i,this.Pe=n,this.Le=t.payClient(),this.ke=t.pageConfig(),this.Ge=t.analytics(),this.ne=t.eventManager(),this.Me=t.clientConfigManager()}async start(){const t=await this.Me.getClientConfig();$e.isInlineCta=this.Ne,$e.inlineConfigId=this.Pe,this.De(t.useUpdatedOfferFlows,t.paySwgVersion)}De(t,e){const s={skuId:this.Oe.skuId,publicationId:this.ke.getPublicationId()};if(e&&(s.swgVersion=e),this.Oe.oldSku){s.oldSku=this.Oe.oldSku;const t=this.Oe.replaceSkuProrationMode;s.replaceSkuProrationMode=t?Ke[t]:Ke.IMMEDIATE_WITH_TIME_PRORATION,this.Ge.setSku(s.oldSku)}this.Oe.oneTime&&(s.paymentRecurrence=2),this.Oe.metadata&&(s.metadata=this.Oe.metadata);const i=this.ve==ae.UI_CONTRIBUTION?ne.CONTRIBUTE:ne.SUBSCRIBE;this.se.callbacks().triggerFlowStarted(i,this.Oe),this.ne.logSwgEvent(o.ACTION_PAYMENT_FLOW_STARTED,!0,qe(s.skuId,this.Ne)),this.ne.logSwgEvent(t?o.ACTION_PAY_PAYMENT_FLOW_STARTED:o.ACTION_PLAY_PAYMENT_FLOW_STARTED,!0,qe("",this.Ne)),$e.waitingForPayClient=!0,this.Le.start({apiVersion:1,allowedPaymentMethods:["CARD"],environment:_t().payEnv,playEnvironment:_t().playEnv,swg:s,i:{startTimeMs:Date.now(),productType:this.ve}},{forceRedirect:this.se.config().windowOpenMode==oe.REDIRECT,forceDisableNative:"2"==e})}}const Je=class t{constructor(t){this.se=t,this.xe=null,this.Ue=null,this.I=null,this.he=t.win(),this.le=t.activities(),this.Fe=t.dialogManager(),this.ne=t.eventManager(),this.Me=t.clientConfigManager()}static configurePending(e){const s=e.eventManager();e.payClient().onResponse((async i=>{e.entitlementsManager().blockNextNotification();const n=new t(e),r=async function(t,e,s){const i=!$e.waitingForPayClient;$e.waitingForPayClient=!1;const n=await e;let r,a=o.UNKNOWN;if("object"==typeof n&&n.googleTransactionId){const e=t.analytics().getTransactionId(),s=n.googleTransactionId;i?(t.analytics().setTransactionId(s),a=o.EVENT_GPAY_CANNOT_CONFIRM_TX_ID):e===s?a=o.EVENT_CONFIRM_TX_ID:(r=new A,r.setGpayTransactionId(s),a=o.EVENT_CHANGED_TX_ID)}else r=new A,r.setHadLogged(!i),a=o.EVENT_GPAY_NO_TX_ID;return t.eventManager().logSwgEvent(a,!0,r),function(t,e,s){var i;let n=null,r=null,o=ae.SUBSCRIPTION,a=null,h=null,l=null;if(e)if("string"==typeof e)r=e;else{const t=e;if(t.swgCallbackData?n=t.swgCallbackData:t.integratorClientCallbackData&&(r=t.integratorClientCallbackData),e.paymentRequest){const t=e.paymentRequest.swg||{};a=t.oldSku,h=t.paymentRecurrence,l=t.metadata,o=(null==(i=e.paymentRequest.i)?void 0:i.productType)||ae.SUBSCRIPTION}else e.productType&&(o=e.productType)}if(r&&!n&&(r=atob(r),r)&&(n=JSON.parse(r).swgCallbackData),!n)throw new Error("unexpected payment response");return r=JSON.stringify(n),new ze(r,function(t){const e=t.purchaseData,s=t.purchaseDataSignature;return new je(e,s)}(n),function(t){const e=t.idToken;if(!e)return null;const s=(new Ve).decode(e);return new Ye(e,s)}(n),function(t,e){return e.signedEntitlements?t.entitlementsManager().parseEntitlements(e):null}(t,n),o,s,a,n.swgUserToken,h,l)}(t,n,s)}(e,i,n.complete.bind(n));e.callbacks().triggerPaymentResponse(r);try{const i=await r,a=Xe(i.purchaseData);e.analytics().setSku(a||""),s.logSwgEvent(o.ACTION_PAYMENT_COMPLETE,!0,qe(a||"",t.isInlineCta,i.productType==ae.UI_CONTRIBUTION?ne.CONTRIBUTE:ne.SUBSCRIBE)),(await e.clientConfigManager().getClientConfig()).useUpdatedOfferFlows&&s.logSwgEvent(o.EVENT_PAY_PAYMENT_COMPLETE,!0,qe("",t.isInlineCta)),i.productType==ae.UI_CONTRIBUTION?s.logSwgEvent(o.EVENT_CONTRIBUTION_PAYMENT_COMPLETE,!0,qe(a||"",t.isInlineCta,ne.CONTRIBUTE)):i.productType==ae.SUBSCRIPTION&&s.logSwgEvent(o.EVENT_SUBSCRIPTION_PAYMENT_COMPLETE,!0,qe(a||"",t.isInlineCta,ne.SUBSCRIBE)),n.start(i)}catch(a){const s=a;if(!qt(s))throw e.eventManager().logSwgEvent(o.EVENT_PAYMENT_FAILED,!1,qe("",t.isInlineCta)),e.jserror().error("Pay failed",s),s;{const i=s.productType==ae.UI_CONTRIBUTION?ne.CONTRIBUTE:ne.SUBSCRIBE;e.callbacks().triggerFlowCanceled(i),e.eventManager().logSwgEvent(o.ACTION_USER_CANCELED_PAYFLOW,!0,qe("",t.isInlineCta))}}}))}async start(e){var s;this.I=Xe(e.purchaseData),this.ne.logSwgEvent(o.IMPRESSION_ACCOUNT_CHANGED,!0,qe(this.I||"",t.isInlineCta)),this.se.entitlementsManager().reset(!0);const i={publicationId:this.se.pageConfig().getPublicationId(),productType:e.productType,isSubscriptionUpdate:!!e.oldSku,isOneTime:!!e.paymentRecurrence};e.userData&&e.entitlements?(i.idToken=e.userData.idToken,this.se.entitlementsManager().pushNextEntitlements(e.entitlements.raw),e.swgUserToken&&this.se.storage().set(Y,e.swgUserToken,!0)):i.loginHint=null==(s=e.userData)?void 0:s.email;const n={};this.Me.shouldForceLangInIframes()&&(n.hl=this.Me.getLanguage()),t.isInlineCta&&(n.ctaMode="CTA_MODE_INLINE");const r=Tt("/payconfirmiframe",n),a=await this.Me.getClientConfig();if(i.useUpdatedConfirmUi=a.useUpdatedOfferFlows,i.skipAccountCreationScreen=a.skipAccountCreationScreen,this.xe=new te(this.he,this.le,r,It(i),this.Me.getLanguage(),!0),this.xe.on(I,this.We.bind(this)),t.isInlineCta){const e=this.Be(t.inlineConfigId);if(!e)return;e.firstChild&&e.removeChild(e.firstChild),Qt(this.xe.getElement(),{width:"100%"}),e.appendChild(this.xe.getElement()),this.Ue=this.xe.init()}else this.xe.acceptResult().then((()=>{this.Fe.completeView(this.xe)})),this.Ue=this.Fe.openView(this.xe);this.Ue.then((()=>{this.se.callbacks().triggerPayConfirmOpened(this.xe)}))}We(t){const e=t.getJwt();e&&this.se.entitlementsManager().pushNextEntitlements(e)}Be(t){var e;if(!t)return null;const s=Array.from(this.he.document.querySelectorAll("div[rrm-inline-cta]"));if(0===s.length)return null;for(const i of s)if(t===(null==(e=i.getAttribute("rrm-inline-cta"))?void 0:e.trim().replace(/['"“”‘’]/g,"")))return i;return null}async complete(){this.ne.logSwgEvent(o.ACTION_ACCOUNT_CREATED,!0,qe(this.I||"",t.isInlineCta));const e=Date.now().toString();this.se.storage().set(K,e,!1),this.se.entitlementsManager().unblockNextNotification();const s=await this.Me.getClientConfig();if(await this.Ue,!s.skipAccountCreationScreen){const t=new c;t.setComplete(!0),this.xe.execute(t)}try{await this.xe.acceptResult()}catch{}s.skipAccountCreationScreen||this.ne.logSwgEvent(o.ACTION_ACCOUNT_ACKNOWLEDGED,!0,qe(this.I||"",t.isInlineCta)),this.se.entitlementsManager().setToastShown(!0)}};Je.waitingForPayClient=!1,Je.isInlineCta=!1,Je.inlineConfigId="";let $e=Je;function Xe(t){return Be(t.raw,"productId")||null}const Qe="CTA_MODE_INLINE";function Ze(t,e,s){let i;switch(t){case"TYPE_REGISTRATION_WALL":i={flavor:"basic"};break;case"TYPE_NEWSLETTER_SIGNUP":i={flavor:"custom",customText:$t(Bt,e)};break;default:return}new de(s,Tt("/toastiframe",i)).open()}function ts(t,e,s,i=!1){var n;if(!t.useUpdatedOfferFlows)return Tt("/contributionsiframe");const r={publicationId:s.getPublicationId()};return e.shouldForceLangInIframes()&&(r.hl=e.getLanguage()),(null==(n=t.uiPredicates)?void 0:n.purchaseUnavailableRegion)&&(r.purchaseUnavailableRegion="true"),i&&(r.ctaMode=Qe),Tt("/contributionoffersiframe",r)}function es(t,e,s=!1,i=""){const n=e.getSku(),r=e.getOneTime();if(n){const e={skuId:n};r&&(e.oneTime=r),s?t.analytics().addLabels([Qe]):t.analytics().removeLabels([Qe]),new He(t,e,ae.UI_CONTRIBUTION,s,i).start()}}function ss(t,e,s,i,n=!1){var r;if(!t.useUpdatedOfferFlows){const t=at(i)["swg.newoffercard"];return Tt("/offersiframe",t?{useNewOfferCard:t}:{})}const o={publicationId:s.getPublicationId()};return e.shouldForceLangInIframes()&&(o.hl=e.getLanguage()),(null==(r=t.uiPredicates)?void 0:r.purchaseUnavailableRegion)&&(o.purchaseUnavailableRegion="true"),n&&(o.ctaMode=Qe),Tt("/subscriptionoffersiframe",o)}function is(t,e,s=!1,i=""){const n=e.getSku();if(n){const r={skuId:n},h=e.getOldSku();h&&(r.oldSku=h,t.analytics().setSku(h)),s?t.analytics().addLabels([Qe]):t.analytics().removeLabels([Qe]),t.eventManager().logSwgEvent(o.ACTION_OFFER_SELECTED,!0,function(t,e){const s=new A;return s.setSku(t),s.setCtaMode(e?a.CTA_MODE_INLINE:a.CTA_MODE_POPUP),s}(n,s)),new He(t,r,ae.SUBSCRIPTION,s,i).start()}}function ns(t,e){e.getNative()&&t.callbacks().triggerSubscribeRequest()}const rs=[Q.TYPE_BYO_CTA,Q.TYPE_REGISTRATION_WALL,Q.TYPE_NEWSLETTER_SIGNUP,Q.TYPE_REWARDED_AD,Q.TYPE_REWARDED_SURVEY],os={[ee.SUBSCRIPTION]:ae.SUBSCRIPTION,[ee.SUBSCRIPTION_LARGE]:ae.SUBSCRIPTION,[ee.CONTRIBUTION]:ae.UI_CONTRIBUTION,[ee.CONTRIBUTION_LARGE]:ae.UI_CONTRIBUTION},as=ae.SUBSCRIPTION,hs=/{EMAIL}/g;class ls{constructor(t,e){this.se=t,this.j=e,this.ve=e.autoPromptType?os[e.autoPromptType]:as,this.Fe=t.dialogManager(),this.Ve=t.entitlementsManager(),this.Me=t.clientConfigManager(),this.fetcher=new pe(t.win()),this.rewardedSlotReadyHandler=this.rewardedSlotReady.bind(this),this.rewardedSlotClosedHandler=this.rewardedSlotClosed.bind(this),this.rewardedSlotGrantedHandler=this.rewardedSlotGranted.bind(this),this.slotRenderEndedHandler=this.slotRenderEnded.bind(this);const s={origin:ot(t.win().location.href).origin,configurationId:this.j.configurationId||"",isClosable:(!!e.isClosable).toString(),calledManually:e.calledManually.toString(),previewEnabled:(!!e.shouldRenderPreview).toString()};this.Me.shouldForceLangInIframes()&&(s.hl=this.Me.getLanguage()),this.j.onAlternateAction&&(s.onaa="true"),this.j.onSignIn&&(s.onsi="true"),this.xe=new te(t.win(),t.activities(),Tt(gt[e.action],s),It({supportsEventManager:!0,productType:this.ve,windowHeight:t.win().innerHeight}),this.Me.getLanguage(),!0),e.shouldRenderPreview&&e.action!==Q.TYPE_BYO_CTA&&Qt(this.xe.getElement(),{"pointer-events":"none"})}start(){return this.xe.on(f,(t=>this.ze(t))),this.xe.on(x,(t=>Le(t,this.se,this.xe,this.j.configurationId,a.CTA_MODE_POPUP,this.j.onResult))),this.xe.on(d,this.je.bind(this)),this.xe.on(O,this.handleRewardedAdLoadAdRequest.bind(this)),this.xe.on(N,this.handleRewardedAdViewAdRequest.bind(this)),this.xe.on(y,this.handleRewardedAdAlternateActionRequest.bind(this)),this.xe.onCancel((()=>{var t,e,s;null==(e=(t=this.j).onCancel)||e.call(t),this.cleanUpGoogletag(),null==(s=this.disposeAd)||s.call(this)})),this.Fe.openView(this.xe,!1,{shouldDisableBodyScrolling:!0,closeOnBackgroundClick:!!this.j.isClosable})}async ze(t){var e;const{onResult:s,configurationId:i}=this.j;this.Fe.completeView(this.xe);const n=t.getSwgUserToken();await this.updateEntitlements(n),this.isOptIn(this.j.action)&&s&&s({configurationId:i,data:{email:t.getUserEmail(),displayName:t.getDisplayName(),givenName:t.getGivenName(),familyName:t.getFamilyName(),termsAndConditionsConsent:t.getTermsAndConditionsConsent()}}),this.j.suppressToast||(t.getActionCompleted()?this.Ye(null!=(e=t.getUserEmail())?e:""):t.getAlreadyCompleted()?Ze(this.j.action,this.Me.getLanguage(),this.se):this.Ke())}Ye(t){const e=this.Me.getLanguage();let s="";switch(this.j.action){case Q.TYPE_REGISTRATION_WALL:s=$t(kt,e).replace(hs,t);break;case Q.TYPE_NEWSLETTER_SIGNUP:s=$t(Gt,e).replace(hs,t);break;default:return}new de(this.se,Tt("/toastiframe",{flavor:"custom",customText:s})).open()}isOptIn(t){return t===Q.TYPE_NEWSLETTER_SIGNUP||t===Q.TYPE_REGISTRATION_WALL}Ke(){const t=this.Me.getLanguage();let e="";switch(this.j.action){case Q.TYPE_REGISTRATION_WALL:e=$t(Mt,t);break;case Q.TYPE_NEWSLETTER_SIGNUP:e=$t(Dt,t);break;default:return}new de(this.se,Tt("/toastiframe",{flavor:"custom",customText:e})).open()}je(t){this.j.onSignIn?this.j.onSignIn():t.getSubscriberOrMember()&&this.se.callbacks().triggerLoginRequest({linkRequested:!1})}handleRewardedAdLoadAdRequest(t){if(this.j.preference===le.PREFERENCE_ADSENSE_REWARDED_AD){const t=this.se.win().adsbygoogle;if(!t)return this.se.eventManager().logSwgEvent(o.EVENT_REWARDED_AD_ADSENSE_MISSING_ERROR),void this.sendRewardedAdLoadAdResponse(!1);null==t||t.push({params:{google_adtest:pt("google_adtest",this.se),google_tag_origin:"rrm",google_reactive_ad_format:11,google_wrap_fullscreen_ad:!0,google_video_play_muted:!1,google_acr:this.showASRewardedAd.bind(this)}})}else{const e=this.se.win().googletag;if(!e)return this.se.eventManager().logSwgEvent(o.EVENT_REWARDED_AD_GPT_MISSING_ERROR),void this.sendRewardedAdLoadAdResponse(!1);e.cmd.push((()=>this.setUpRewardedAd(t.getAdUnit())))}this.rewardedAdTimeout=setTimeout(this.handleRewardedAdLoadAdRequestTimeout.bind(this),5e3)}handleRewardedAdLoadAdRequestTimeout(){this.se.eventManager().logSwgEvent(o.EVENT_REWARDED_AD_GPT_ERROR),this.sendRewardedAdLoadAdResponse(!1)}showASRewardedAd(t){clearTimeout(this.rewardedAdTimeout),(null==t?void 0:t.show)||(this.se.eventManager().logSwgEvent(o.EVENT_REWARDED_AD_NOT_FILLED),this.sendRewardedAdLoadAdResponse(!1)),this.showRewardedAd=()=>t.show(this.handleASRewardedAdResult.bind(this)),this.disposeAd=null==t?void 0:t.disposeAd,this.sendRewardedAdLoadAdResponse(!0)}async handleASRewardedAdResult(t){var e,s;"viewed"===t.status?await this.rewardedAdGrant(null==(e=null==t?void 0:t.reward)?void 0:e.amount,null==(s=null==t?void 0:t.reward)?void 0:s.type):this.rewardedSlotClosed()}setUpRewardedAd(t){const e=this.se.win().googletag;if(this.rewardedAdSlot=e.defineOutOfPageSlot(t,e.enums.OutOfPageFormat.REWARDED),!this.rewardedAdSlot)return this.se.eventManager().logSwgEvent(o.EVENT_REWARDED_AD_PAGE_ERROR),void this.sendRewardedAdLoadAdResponse(!1);const s=e.pubads();this.rewardedAdSlot.addService(s),s.addEventListener("rewardedSlotReady",this.rewardedSlotReadyHandler),s.addEventListener("rewardedSlotClosed",this.rewardedSlotClosedHandler),s.addEventListener("rewardedSlotGranted",this.rewardedSlotGrantedHandler),s.addEventListener("slotRenderEnded",this.slotRenderEndedHandler),e.enableServices(),e.display(this.rewardedAdSlot),s.refresh([this.rewardedAdSlot])}rewardedSlotReady(t){clearTimeout(this.rewardedAdTimeout),this.showRewardedAd=t.makeRewardedVisible,this.sendRewardedAdLoadAdResponse(!0)}rewardedSlotClosed(){var t,e;this.cleanUpGoogletag(),this.se.eventManager().logSwgEvent(o.ACTION_REWARDED_AD_CLOSE_AD,!0),this.j.onAlternateAction&&this.j.onAlternateAction(),this.Fe.completeView(this.xe),null==(e=(t=this.j).onResult)||e.call(t,{configurationId:this.j.configurationId,data:{rendered:!0,rewardGranted:!1}})}async rewardedSlotGranted(t){var e,s;this.cleanUpGoogletag(),await this.rewardedAdGrant(null==(e=null==t?void 0:t.payload)?void 0:e.amount,null==(s=null==t?void 0:t.payload)?void 0:s.type)}async rewardedAdGrant(t,e){var s,i;this.se.eventManager().logSwgEvent(o.EVENT_REWARDED_AD_GRANTED),null==(i=(s=this.j).onResult)||i.call(s,{configurationId:this.j.configurationId,data:{rendered:!0,rewardGranted:!0,reward:t,type:e}}),this.Fe.completeView(this.xe),await this.completeAudienceAction()}slotRenderEnded(t){t.slot===this.rewardedAdSlot&&t.isEmpty&&(clearTimeout(this.rewardedAdTimeout),this.se.eventManager().logSwgEvent(o.EVENT_REWARDED_AD_NOT_FILLED),this.sendRewardedAdLoadAdResponse(!1))}sendRewardedAdLoadAdResponse(t){var e,s;const i=new v;i.setSuccess(t),this.xe.execute(i),t||null==(s=(e=this.j).onResult)||s.call(e,{configurationId:this.j.configurationId,data:{rendered:!1,rewardGranted:!1}})}handleRewardedAdViewAdRequest(){var t;null==(t=this.showRewardedAd)||t.call(this)}handleRewardedAdAlternateActionRequest(){this.j.onAlternateAction&&this.j.onAlternateAction()}cleanUpGoogletag(){var t,e,s,i,n,r;const o=this.se.win().googletag;this.rewardedAdSlot&&(null==(t=null==o?void 0:o.destroySlots)||t.call(o,[this.rewardedAdSlot]));const a=null==(e=null==o?void 0:o.pubads)?void 0:e.call(o);null==(s=null==a?void 0:a.removeEventListener)||s.call(a,"rewardedSlotReady",this.rewardedSlotReadyHandler),null==(i=null==a?void 0:a.removeEventListener)||i.call(a,"rewardedSlotClosed",this.rewardedSlotClosedHandler),null==(n=null==a?void 0:a.removeEventListener)||n.call(a,"rewardedSlotGranted",this.rewardedSlotGrantedHandler),null==(r=null==a?void 0:a.removeEventListener)||r.call(a,"slotRenderEnded",this.slotRenderEndedHandler)}async completeAudienceAction(){const t=[["sut",await this.se.storage().get(Y,!0)],["configurationId",this.j.configurationId],["audienceActionType",this.j.action]],e=this.se.pageConfig().getPublicationId(),s="/publication/".concat(encodeURIComponent(e),"/completeaudienceaction"),i=t.reduce(((t,[e,s])=>ht(t,e,s)),wt(s)),n={toArray:()=>[],label:String},r=await this.fetcher.sendPost(i,n);r.updated&&await this.updateEntitlements(r.swgUserToken)}async updateEntitlements(t){this.Ve.clear(),t&&await this.se.storage().set(Y,t,!0);const e=Date.now().toString();await this.se.storage().set(K,e,!1),await this.Ve.getEntitlements()}showNoEntitlementFoundToast(){this.xe.execute(new I)}}class us{constructor(t){this._e=t.doc(),this.Me=t.clientConfigManager(),st(this.Me,"MiniPromptApi requires an instance of ClientConfigManager."),this.ne=t.eventManager()}init(){const t=this._e.getHead();if(!t)return void et("Unable to retrieve the head node of the current document, which is needed by MiniPromptApi.");const e="".concat(i,"/swg-mini-prompt.css");t.querySelector('link[href="'.concat(e,'"]'))||t.appendChild(jt(this._e.getWin().document,"link",{rel:"stylesheet",type:"text/css",href:e}))}create(t){if(t.autoPromptType!==ee.CONTRIBUTION&&t.autoPromptType!==ee.SUBSCRIPTION)return;const e=this.Me.getTheme(),s=this.Me.getLanguage();let i="";t.autoPromptType===ee.CONTRIBUTION?i=$t(Pt,s):t.autoPromptType===ee.SUBSCRIPTION&&(i=$t(Lt,s));const n=jt(this._e.getWin().document,"div",{role:"dialog",lang:s});n.classList.add("swg-mini-prompt-".concat(e));const r=jt(this._e.getWin().document,"div",{role:"button"});r.classList.add("swg-mini-prompt-title-container"),r.innerHTML='\n<div class="swg-mini-prompt-icon-$theme$"></div>\n<h1 class="swg-mini-prompt-title-text-$theme$">$textContent$</h1>\n'.replace(/\$theme\$/g,e).replace("$textContent$",i);const o=jt(this._e.getWin().document,"div",{});o.classList.add("swg-mini-prompt-close-button-container"),o.innerHTML='\n<div class="swg-mini-prompt-close-icon-$theme$"></div>\n'.replace("$theme$",e),n.appendChild(r),n.appendChild(o),this._e.getWin().document.body.appendChild(n),r.addEventListener("click",(()=>{this.qe(t.autoPromptType),"function"==typeof t.clickCallback&&t.clickCallback(),Zt(n,"visibility","hidden")})),o.addEventListener("click",(()=>{Zt(n,"visibility","hidden"),this.He(t.autoPromptType)})),this.Je(t.autoPromptType)}Je(t){let e;t===ee.CONTRIBUTION?e=o.IMPRESSION_SWG_CONTRIBUTION_MINI_PROMPT:t===ee.SUBSCRIPTION&&(e=o.IMPRESSION_SWG_SUBSCRIPTION_MINI_PROMPT),e&&this.ne.logSwgEvent(e,!1)}qe(t){let e;t===ee.CONTRIBUTION?e=o.ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLICK:t===ee.SUBSCRIPTION&&(e=o.ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLICK),e&&this.ne.logSwgEvent(e,!0)}He(t){let e;t===ee.CONTRIBUTION?e=o.ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLOSE:t===ee.SUBSCRIPTION&&(e=o.ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLOSE),e&&this.ne.logSwgEvent(e,!0)}}let cs=null;function ds(t){if(!cs){cs={};let s="enable-pub-id-suffix-for-storage-key";try{const e=at(t.location.hash)["swg.experiments"];e&&(s+=","+e)}catch(e){Jt.throwAsync(e)}for(let i of s.split(","))if(i=i.trim(),i)try{gs(t,cs,i)}catch(e){Jt.throwAsync(e)}}return cs}function gs(t,e,s){let i,n,r=!1;const o=s.indexOf(":");if(-1==o?(i=s,n=100,r=!1):(i=s.substring(0,o).trim(),"c"==(s=s.substring(o+1)).substring(s.length-1)&&(r=!0,s=s.substring(0,s.length-1)),n=parseInt(s,10)),isNaN(n))throw new Error("invalid fraction");let a;if(n>99)a=!0;else if(n<1)a=!1;else if(t.sessionStorage){r=r&&n<=20;try{const e="subscribe.google.com:e:"+i+":"+n+(r?"c":"");let s="e"==(h=t.sessionStorage.getItem(e))?"e":"c"==h?"c":null;!s&&100*Math.random()<=n*(r?2:1)&&(s=!r||Math.random()<=.5?"e":"c",t.sessionStorage.setItem(e,s)),a=!!s,"c"==s&&(i="c-"+i)}catch(l){a=!1,Jt.throwAsync(l)}}else a=!1;var h;e[i]=a}function ps(t,e){return ds(t)[e]||!1}function ms(t){const e=ds(t),s=[];for(const i in e)e[i]&&s.push(i);return s}const Es="subscribe.google.com";class _s{constructor(t,e){this.he=t,this.ke=e,this.$e={}}async get(t,e=!1){const s=this.Xe(t),i=this.Qe(t),n=await this.Ze(i,e);return null!==n?n:this.Ze(s,e)}Ze(t,e){return this.$e[t]||(this.$e[t]=new Promise((s=>{const i=e?this.he.localStorage:this.he.sessionStorage;if(i)try{s(i.getItem(t))}catch{s(null)}else s(null)}))),this.$e[t]}async set(t,e,s=!1){const i=this.Xe(t),r=this.Qe(t);return null!==await this.Ze(r,s)||ps(this.he,n.ENABLE_PUBLICATION_ID_SUFFIX_FOR_STORAGE_KEY)?(await this.ts(i,s),this.ss(r,e,s)):this.ss(i,e,s)}ss(t,e,s){return this.$e[t]=Promise.resolve(e),new Promise((i=>{const n=s?this.he.localStorage:this.he.sessionStorage;if(n)try{n.setItem(t,e)}catch{}i()}))}async remove(t,e=!1){const s=this.Xe(t),i=this.Qe(t);return null!==await this.Ze(i,e)||ps(this.he,n.ENABLE_PUBLICATION_ID_SUFFIX_FOR_STORAGE_KEY)?this.ts(i,e):this.ts(s,e)}ts(t,e){return delete this.$e[t],new Promise((s=>{const i=e?this.he.localStorage:this.he.sessionStorage;if(i)try{i.removeItem(t)}catch{}s()}))}Xe(t){return Es+":"+t}Qe(t){if(Object.values(X).includes(t))return this.Xe(t);const e=this.ke.getPublicationId();return Es+":"+t+":"+e}}function fs(t){const e=Date.now()-12096e5;let s=0;for(;s<t.length&&!(t[s]>=e);s++);return t.slice(s)}const ws=[o.IMPRESSION_SWG_CONTRIBUTION_MINI_PROMPT,o.IMPRESSION_SWG_SUBSCRIPTION_MINI_PROMPT,o.IMPRESSION_OFFERS,o.IMPRESSION_CONTRIBUTION_OFFERS],bs=new Map([[o.ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLOSE,Q.TYPE_CONTRIBUTION],[o.ACTION_CONTRIBUTION_OFFERS_CLOSED,Q.TYPE_CONTRIBUTION],[o.ACTION_NEWSLETTER_OPT_IN_CLOSE,Q.TYPE_NEWSLETTER_SIGNUP],[o.ACTION_BYOP_NEWSLETTER_OPT_IN_CLOSE,Q.TYPE_NEWSLETTER_SIGNUP],[o.ACTION_REGWALL_OPT_IN_CLOSE,Q.TYPE_REGISTRATION_WALL],[o.ACTION_SURVEY_CLOSED,Q.TYPE_REWARDED_SURVEY],[o.ACTION_REWARDED_AD_CLOSE,Q.TYPE_REWARDED_AD],[o.ACTION_BYO_CTA_CLOSE,Q.TYPE_BYO_CTA],[o.ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLOSE,Q.TYPE_SUBSCRIPTION],[o.ACTION_SUBSCRIPTION_OFFERS_CLOSED,Q.TYPE_SUBSCRIPTION]]),Ts=new Map([[o.EVENT_CONTRIBUTION_PAYMENT_COMPLETE,Q.TYPE_CONTRIBUTION],[o.ACTION_NEWSLETTER_OPT_IN_BUTTON_CLICK,Q.TYPE_NEWSLETTER_SIGNUP],[o.ACTION_BYOP_NEWSLETTER_OPT_IN_SUBMIT,Q.TYPE_NEWSLETTER_SIGNUP],[o.ACTION_REGWALL_OPT_IN_BUTTON_CLICK,Q.TYPE_REGISTRATION_WALL],[o.ACTION_SURVEY_SUBMIT_CLICK,Q.TYPE_REWARDED_SURVEY],[o.ACTION_REWARDED_AD_VIEW,Q.TYPE_REWARDED_AD],[o.ACTION_BYO_CTA_BUTTON_CLICK,Q.TYPE_BYO_CTA],[o.EVENT_SUBSCRIPTION_PAYMENT_COMPLETE,Q.TYPE_SUBSCRIPTION]]),Is=new Map([[o.IMPRESSION_SWG_CONTRIBUTION_MINI_PROMPT,Q.TYPE_CONTRIBUTION],[o.IMPRESSION_CONTRIBUTION_OFFERS,Q.TYPE_CONTRIBUTION],[o.IMPRESSION_NEWSLETTER_OPT_IN,Q.TYPE_NEWSLETTER_SIGNUP],[o.IMPRESSION_BYOP_NEWSLETTER_OPT_IN,Q.TYPE_NEWSLETTER_SIGNUP],[o.IMPRESSION_REGWALL_OPT_IN,Q.TYPE_REGISTRATION_WALL],[o.IMPRESSION_SURVEY,Q.TYPE_REWARDED_SURVEY],[o.IMPRESSION_REWARDED_AD,Q.TYPE_REWARDED_AD],[o.IMPRESSION_BYO_CTA,Q.TYPE_BYO_CTA],[o.IMPRESSION_SWG_SUBSCRIPTION_MINI_PROMPT,Q.TYPE_SUBSCRIPTION],[o.IMPRESSION_OFFERS,Q.TYPE_SUBSCRIPTION]]),As=[o.EVENT_PAYMENT_FAILED],Cs=[o.ACTION_SWG_BUTTON_SHOW_OFFERS_CLICK,o.ACTION_SWG_BUTTON_SHOW_CONTRIBUTIONS_CLICK];class Ss{constructor(t,e){this.se=t,this.ns=e,this.rs=!1,this.hs=!1,this.ls=null,this.us=!1,this.multiInstanceCtaExperiment=!1,this.alwaysShowBlockingContributionExperiment=!1,this._e=t.doc(),this.ke=t.pageConfig(),this.Ve=t.entitlementsManager(),this.Me=t.clientConfigManager(),st(this.Me,"AutoPromptManager requires an instance of ClientConfigManager."),this.re=t.storage(),t.eventManager().registerEventListener(this.oe.bind(this)),this.ds=new us(t),this.ds.init(),this.ne=t.eventManager()}async showAutoPrompt(t){if(t.autoPromptType===ee.NONE)return;if(this.gs=t.contentType,t.alwaysShow)return this.ps=!0,this.Es=this._s(t.autoPromptType),this.fs=this.gs!=se.CLOSED,this.ws=this.fs,void this.bs()();const[e,s,i]=await Promise.all([this.Me.getClientConfig(),this.Ve.getEntitlements(),this.Ve.getArticle()]);this.Ts(i),this.us=!!(null==i?void 0:i.previewEnabled),this.us?await this.Is(i,t):await this.As(e,s,i,t)}Ts(t){t&&(this.multiInstanceCtaExperiment=this.Cs(t,r.MULTI_INSTANCE_CTA_EXPERIMENT),this.alwaysShowBlockingContributionExperiment=this.Cs(t,r.ALWAYS_SHOW_BLOCKING_CONTRIBUTION_EXPERIMENT))}async Is(t,e){var s,i;const n=null==(s=t.audienceActions)?void 0:s.actions;if(!n||0===n.length)return;this.Es=this.Ss(null==(i=t.audienceActions)?void 0:i.actions,e.autoPromptType),this.fs=this.gs!=se.CLOSED,this.ws=this.fs;const r=n[0];this.Rs(r)()}async As(t,e,s,i){var n,r,o,a,h,l,u,c,d,g;if(this.ps=!1,!s)return;if(!(null==(n=t.uiPredicates)?void 0:n.canDisplayAutoPrompt))return;if(e.enablesThis())return;let p;if(this.Es=this.Ss(null==(r=s.audienceActions)?void 0:r.actions,i.autoPromptType),s.actionOrchestration){const e=await this.ys(t,s);if(e&&(this.fs=this.isOrchestrationClosable(e),p=null==(a=null==(o=s.audienceActions)?void 0:o.actions)?void 0:a.find((t=>t.configurationId===e.configId))),this.Os()||this.vs()){this.ws=this.fs;const t=null==(l=null==(h=s.actionOrchestration.interventionFunnel)?void 0:h.interventions)?void 0:l.find((t=>t.type===Q.TYPE_SUBSCRIPTION||t.type===Q.TYPE_CONTRIBUTION));t&&(this.ws=this.isOrchestrationClosable(t))}}else if(this.gs===se.CLOSED){const t=null==(c=null==(u=s.audienceActions)?void 0:u.actions)?void 0:c.find((t=>t.type===Q.TYPE_SUBSCRIPTION));t&&(this.fs=!1,this.ws=!1,p={type:t.type,configurationId:t.configurationId})}const m=p?this.Rs(p):void 0;if(!m)return;this.hs=!1,this.Pe=null==p?void 0:p.configurationId;const E=this.fs?1e3*((null==(g=null==(d=null==t?void 0:t.autoPromptConfig)?void 0:d.clientDisplayTrigger)?void 0:g.displayDelaySeconds)||0):0;E>0?this.se.win().setTimeout(m,E):m()}isOrchestrationClosable(t){switch(null==t?void 0:t.closability){case St.BLOCKING:return!1;case St.DISMISSIBLE:return!0;default:return this.gs!=se.CLOSED}}vs(){return this.Es===ee.SUBSCRIPTION||this.Es===ee.SUBSCRIPTION_LARGE}Os(){return this.Es===ee.CONTRIBUTION||this.Es===ee.CONTRIBUTION_LARGE}Ns(t){return t===Q.TYPE_SUBSCRIPTION||t===Q.TYPE_CONTRIBUTION}Ss(t=[],e){const s=t.find((t=>t.type===Q.TYPE_CONTRIBUTION||t.type===Q.TYPE_SUBSCRIPTION));if(!s)return;const i=s.type===Q.TYPE_CONTRIBUTION?e===ee.CONTRIBUTION?ee.CONTRIBUTION:ee.CONTRIBUTION_LARGE:e===ee.SUBSCRIPTION?ee.SUBSCRIPTION:ee.SUBSCRIPTION_LARGE;return this._s(i)}async ys(t,e){var s,i,n,r,a;const h=null==(s=e.audienceActions)?void 0:s.actions;let l=null==(n=null==(i=e.actionOrchestration)?void 0:i.interventionFunnel)?void 0:n.interventions;if(!(null==h?void 0:h.length)||!(null==l?void 0:l.length))return;const u=await this.getTimestamps(),c=new Set(h.filter((t=>this.Ps(t,u))).map((t=>t.configurationId)));if(0===c.size)return;const d=new Map(e.audienceActions.actions.filter((t=>!!t.numberOfCompletions)).map((t=>[t.configurationId,t.numberOfCompletions])));return l=l.filter((e=>this.Ls(e,c,d,t))),0!==l.length?this.gs===se.CLOSED?l[0]:function(t,e,s,i,n,r){if(!function(t){var e,s;return yt(null==(e=null==t?void 0:t.globalFrequencyCap)?void 0:e.frequencyCapDuration)||yt(null==(s=null==t?void 0:t.anyPromptFrequencyCap)?void 0:s.frequencyCapDuration)}(r))return t.logSwgEvent(o.EVENT_FREQUENCY_CAP_CONFIG_NOT_FOUND_ERROR),e[0];let a;for(const l of e){const e=Ot(t,r,l);if(!yt(e)||!vt(e,Nt(s,l,i))){a=l;break}t.logSwgEvent(o.EVENT_PROMPT_FREQUENCY_CAP_MET)}if(!a)return;const h=function(t,e){var s;return(null==(s=e.globalFrequencyCap)?void 0:s.duration)||t.globalFrequencyCap.frequencyCapDuration}(r,n);if(!yt(h)||!vt(h,Array.prototype.concat.apply([],Object.entries(s).filter((([t,e])=>!!i||Object.values(Q).includes(t))).map((([t,e])=>i&&t===a.configId||t===a.type?e.completions:e.impressions)))))return a;t.logSwgEvent(o.EVENT_GLOBAL_FREQUENCY_CAP_MET)}(this.ne,l,u,this.multiInstanceCtaExperiment,null==(r=e.actionOrchestration)?void 0:r.interventionFunnel,null==(a=t.autoPromptConfig)?void 0:a.frequencyCapConfig):void 0}ks(t=!0){const e={isClosable:!!this.ws,shouldAnimateFade:t};return this.vs()?()=>{this.ns.showOffers(e)}:this.Os()?()=>{this.ns.showContributionOptions(e)}:void 0}Gs(t,e,s){return()=>{const i=new ls(this.se,{action:t,configurationId:e,preference:s,autoPromptType:this.Es,isClosable:this.fs,calledManually:!1,shouldRenderPreview:!!this.us,onAlternateAction:this.ks(!1)});this.setLastAudienceActionFlow(i),i.start()}}setLastAudienceActionFlow(t){this.ls=t}getLastAudienceActionFlow(){return this.ls}bs(){const t=this.ks();return()=>{this.Es===ee.SUBSCRIPTION||this.Es===ee.CONTRIBUTION?this.ds.create({autoPromptType:this.Es,clickCallback:t}):this.Es!==ee.SUBSCRIPTION_LARGE&&this.Es!==ee.CONTRIBUTION_LARGE||!t||t()}}_s(t){if(this.Ms()>480){if(t===ee.SUBSCRIPTION)return this.Ds(t),ee.SUBSCRIPTION_LARGE;if(t===ee.CONTRIBUTION)return this.Ds(t),ee.CONTRIBUTION_LARGE}return t}Ds(t){this.ne.logEvent({eventType:o.EVENT_DISABLE_MINIPROMPT_DESKTOP,eventOriginator:u.SWG_CLIENT,isFromUserAction:!1,additionalParameters:{publicationid:this.ke.getPublicationId(),promptType:t}})}async oe(t){t.eventType&&(Cs.find((e=>e===t.eventType))&&(this.hs=!0),await this.xs(t.eventType))}async xs(t){if(this.gs!==se.CLOSED&&(Is.has(t)||bs.has(t)||Ts.has(t)||As.find((e=>e===t)))){if(!this.hs&&ws.includes(t)){if(this.rs)return;this.rs=!0}this.storeEvent(t)}}async getTimestamps(){const t=await this.re.get("tsp",!0);if(!t)return{};const e=JSON.parse(t);return this.Us(e)?Object.entries(e).reduce(((t,[e,s])=>({...t,[e]:{impressions:fs(s.impressions),dismissals:fs(s.dismissals),completions:fs(s.completions)}})),{}):(this.ne.logSwgEvent(o.EVENT_LOCAL_STORAGE_TIMESTAMPS_PARSING_ERROR),{})}Us(t){return t instanceof Object&&!(t instanceof Array)&&Object.values(Object.values(t).map((t=>3===Object.keys(t).length&&t.impressions.every((t=>!isNaN(t)))&&t.dismissals.every((t=>!isNaN(t)))&&t.completions.every((t=>!isNaN(t)))))).every(Boolean)}async setTimestamps(t){const e=JSON.stringify(t);this.re.set("tsp",e,!0)}async storeImpression(t){const e=await this.getTimestamps(),s=e[t]||{impressions:[],dismissals:[],completions:[]};if(s.impressions.push(Date.now()),e[t]=s,!this.Fs()&&this.Pe){const t=e[this.Pe]||{impressions:[],dismissals:[],completions:[]};t.impressions.push(Date.now()),e[this.Pe]=t}this.setTimestamps(e)}async storeDismissal(t){const e=await this.getTimestamps(),s=e[t]||{impressions:[],dismissals:[],completions:[]};if(s.dismissals.push(Date.now()),e[t]=s,!this.Fs()&&this.Pe){const t=e[this.Pe]||{impressions:[],dismissals:[],completions:[]};t.dismissals.push(Date.now()),e[this.Pe]=t}this.setTimestamps(e)}async storeCompletion(t){const e=await this.getTimestamps(),s=e[t]||{impressions:[],dismissals:[],completions:[]};if(s.completions.push(Date.now()),e[t]=s,!this.Fs()&&this.Pe){const t=e[this.Pe]||{impressions:[],dismissals:[],completions:[]};t.completions.push(Date.now()),e[this.Pe]=t}this.setTimestamps(e)}async storeEvent(t){let e;Is.has(t)?this.hs||(e=Is.get(t),this.storeImpression(e)):bs.has(t)?(e=bs.get(t),this.storeDismissal(e)):Ts.has(t)?(e=Ts.get(t),this.storeCompletion(e)):As.includes(t)&&(this.Os()&&this.storeCompletion(Q.TYPE_CONTRIBUTION),this.vs()&&this.storeCompletion(Q.TYPE_SUBSCRIPTION))}Ms(){return this._e.getWin().innerWidth}Fs(){return this.ps||this.us}Ps(t,e){var s,i;if(t.type===Q.TYPE_REWARDED_SURVEY)return!!(Pe.isGaEligible(this.se)||Pe.isGtagEligible(this.se)||Pe.isGtmEligible(this.se))&&!((this.multiInstanceCtaExperiment?null==(s=e[t.configurationId])?void 0:s.completions:null==(i=e[Q.TYPE_REWARDED_SURVEY])?void 0:i.completions)||[]).length;if(t.type===Q.TYPE_REWARDED_AD)if(t.preference===le.PREFERENCE_ADSENSE_REWARDED_AD){const t=this.se.win().adsbygoogle;if(!(null==t?void 0:t.loaded))return this.ne.logSwgEvent(o.EVENT_REWARDED_AD_ADSENSE_FILTERED),!1}else{const t=this.se.win().googletag;if(!(null==t?void 0:t.getVersion()))return this.ne.logSwgEvent(o.EVENT_REWARDED_AD_GPT_FILTERED),!1}return!0}Ls(t,e,s,i){var n;const{repeatability:r,closability:a,configId:h}=t;if(!e.has(h))return!1;if((null==r?void 0:r.type)!==Rt.INFINITE){const t=Rt.FINITE===(null==r?void 0:r.type)&&r.count||1;let e;if(s.has(h)?e=s.get(h):(Rt.FINITE===(null==r?void 0:r.type)&&this.ne.logSwgEvent(o.EVENT_COMPLETION_COUNT_FOR_REPEATABLE_ACTION_MISSING_ERROR),e=0),e>=t)return!1}const l=!!(null==(n=null==i?void 0:i.uiPredicates)?void 0:n.purchaseUnavailableRegion)&&this.Ns(t.type),u=a===St.DISMISSIBLE,c=this.gs===se.CLOSED;return!(this.alwaysShowBlockingContributionExperiment?u:u||!c)||!l}Rs(t){return e=t.type,rs.includes(e)&&t.configurationId?this.Gs(t.type,t.configurationId,t.preference):this.bs();var e}Cs(t,e){return this.Ve.parseArticleExperimentConfigFlags(t).includes(e)}}var Rs=(t=>(t.LIGHT="light",t.DARK="dark",t))(Rs||{});class ys{constructor(t,e,s,i){this.se=t,this.Ws=e,this.Bs=s,this.Vs=i,this.ue=Tt("/smartboxiframe"),this.le=t.activities();const n=this.se.clientConfigManager().getLanguage(),r={frameborder:"0",scrolling:"no",title:$t(Ft,n)};this.fe=jt(t.win().document,"iframe",r);const o={publicationId:this.se.pageConfig().getPublicationId(),theme:this.Bs&&this.Bs.theme||"light",lang:this.Bs&&this.Bs.lang||"en"},a=this.Bs&&this.Bs.messageTextColor;a&&(o.messageTextColor=a),this.ce=It(o)}zs(t){var e;t&&t.getIsClicked()&&(null==(e=this.Vs)||e.call(this))}start(){Qt(this.fe,{opacity:"1",position:"absolute",top:"0",bottom:"0",left:"0",height:"100%",right:"0",width:"100%"}),this.Ws.appendChild(this.fe);const t=this.le.addDefaultArguments(this.ce);return this.le.openIframe(this.fe,this.ue,t).then((t=>{t.on(L,this.zs.bind(this))})),this.fe}}var Os=(t=>(t.SUBSCRIPTION="subscription",t.CONTRIBUTION="contribution",t))(Os||{});const vs='<div class="swg-button-v2-icon-$theme$"></div>$textContent$';class Ns{constructor(t,e){this._e=t,this.js=e}init(){const t=this._e.getHead();if(!t)return;const e="".concat(i,"/swg-button.css");t.querySelector('link[href="'.concat(e,'"]'))||t.appendChild(jt(this._e.getWin().document,"link",{rel:"stylesheet",type:"text/css",href:e}))}create(t,e){const s=jt(this._e.getWin().document,"button",{});return this.attach(s,t,e)}attach(t,e,s){const i=this.Ys(t,o.ACTION_SWG_BUTTON_CLICK,e,s).options,n=i.theme;return t.classList.add("swg-button-".concat(n)),t.setAttribute("role","button"),i.lang&&t.setAttribute("lang",i.lang),t.setAttribute("title",$t(Lt,t)),this.Ks(o.IMPRESSION_SWG_BUTTON),t}attachSubscribeButton(t,e,s){const i=this.Ys(t,o.ACTION_SWG_BUTTON_SHOW_OFFERS_CLICK,e,s).options,n=i.theme;return t.classList.add("swg-button-v2-".concat(n)),t.setAttribute("role","button"),i.lang&&t.setAttribute("lang",i.lang),i.enable||t.setAttribute("disabled","disabled"),t.innerHTML=vs.replace("$theme$",n).replace("$textContent$",$t(Lt,t)),this.Ks(o.IMPRESSION_SHOW_OFFERS_SWG_BUTTON),t}attachContributeButton(t,e,s){const i=this.Ys(t,o.ACTION_SWG_BUTTON_SHOW_CONTRIBUTIONS_CLICK,e,s).options,n=i.theme;return t.classList.add("swg-button-v2-".concat(n)),t.setAttribute("role","button"),i.lang&&t.setAttribute("lang",i.lang),i.enable||t.setAttribute("disabled","disabled"),t.innerHTML=vs.replace("$theme$",n).replace("$textContent$",$t(Pt,t)),this.Ks(o.IMPRESSION_SHOW_CONTRIBUTIONS_SWG_BUTTON),t}attachButtonsWithAttribute(t,e,s,i){for(const n of e){const e=Array.from(this._e.getRootNode().querySelectorAll("[".concat(t,'="').concat(n,'"]')));for(const t of e)"subscription"===n?this.attachSubscribeButton(t,s,i[n]):"contribution"===n&&this.attachContributeButton(t,s,i[n])}}async Ks(t,e){(await this.js).eventManager().logSwgEvent(t,e)}qs(t){const e=t&&"function"!=typeof t?t:{theme:Rs.LIGHT},s=e.theme;return s!==Rs.LIGHT&&s!==Rs.DARK&&(e.theme=Rs.LIGHT),e}Hs(t,e){return("function"==typeof t?t:null)||e}Ys(t,e,s,i){const n=this.qs(s),r=this.Hs(s,i),o=t=>{this.Ks(e,!0),"function"==typeof r&&r(t)};return t.addEventListener("click",o),{options:n,clickFun:o}}attachSmartButton(t,e,s,i){const n=this.Ys(e,o.ACTION_SWG_BUTTON_CLICK,s,i);return e.classList.add("swg-smart-button"),new ys(t,e,n.options,n.clickFun).start()}}const Ps=!0;class Ls{constructor(t,e){var s;this.se=t,this.xe=null,this.he=t.win(),this.le=t.activities(),this.Fe=t.dialogManager(),this.ne=t.eventManager(),this.Me=t.clientConfigManager(),this.me=void 0===(null==e?void 0:e.shouldAnimateFade)||(null==e?void 0:e.shouldAnimateFade),this.fs=null!=(s=null==e?void 0:e.isClosable)&&s;const i=t.activities().addDefaultArguments({showNative:t.callbacks().hasSubscribeRequestCallback(),productType:ae.SUBSCRIPTION,list:(null==e?void 0:e.list)||"default",skus:(null==e?void 0:e.skus)||null,isClosable:this.fs});if(null==e?void 0:e.oldSku){i.oldSku=e.oldSku,st(i.skus,"Need a sku list if old sku is provided!");let t=i.skus;const s=i.oldSku;t=t.filter((t=>t!==s)),st(t.length>0,"Sku list only contained offer user already has"),i.skus=t}if(i.skus&&1===i.skus.length){const t=i.skus[0],e=i.oldSku;if(e){const s=new P;return s.setSku(t),s.setOldSku(e),void is(this.se,s)}}this.Js=i.skus||["*"],this.$s=this.Me.getClientConfig(),this.Xs=this.Qs(i)}async Qs(t){const e=await this.$s;return new te(this.he,this.le,ss(e,this.Me,this.se.pageConfig(),this.he.location.hash),t,this.Me.getLanguage(),!0,!1,this.me)}je(t){t.getSubscriberOrMember()&&(this.ne.logSwgEvent(o.ACTION_ALREADY_SUBSCRIBED,!0),this.se.callbacks().triggerLoginRequest({linkRequested:!!t.getLinkRequested()}))}async start(){if(this.xe=await this.Xs,!this.xe)return;this.se.callbacks().triggerFlowStarted(ne.SHOW_OFFERS,{skus:this.Js,source:"SwG"}),this.xe.onCancel((()=>{this.se.callbacks().triggerFlowCanceled(ne.SHOW_OFFERS)})),this.xe.on(P,(t=>is(this.se,t))),this.xe.on(d,this.je.bind(this)),this.xe.on(V,(t=>ns(this.se,t)));const t=await this.$s;return this.Fe.openView(this.xe,!1,this.Zs(t,this.Me.shouldAllowScroll()))}Zs(t,e){return t.useUpdatedOfferFlows?{desktopConfig:{isCenterPositioned:!0,supportsWideScreen:!0},shouldDisableBodyScrolling:!e,closeOnBackgroundClick:this.fs}:{}}showNoEntitlementFoundToast(){this.xe&&this.xe.execute(new I)}}class ks{constructor(t,e){this.se=t,this.Bs=e,this.le=t.activities(),this.Fe=t.dialogManager(),this.ne=t.eventManager(),this.xe=new te(t.win(),this.le,Tt("/optionsiframe"),It({publicationId:t.pageConfig().getPublicationId(),productId:t.pageConfig().getProductId(),list:(null==e?void 0:e.list)||"default",skus:(null==e?void 0:e.skus)||null,isClosable:!0}),this.se.clientConfigManager().getLanguage(),!1)}start(){return this.se.callbacks().triggerFlowStarted(ne.SHOW_SUBSCRIBE_OPTION),this.xe.onCancel((()=>{this.se.callbacks().triggerFlowCanceled(ne.SHOW_SUBSCRIBE_OPTION)})),this.xe.on(k,this.ti.bind(this)),this.xe.acceptResult().then((t=>{const e=t.data,s=new k;e.subscribe&&s.setSubscribe(!0),this.ti(s)}),(t=>{throw this.Fe.completeView(this.xe),t})),this.ne.logSwgEvent(o.IMPRESSION_CLICK_TO_SHOW_OFFERS),this.Fe.openView(this.xe)}ti(t){if(t.getSubscribe()){const t=this.Bs||{};null==t.isClosable&&(t.isClosable=Ps),this.ne.logSwgEvent(o.ACTION_VIEW_OFFERS,!0),new Ls(this.se,t).start()}}}class Gs{constructor(t,e={}){this.se=t,this.Bs=e,this.he=t.win(),this.le=t.activities(),this.Fe=t.dialogManager(),this.ne=t.eventManager(),this.xe=new te(this.he,this.le,Tt("/abbrvofferiframe"),It({publicationId:t.pageConfig().getPublicationId(),productId:t.pageConfig().getProductId(),showNative:t.callbacks().hasSubscribeRequestCallback(),list:e.list||"default",skus:e.skus||null,isClosable:!0}),this.se.clientConfigManager().getLanguage(),!1)}je(t){t.getSubscriberOrMember()&&(this.ne.logSwgEvent(o.ACTION_ALREADY_SUBSCRIBED,!0),this.se.callbacks().triggerLoginRequest({linkRequested:!!t.getLinkRequested()}))}start(){return this.se.callbacks().triggerFlowStarted(ne.SHOW_ABBRV_OFFER),this.xe.onCancel((()=>{this.se.callbacks().triggerFlowCanceled(ne.SHOW_ABBRV_OFFER)})),this.xe.on(d,this.je.bind(this)),this.xe.acceptResult().then((t=>{const e=t.data;return e.viewOffers?(null==this.Bs.isClosable&&(this.Bs.isClosable=Ps),this.ne.logSwgEvent(o.ACTION_VIEW_OFFERS,!0),void new Ls(this.se,this.Bs).start()):e.native?(this.se.callbacks().triggerSubscribeRequest(),void this.Fe.completeView(this.xe)):void 0})),this.ne.logSwgEvent(o.IMPRESSION_CLICK_TO_SHOW_OFFERS_OR_ALREADY_SUBSCRIBED),this.Fe.openView(this.xe)}}function Ms(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ds(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var s=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var i=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(s,e,i.get?i:{enumerable:!0,get:function(){return t[e]}})})),s}
/**
   * @license
   * Copyright 2017 The Web Activities Authors. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */const xs={IFRAME:"iframe",POPUP:"popup",REDIRECT:"redirect"},Us={OK:"ok",CANCELED:"canceled",FAILED:"failed"};class Fs{constructor(t,e,s,i,n,r){this.code=t,this.data=t==Us.OK?e:null,this.mode=s,this.origin=i,this.originVerified=n,this.secureChannel=r,this.ok=t==Us.OK,this.error=t==Us.FAILED?new Error(String(e)||""):null}}const Ws="AbortError";let Bs;function Vs(t){return function(t){if(t.origin)return t.origin;const e=t.protocol;let s=t.host;return"https:"==e&&s.indexOf(":443")==s.length-4?s=s.replace(":443",""):"http:"==e&&s.indexOf(":80")==s.length-3&&(s=s.replace(":80","")),e+"//"+s}(function(t){return Bs||(Bs=document.createElement("a")),Bs.href=t,Bs}(t))}function zs(t,e){const s="AbortError"+(e?": "+e:"");let i=null;if("function"==typeof t.DOMException){const e=t.DOMException;try{i=new e(s,Ws)}catch(n){}}return i||(i=new Error(s),i.name=Ws,i.code=20),i}function js(t,e,s){if(e.ok)s(e);else{const i=e.error||zs(t);i.activityResult=e,s(Promise.reject(i))}}function Ys(t){const e=t.navigator;return/Trident|MSIE|IEMobile/i.test(e&&e.userAgent)}function Ks(t){const e=t.navigator;return/Edge/i.test(e&&e.userAgent)}const qs="__ACTIVITIES__";class Hs{constructor(t,e,s,i){this.he=t,this.ei=e,this.si=s,this.ii=i,this.ni=null,this.ri=!1,this.Ee=null,this.oi=null,this.ai=null,this.li=null,this.ui=this.ci.bind(this)}connect(t){if(this.oi)throw new Error("already connected");this.oi=t,this.he.addEventListener("message",this.ui)}disconnect(){if(this.oi&&(this.oi=null,this.Ee&&(Js(this.Ee),this.Ee=null),this.he.removeEventListener("message",this.ui),this.li)){for(const t in this.li){const e=this.li[t];e.port1&&Js(e.port1),e.port2&&Js(e.port2)}this.li=null}}isConnected(){return null!=this.si}getTarget(){const t=this.di();if(!t)throw new Error("not connected");return t}di(){return this.oi&&!this.ni&&("function"==typeof this.ei?this.ni=this.ei():this.ni=this.ei),this.ni}getTargetOrigin(){if(null==this.si)throw new Error("not connected");return this.si}sendConnectCommand(){const t=Ys(this.he)||Ks(this.he);this.sendCommand("connect",{acceptsChannel:t})}sendStartCommand(t){let e=null;this.ri&&"function"==typeof this.he.MessageChannel&&(e=new this.he.MessageChannel),e?(this.sendCommand("start",t,[e.port2]),this.gi(e.port1)):this.sendCommand("start",t)}sendCommand(t,e,s){const i={sentinel:qs,cmd:t,payload:e||null};if(this.Ee)this.Ee.postMessage(i,s||void 0);else{const e=this.getTarget(),n="connect"==t?null!=this.si?this.si:"*":this.getTargetOrigin();e.postMessage(i,n,s||void 0)}}customMessage(t){this.sendCommand("msg",t)}onCustomMessage(t){this.ai=t}startChannel(t){const e=t||"",s=this.pi(e);if(!s.port1){const t=new this.he.MessageChannel;s.port1=t.port1,s.port2=t.port2,s.resolver(s.port1)}return s.port2&&(this.sendCommand("cnset",{name:e},[s.port2]),s.port2=null),s.promise}askChannel(t){const e=t||"",s=this.pi(e);return s.port1||this.sendCommand("cnget",{name:e}),s.promise}mi(t,e){const s=this.pi(t);s.port1=e,s.resolver(e)}pi(t){this.li||(this.li={});let e=this.li[t];if(!e){let s;const i=new Promise((t=>{s=t}));e={port1:null,port2:null,resolver:s,promise:i},this.li[t]=e}return e}gi(t){this.Ee&&Js(this.Ee),this.Ee=t,this.Ee.onmessage=t=>{const e=t.data,s=e&&e.cmd,i=e&&e.payload||null;s&&this.Ei(s,i,t)}}ci(t){if(this.ii&&this.di()!=t.source)return;const e=t.data;if(!e||e.sentinel!=qs)return;const s=e.cmd;if(this.Ee&&"connect"!=s&&"start"!=s)return;const i=t.origin,n=e.payload||null;null==this.si&&"start"==s&&(this.si=i),null==this.si&&t.source&&this.di()==t.source&&(this.si=i),i==this.si&&this.Ei(s,n,t)}Ei(t,e,s){if("connect"==t)this.Ee&&(Js(this.Ee),this.Ee=null),this.ri=e&&e.acceptsChannel||!1,this.oi(t,e);else if("start"==t){const i=s.ports&&s.ports[0];i&&this.gi(i),this.oi(t,e)}else if("msg"==t)null!=this.ai&&null!=e&&this.ai(e);else if("cnget"==t){const t=e.name;this.startChannel(t)}else if("cnset"==t){const t=e.name,i=s.ports[0];this.mi(t,i)}else this.oi(t,e)}}function Js(t){try{t.close()}catch(e){}}let $s=class{constructor(t,e,s){this.fe=t,this.R=e,this.ce=s||null,this.he=this.fe.ownerDocument.defaultView,this.si=Vs(e),this._i=!1,this.fi=null,this.wi=new Promise((t=>{this.fi=t})),this.bi=null,this.Ue=new Promise((t=>{this.bi=t})),this.Ti=null,this.Ii=new Promise((t=>{this.Ti=t})),this.Ai=null,this.Ci=null,this.Si=new Hs(this.he,(()=>this.fe.contentWindow),this.si,!0)}getMode(){return xs.IFRAME}connect(){if(!function(t){if("isConnected"in t)return t.isConnected;const e=t.ownerDocument&&t.ownerDocument.documentElement;return e&&e.contains(t)||!1}(this.fe))throw new Error("iframe must be in DOM");return this.Si.connect(this.Ei.bind(this)),this.fe.src=this.R,this.wi}disconnect(){this._i=!1,this.Si.disconnect()}acceptResult(){return this.Ii}getTargetWin(){return this.fe.contentWindow||null}message(t){this.Si.customMessage(t)}onMessage(t){this.Si.onCustomMessage(t)}messageChannel(t){return this.Si.askChannel(t)}whenReady(){return this.Ue}onResizeRequest(t){this.Ai=t,Promise.resolve().then((()=>{null!=this.Ci&&t(this.Ci)}))}resized(){if(!this._i)return;const t=this.fe.offsetHeight;this.Si.sendCommand("resized",{height:t})}Ei(t,e){if("connect"==t)this._i=!0,this.Si.sendStartCommand(this.ce),this.fi();else if("result"==t){if(this.Ti){const t=e.code,s=t==Us.FAILED?new Error(e.data||""):e.data,i=new Fs(t,s,xs.IFRAME,this.Si.getTargetOrigin(),!0,!0);js(this.he,i,this.Ti),this.Ti=null,this.Si.sendCommand("close"),this.disconnect()}}else"ready"==t?this.bi&&(this.bi(),this.bi=null):"resize"==t&&(this.Ci=e.height,this.Ai&&this.Ai(this.Ci))}};class Xs{constructor(t,e,s,i,n,r){if(!i||"_blank"!=i&&"_top"!=i&&"_"==i[0])throw new Error('The only allowed targets are "_blank", "_top" and name targets');this.he=t,this.Ri=e,this.R=s,this.yi=i,this.ce=n||null,this.Bs=r||{},this.fi=null,this.wi=new Promise((t=>{this.fi=t})),this.Ti=null,this.Ii=new Promise((t=>{this.Ti=t})),this.Oi=null,this.Ni=null,this.Si=null}getMode(){return"_top"==this.yi?xs.REDIRECT:xs.POPUP}open(){return this.Pi()}whenConnected(){return this.wi}disconnect(){if(this.Ni&&(this.he.clearInterval(this.Ni),this.Ni=null),this.Si&&(this.Si.disconnect(),this.Si=null),this.Oi){try{this.Oi.close()}catch(t){}this.Oi=null}this.Ti=null}getTargetWin(){return this.Oi}acceptResult(){return this.Ii}message(t){this.Si.customMessage(t)}onMessage(t){this.Si.onCustomMessage(t)}messageChannel(t){return this.Si.askChannel(t)}Pi(){const t=this.Li();let e,s=this.R;if(!this.Bs.skipRequestInUrl){const t=this.Bs.returnUrl||function(t){const e=t.indexOf("#");return-1==e?t:t.substring(0,e)}(this.he.location.href);s=function(t,e,s){return t+(-1==t.indexOf("#")?"#":"&")+encodeURIComponent("__WA__")+"="+encodeURIComponent(s)}(s,0,function(t){const e={requestId:t.requestId,returnUrl:t.returnUrl,args:t.args};return void 0!==t.origin&&(e.origin=t.origin),void 0!==t.originVerified&&(e.originVerified=t.originVerified),JSON.stringify(e)}({requestId:this.Ri,returnUrl:t,args:this.ce}))}let i=this.yi;"_top"!=i&&Ys(this.he)&&(i="_top");try{e=this.he.open(s,i,t)}catch(n){}if(!e&&"_top"!=i&&!this.Bs.disableRedirectFallback){i="_top";try{e=this.he.open(s,i)}catch(n){}}return e?(this.Oi=e,"_top"!=i&&this.ki()):this.Gi(new Error("failed to open window")),this.Ii.catch((()=>{}))}Li(){const t=this.he.screen,e=t.availWidth||t.width,s=t.availHeight||t.height,i=this.Mi(),n=Ks(this.he),r=i&&this.he.outerWidth>this.he.innerWidth?Math.min(100,this.he.outerWidth-this.he.innerWidth):n?100:0,o=i&&this.he.outerHeight>this.he.innerHeight?Math.min(100,this.he.outerHeight-this.he.innerHeight):n?100:0,a=Math.max(e-r,.5*e),h=Math.max(s-o,.5*s);let l=Math.floor(Math.min(600,.9*a)),u=Math.floor(Math.min(600,.9*h));this.Bs.width&&(l=Math.min(this.Bs.width,a)),this.Bs.height&&(u=Math.min(this.Bs.height,h));const c=Math.floor((t.width-l)/2),d=Math.floor((t.height-u)/2),g={height:u,width:l,resizable:"yes",scrollbars:"yes"};n||(g.left=c,g.top=d);let p="";for(const m in g)p&&(p+=","),p+="".concat(m,"=").concat(g[m]);return p}Mi(){return this.he==this.he.top}ki(){this.Ni=this.he.setInterval((()=>{this.Di(!0)}),500),this.Si=new Hs(this.he,this.Oi,null,!0),this.Si.connect(this.Ei.bind(this))}Di(t){this.Oi&&!this.Oi.closed||(this.Ni&&(this.he.clearInterval(this.Ni),this.Ni=null),this.he.setTimeout((()=>{try{this.xi(Us.CANCELED,null)}catch(t){this.Gi(t)}}),t?3e3:0))}Gi(t){this.Ti&&this.Ti(Promise.reject(t)),this.disconnect()}xi(t,e){if(this.Ti){const s=this.Si.isConnected(),i=new Fs(t,e,xs.POPUP,s?this.Si.getTargetOrigin():Vs(this.R),s,s);js(this.he,i,this.Ti),this.Ti=null}this.Si&&this.Si.sendCommand("close"),this.disconnect()}Ei(t,e){if("connect"==t)this.Si.sendStartCommand(this.ce),this.fi();else if("result"==t){const t=e.code,s=t==Us.FAILED?new Error(e.data||""):e.data;this.xi(t,s)}else"check"==t&&this.he.setTimeout((()=>this.Di()),200)}}class Qs{constructor(t,e,s,i,n){this.he=t,this.Ui=e,this.Fi=s,this.si=i,this.Wi=n}getMode(){return xs.REDIRECT}acceptResult(){const t=new Fs(this.Ui,this.Fi,xs.REDIRECT,this.si,this.Wi,!1);return new Promise((e=>{js(this.he,t,e)}))}}var Zs={ActivityPorts:class{constructor(t){this.version="1.24",this.he=t,this.Bi=t.location.hash,this.Vi={},this.zi={},this.ji=null,this.Yi=new Promise((t=>{this.ji=t}))}openIframe(t,e,s){const i=new $s(t,e,s);return i.connect().then((()=>i))}open(t,e,s,i,n){return{targetWin:this.Ki(t,e,s,i,n).getTargetWin()}}openWithMessaging(t,e,s,i,n){const r=this.Ki(t,e,s,i,n);return r.whenConnected().then((()=>r))}onResult(t,e){let s=this.Vi[t];s||(s=[],this.Vi[t]=s),s.push(e);const i=this.qi(t);i&&this.Hi(i,e)}onRedirectError(t){this.Yi.then(t)}Ki(t,e,s,i,n){const r=new Xs(this.he,t,e,s,i,n);return r.open().then((()=>{this.Ji(t,r)})),r}qi(t){let e=this.zi[t];if(!e&&this.Bi){try{e=function(t,e,s){const i="__WA_RES__",n=(r=i,(o=e,o?(/^[?#]/.test(o)?o.slice(1):o).split("&").reduce(((t,e)=>{const s=e.split("="),i=decodeURIComponent(s[0]||""),n=decodeURIComponent(s[1]||"");return i&&(t[i]=n),t}),{}):{})[r]);var r,o;if(!n)return null;const a=JSON.parse(n);if(!a||a.requestId!=s)return null;const h=function(t,e){if(!t)return t;const s=encodeURIComponent(e)+"=";let i=-1;do{if(i=t.indexOf(s,i),-1!=i){const e=i>0?t.substring(i-1,i):"";if(""==e||"?"==e||"#"==e||"&"==e){let e=t.indexOf("&",i+1);-1==e&&(e=t.length),t=t.substring(0,i)+t.substring(e+1)}else i++}}while(-1!=i&&i<t.length);return t}(t.location.hash,i)||"";if(h!=t.location.hash&&t.history&&t.history.replaceState)try{t.history.replaceState(t.history.state,"",h)}catch(g){}const l=a.code,u=a.data,c=a.origin,d=t.document.referrer&&Vs(t.document.referrer);return new Qs(t,l,u,c,c==d)}(this.he,this.Bi,t)}catch(s){!function(t){setTimeout((()=>{throw t}))}(s),this.ji(s)}e&&(this.zi[t]=e)}return e}Hi(t,e){Promise.resolve().then((()=>{e(t)}))}Ji(t,e){const s=this.Vi[t];s&&s.forEach((t=>{this.Hi(e,t)})),this.zi[t]=e}},ActivityIframePort:$s,ActivityMessagingPort:class{getTargetWin(){}message(t){}onMessage(t){}messageChannel(t){}},ActivityMode:xs,ActivityOpenOptions:void 0,ActivityPort:class{getMode(){}acceptResult(){}},ActivityRequest:void 0,ActivityResult:Fs,ActivityResultCode:Us,ActivityWindowPort:Xs,createAbortError:zs,isAbortError:function(t){return!(!t||"object"!=typeof t)&&t.name===Ws}};const ti=t({__proto__:null,default:Ms(Zs)},[Zs]);class ei{constructor(t){this.Ee=t}acceptResult(){return this.Ee.acceptResult()}}let si=class{constructor(t,e,s,i){this.se=s,this.$i=new Zs.ActivityIframePort(t,e,i),this.Xi={}}whenReady(){return this.$i.whenReady()}async connect(){await this.$i.connect(),this.$i.onMessage((t=>{const e=null==t?void 0:t.RESPONSE;if(!e)return;const s=this.Xi[e[0]];if(s){const t=function(t){const e=t?t[0]:null;if(e){const s=z[e];if(s)return new s(t)}throw new Error("Deserialization failed for ".concat(t))}(e);s(t)}})),this.se&&this.se.eventManager()&&this.on(m,(t=>{var e,s;this.se.eventManager().logEvent({eventType:t.getEvent(),eventOriginator:u.SWG_SERVER,isFromUserAction:null==(e=t.getMeta())?void 0:e.getIsFromUserAction(),additionalParameters:t.getParams(),configurationId:null==(s=t.getMeta())?void 0:s.getConfigurationId()})}))}disconnect(){this.$i.disconnect()}getMode(){return this.$i.getMode()}acceptResult(){return this.$i.acceptResult()}onResizeRequest(t){return this.$i.onResizeRequest(t)}execute(t){this.$i.message({REQUEST:t.toArray()})}on(t,e){let s=null;try{s=t.prototype.label()}catch{s=null}if(!s)throw new Error("Invalid data type");if(this.Xi[s])throw new Error("Invalid type or duplicate callback for "+s);this.Xi[s]=e}resized(){this.$i.resized()}},ii=class{constructor(t){this.se=t,this.le=new Zs.ActivityPorts(t.win())}addDefaultArguments(t){const e=this.se,i=e.pageConfig(),n=e.analytics().getContext();return Object.assign({analyticsContext:n.toArray(),publicationId:i.getPublicationId(),productId:i.getProductId(),_client:"SwG ".concat(s),supportsEventManager:!0},t||{})}async Qi(t,e,s){const i=new si(t,e,this.se,s);return await i.connect(),i}async openIframe(t,e,s,i=!1){i&&(s=this.addDefaultArguments(s));const n=await this.se.storage().get(Y,!0),r=new URL(e).searchParams;n&&!r.has("sut")&&(e=ht(e,"sut",n));const o=this.se.pageConfig().getPublicationId();return o&&!r.has("publicationId")&&(e=ht(e,"publicationId",o)),this.Qi(t,e,s)}open(t,e,s,i,n,r=!1){return r&&(i=this.addDefaultArguments(i)),this.le.open(t,e,s,i,n)}onResult(t,e){this.le.onResult(t,(t=>{e(new ei(t))}))}onRedirectError(t){this.le.onRedirectError(t)}getOriginalWebActivityPorts(){return this.le}};var ni=(t=>(t[t.PROCESS_EVENT=0]="PROCESS_EVENT",t[t.CANCEL_EVENT=1]="CANCEL_EVENT",t))(ni||{});function ri(t,e){return"Event has an invalid "+t+"("+e+")"}class oi{constructor(t){this.Zi=t,this.sn=[],this.nn=[],this.lastAction=null}static isPublisherEvent(t){return t.eventOriginator===u.PROPENSITY_CLIENT||t.eventOriginator===u.PUBLISHER_CLIENT}registerEventListener(t){if(!Oe(t))throw new Error("Event manager listeners must be a function");this.sn.push(t)}registerEventFilterer(t){if(!Oe(t))throw new Error("Event manager filterers must be a function");this.nn.push(t)}logEvent(t,e,s){!function(t){if(!Re(t))throw new Error("Event must be a valid object");if(!ye(o,t.eventType))throw new Error(ri("eventType",t.eventType));if(!ye(u,t.eventOriginator))throw new Error(ri("eventOriginator",t.eventOriginator));if(!Re(t.additionalParameters)&&null!=t.additionalParameters)throw new Error(ri("additionalParameters",t.additionalParameters));if(null!=t.isFromUserAction&&!ve(t.isFromUserAction))throw new Error(ri("isFromUserAction",t.isFromUserAction))}(t),t.timestamp=null!=s?s:Date.now(),this.lastAction=this.ci(t,e)}async ci(t,e){await this.Zi;for(const i of this.nn)try{if(i(t)===ni.CANCEL_EVENT)return}catch(s){tt(s)}for(const i of this.sn)try{i(t,e)}catch(s){tt(s)}}logSwgEvent(t,e=!1,s=null,i,n=null){this.logEvent({eventType:t,eventOriginator:u.SWG_CLIENT,isFromUserAction:e,additionalParameters:s,configurationId:n},void 0,i)}getReadyPromise(){return this.Zi}}const ai="0123456789ABCDEF";function hi(t){return new W([Math.floor(t/1e3),t%1e3*1e6],!1)}const li={opacity:"0",position:"absolute",top:"-10px",left:"-10px",height:"1px",width:"1px"},ui="AnalyticsService timed out waiting for a response";function ci(t){const e=new C;return e.setComplete(!1),e.setError(t),e}class di{constructor(t){var e;this.se=t,this.W=new g,this.rn=!1,this.an=!1,this.hn=null,this.ln=[],this.we=null,this.un=null,this.cn=!1,this.dn=null,this.gn=0,this.lastAction=null,this.k=hi(t.creationTimestamp()),this._e=t.doc(),this.le=t.activities(),this.fe=jt(this._e.getWin().document,"iframe",{title:"Subscribe with Google Service"}),Qt(this.fe,li),null==(e=this._e.getBody())||e.appendChild(this.getElement()),this.mn(),this.ne=t.eventManager(),this.ne.registerEventListener(this.oe.bind(this))}setReadyForLogging(){this.cn=!0;for(const t of this.ln)this.oe(t)}setTransactionId(t){const e=this.W.getTransactionId();if(this.W.setTransactionId(t),null!=e&&e!=t){const t=o.EVENT_NEW_TX_ID,s=new A;s.setOldTransactionId(e),this.ne.logSwgEvent(t,!0,s)}}getTransactionId(){return this.W.getTransactionId()}getSku(){return this.W.getSku()}setSku(t){this.W.setSku(t)}setUrl(t){this.W.setUrl(t)}addLabels(t){if(t&&t.length>0){const e=[].concat(this.W.getLabelList());for(const s of t)-1==e.indexOf(s)&&e.push(s);this.W.setLabelList(e)}}removeLabels(t){if(t&&t.length>0){const e=[].concat(this.W.getLabelList());for(const s of t){const t=e.indexOf(s);t>-1&&e.splice(t,1)}this.W.setLabelList(e)}}getElement(){return this.fe}En(){return this._e.getWin().location.search}_n(){return this._e.getWin().document.referrer}fn(){const t=this.wn();if(t&&t.length){const e=t[0],s=e.loadEventStart-e.unloadEventEnd;if(s>0)return s}return 0}wn(){return performance.getEntriesByType("navigation")}mn(){const t=this.W;t.setTransactionId(function(){let t=function(){const t=Date.now().toString(16);return t.substring(t.length-8).toUpperCase()}()+"-",e=0;const s=function(){const t=new Uint8Array(23);self.crypto.getRandomValues(t);for(let e=t.length-1;e>-1;e--)t[e]=t[e]%16;return t}();for(let n=9;n<36;n++)switch(n){case 13:case 18:case 23:t+="-";break;case 14:t+="4";break;case 19:t+=(i=s[e++],ai[3&i|8]);break;default:t+=ai[s[e++]]}var i;return t}()+".swg"),t.setReferringOrigin(ot(this._n()).origin),t.setClientVersion("SwG ".concat(s)),t.setUrl(ct(this._e)),t.setIsLockedContent(this.se.pageConfig().isLocked()),t.setUrlFromMarkup(ut(this._e)||"");const e=at(this.En()),i=e.utm_campaign,n=e.utm_medium,r=e.utm_source;i&&t.setUtmCampaign(i),n&&t.setUtmMedium(n),r&&t.setUtmSource(r)}start(){return this.we||(this.addLabels(ms(this._e.getWin())),this.we=this.preparePort()),this.we}async preparePort(){let t;try{t=await this.le.openIframe(this.fe,Tt("/serviceiframe"),null,!0)}catch(e){return this.an=!0,this.Tn(ci("Could not connect ["+e+"]")),null}return t.on(C,this.Tn.bind(this)),await t.whenReady(),this.addLabels(ms(this._e.getWin())),t}setReadyToPay(t){this.W.setReadyToPay(t)}close(){var t;null==(t=this._e.getBody())||t.removeChild(this.getElement())}getContext(){return this.W}ae(t){const e=new p;e.setEventOriginator(t.eventOriginator),e.setIsFromUserAction(!!t.isFromUserAction),t.configurationId&&e.setConfigurationId(t.configurationId),this.W.setClientTimestamp(hi(t.timestamp));const s=this.fn();var i;s>0&&this.W.setLoadEventStartDelay((i=s,new w([Math.floor(i/1e3),i%1e3*1e6],!1))),this.W.setRuntimeCreationTimestamp(this.k);const n=new m;return n.setEvent(t.eventType),n.setContext(this.W),n.setMeta(e),t.additionalParameters instanceof A&&n.setParams(t.additionalParameters),n}In(){return!0===this.se.config().enableSwgAnalytics}oe(t){t.eventType!==o.EVENT_SUBSCRIPTION_STATE&&t.eventOriginator!==u.SHOWCASE_CLIENT&&(oi.isPublisherEvent(t)&&!this.In()||(this.cn?(this.gn++,this.lastAction=this.An(t)):this.ln.push(t)))}async An(t){const e=await this.start(),s=this.ae(t);null==e||e.execute(s)}Tn(t){const e=(null==t?void 0:t.getComplete())||!1,s=(null==t?void 0:t.getError())||"Unknown logging Error",i=s===ui;e||tt("Error when logging: "+s),this.gn--,i||(this.rn=!0),null!==this.hn&&(0===this.gn||this.an||i)&&(null!==this.dn&&(clearTimeout(this.dn),this.dn=null),this.hn(e),this.un=null,this.hn=null)}getLoggingPromise(){return 0===this.gn||this.an?Promise.resolve(!0):(null===this.un&&(this.un=new Promise((t=>{this.hn=t})),this.dn=self.setTimeout((()=>{this.dn=null,this.Tn(ci(ui))}),this.rn?200:500)),this.un)}}class gi{constructor(){this.Cn={},this.zi={},this.Sn=null}setOnEntitlementsResponse(t){this.Rn(1,t)}triggerEntitlementsResponse(t){return this.yn(1,t.then((t=>t.clone())))}hasEntitlementsResponsePending(){return!!this.zi[1]}setOnLoginRequest(t){this.Rn(4,t)}triggerLoginRequest(t){return this.yn(4,t)}setOnLinkProgress(t){this.Rn(5,t)}triggerLinkProgress(){return this.yn(5,!0)}resetLinkProgress(){this.On(5)}setOnLinkComplete(t){this.Rn(6,t)}triggerLinkComplete(){return this.yn(6,!0)}hasLinkCompletePending(){return!!this.zi[6]}setOnPayConfirmOpened(t){this.Rn(9,t)}triggerPayConfirmOpened(t){return this.yn(9,t)}setOnSubscribeRequest(t){this.Rn(2,t)}triggerSubscribeRequest(){return this.yn(2,!0)}hasSubscribeRequestCallback(){return!!this.Cn[2]}setOnOffersFlowRequest(t){this.Rn(10,t)}triggerOffersFlowRequest(){return this.yn(10,!0)}hasOffersFlowRequestCallback(){return!!this.Cn[10]}setOnSubscribeResponse(t){et("[swg.js:setOnSubscribeResponse]: This method has been deprecated, please switch usages to 'setOnPaymentResponse'"),this.Rn(3,t)}setOnContributionResponse(t){et("[swg.js:setOnContributionResponse]: This method has been deprecated, please switch usages to 'setOnPaymentResponse'"),this.Rn(3,t)}setOnPaymentResponse(t){this.Rn(3,t)}triggerPaymentResponse(t){return this.Sn=t.then((t=>{this.yn(3,Promise.resolve(t.clone()))}),(t=>{if(!qt(t))throw t})),!!this.Cn[3]}hasPaymentResponsePending(){return!!this.zi[3]}setOnFlowStarted(t){this.Rn(7,t)}triggerFlowStarted(t,e={}){return this.yn(7,{flow:t,data:e})}setOnFlowCanceled(t){this.Rn(8,t)}triggerFlowCanceled(t,e={}){return this.yn(8,{flow:t,data:e})}Rn(t,e){this.Cn[t]&&et("[swg.js]: You have registered multiple callbacks for the same response."),this.Cn[t]=e,t in this.zi&&this.vn(t,e,this.zi[t])}yn(t,e){this.zi[t]=e;const s=this.Cn[t];return s&&this.vn(t,s,e),!!s}On(t){t in this.zi&&delete this.zi[t]}async vn(t,e,s){await 0,e(s),this.On(t)}}class pi{constructor(t,e){this.displayName=t,this.avatarUrl=e}}class mi{constructor({displayDelaySeconds:t,numImpressionsBetweenPrompts:e,dismissalBackOffSeconds:s,maxDismissalsPerWeek:i,maxDismissalsResultingHideSeconds:n,impressionBackOffSeconds:r,maxImpressions:o,maxImpressionsResultingHideSeconds:a,globalFrequencyCapDurationSeconds:h,globalFrequencyCapDurationNano:l,anyPromptFrequencyCapDurationSeconds:u,anyPromptFrequencyCapDurationNano:c}){this.clientDisplayTrigger=new Ei(t,e),this.explicitDismissalConfig=new _i(s,i,n),this.impressionConfig=new fi(r,o,a),this.frequencyCapConfig=new wi(new bi(new Ii(h,l)),new Ti(new Ii(u,c)))}}class Ei{constructor(t,e){this.displayDelaySeconds=t,this.numImpressionsBetweenPrompts=e}}class _i{constructor(t,e,s){this.backOffSeconds=t,this.maxDismissalsPerWeek=e,this.maxDismissalsResultingHideSeconds=s}}class fi{constructor(t,e,s){this.backOffSeconds=t,this.maxImpressions=e,this.maxImpressionsResultingHideSeconds=s}}class wi{constructor(t,e){this.globalFrequencyCap=t,this.anyPromptFrequencyCap=e}}class bi{constructor(t){this.frequencyCapDuration=t}}class Ti{constructor(t){this.frequencyCapDuration=t}}class Ii{constructor(t,e){this.seconds=t,this.nanos=e}}class Ai{constructor({attributionParams:t,autoPromptConfig:e,paySwgVersion:s,uiPredicates:i,useUpdatedOfferFlows:n,skipAccountCreationScreen:r}){this.autoPromptConfig=e,this.paySwgVersion=s,this.useUpdatedOfferFlows=n||!1,this.skipAccountCreationScreen=r||!1,this.uiPredicates=i,this.attributionParams=t}}class Ci{constructor(t,e,s){this.canDisplayAutoPrompt=t,this.canDisplayButton=e,this.purchaseUnavailableRegion=s}}class Si{constructor(t,e,s,i={}){this.se=t,this.Nn=e,this.ie=s,this.Pn=i,this.Ln=null}fetchClientConfig(t){if(!this.Nn)throw new Error("fetchClientConfig requires publicationId");return this.Ln||(t=t||Promise.resolve(),this.Ln=t.then((()=>this.Gn()))),this.Ln}getClientConfig(){return this.Ln||this.Mn()}async Mn(){return new Ai({paySwgVersion:this.se.config().paySwgVersion,skipAccountCreationScreen:this.Pn.skipAccountCreationScreen,useUpdatedOfferFlows:!!this.se.config().paySwgVersion||void 0})}async getAutoPromptConfig(){this.Ln||this.fetchClientConfig();const t=await this.Ln;return null==t?void 0:t.autoPromptConfig}getLanguage(){return this.Pn.lang||"en"}getTheme(){const t=self.matchMedia("(prefers-color-scheme: dark)").matches?he.DARK:he.LIGHT;return this.Pn.theme||t}shouldAllowScroll(){return!!this.Pn.allowScroll}shouldForceLangInIframes(){return!!this.Pn.forceLangInIframes&&!!this.Pn.lang}async shouldEnableButton(){var t;if(this.Pn.disableButton)return Promise.resolve(!1);this.Ln||this.fetchClientConfig();const e=await this.Ln;return null==(t=null==e?void 0:e.uiPredicates)?void 0:t.canDisplayButton}async Gn(){const t=await this.se.entitlementsManager().getArticle();if(t)return this.Dn(t.clientConfig);const e=wt("/publication/"+encodeURIComponent(this.Nn)+"/clientconfiguration"),s=await this.ie.fetchCredentialedJson(e);return this.Dn(s)}Dn(t){var e,s,i,n,r,o,a,h,l,u,c,d,g,p,m,E,_,f,w;const b=t.autoPromptConfig;let T;b&&(T=new mi({displayDelaySeconds:null==(e=b.clientDisplayTrigger)?void 0:e.displayDelaySeconds,dismissalBackOffSeconds:null==(s=b.explicitDismissalConfig)?void 0:s.backOffSeconds,maxDismissalsPerWeek:null==(i=b.explicitDismissalConfig)?void 0:i.maxDismissalsPerWeek,maxDismissalsResultingHideSeconds:null==(n=b.explicitDismissalConfig)?void 0:n.maxDismissalsResultingHideSeconds,impressionBackOffSeconds:null==(r=b.impressionConfig)?void 0:r.backOffSeconds,maxImpressions:null==(o=b.impressionConfig)?void 0:o.maxImpressions,maxImpressionsResultingHideSeconds:null==(a=b.impressionConfig)?void 0:a.maxImpressionsResultingHideSeconds,globalFrequencyCapDurationSeconds:null==(u=null==(l=null==(h=b.frequencyCapConfig)?void 0:h.globalFrequencyCap)?void 0:l.frequencyCapDuration)?void 0:u.seconds,globalFrequencyCapDurationNano:null==(g=null==(d=null==(c=b.frequencyCapConfig)?void 0:c.globalFrequencyCap)?void 0:d.frequencyCapDuration)?void 0:g.nano,anyPromptFrequencyCapDurationSeconds:null==(E=null==(m=null==(p=b.frequencyCapConfig)?void 0:p.anyPromptFrequencyCap)?void 0:m.frequencyCapDuration)?void 0:E.seconds,anyPromptFrequencyCapDurationNano:null==(w=null==(f=null==(_=b.frequencyCapConfig)?void 0:_.anyPromptFrequencyCap)?void 0:f.frequencyCapDuration)?void 0:w.nano}));const I=t.uiPredicates;let A;I&&(A=new Ci(I.canDisplayAutoPrompt,I.canDisplayButton,I.purchaseUnavailableRegion));const C=t.attributionParams;let S;C&&(S=new pi(C.displayName,C.avatarUrl));const R=this.se.config().paySwgVersion||t.paySwgVersion,y=!!this.se.config().paySwgVersion||t.useUpdatedOfferFlows;return new Ai({autoPromptConfig:T,paySwgVersion:R,useUpdatedOfferFlows:y,skipAccountCreationScreen:this.Pn.skipAccountCreationScreen,uiPredicates:A,attributionParams:S})}}class Ri{constructor(t,e){var s,i,n,r;this.se=t,this.Bs=e,this.he=t.win(),this.Me=t.clientConfigManager(),this.le=t.activities(),this.Fe=t.dialogManager(),this.fs=null==(i=null==(s=this.Bs)?void 0:s.isClosable)||i,this.Xs=this.xn(),this.me=void 0===(null==(n=this.Bs)?void 0:n.shouldAnimateFade)||(null==(r=this.Bs)?void 0:r.shouldAnimateFade)}async xn(){var t,e;const s=await this.Me.getClientConfig();return new te(this.he,this.le,ts(s,this.Me,this.se.pageConfig()),It({productId:this.se.pageConfig().getProductId(),publicationId:this.se.pageConfig().getPublicationId(),productType:ae.UI_CONTRIBUTION,list:(null==(t=this.Bs)?void 0:t.list)||"default",skus:(null==(e=this.Bs)?void 0:e.skus)||null,isClosable:this.fs,supportsEventManager:!0}),this.Me.getLanguage(),!0,!1,this.me)}je(t){t.getSubscriberOrMember()&&this.se.callbacks().triggerLoginRequest({linkRequested:!!t.getLinkRequested()})}async start(){const t=await this.Xs;this.se.callbacks().triggerFlowStarted(ne.SHOW_CONTRIBUTION_OPTIONS),t.onCancel((()=>{this.se.callbacks().triggerFlowCanceled(ne.SHOW_CONTRIBUTION_OPTIONS)})),t.on(d,this.je.bind(this)),t.on(P,(t=>es(this.se,t)));const e=await this.Me.getClientConfig();return this.Fe.openView(t,!1,this.Zs(e,this.Me.shouldAllowScroll()))}Zs(t,e){return t.useUpdatedOfferFlows&&!e?{shouldDisableBodyScrolling:!0,closeOnBackgroundClick:this.fs}:{}}async showNoEntitlementFoundToast(){(await this.Xs).execute(new I)}}const yi=String.raw,Oi=yi(_a||(_a=__template(["\n  body {\n    padding: 0;\n    margin: 0;\n  }\n\n  swg-container,\n  swg-loading,\n  swg-loading-animate,\n  swg-loading-image {\n    display: block;\n  }\n\n  swg-loading-container {\n    width: 100% !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    min-height: 148px !important;\n    height: 100% !important;\n    bottom: 0 !important;\n    margin-top: 5px !important;\n    z-index: 2147483647 !important;\n  }\n\n  /**\n  * Since the desktop view has the parent iframe (.swg-dialog) transparent,\n  * this style adds the background with borders to the loading indicator.\n  */\n  @media (min-width: 630px), (min-height: 630px) {\n    swg-loading-container {\n      width: 560px !important;\n      margin-left: auto !important;\n      margin-right: auto !important;\n      border-top-left-radius: 8px !important;\n      border-top-right-radius: 8px !important;\n      background-color: rgba(255, 255, 255, 1) !important;\n      box-shadow: rgba(60, 64, 67, 0.3) 0 1px 1px,\n        rgba(60, 64, 67, 0.15) 0 1px 4px 1px !important;\n    }\n\n    swg-loading-container.centered-on-desktop {\n      height: 120px !important;\n      min-height: 120px !important;\n      border-radius: 8px !important;\n    }\n  }\n\n  swg-loading {\n    z-index: 2147483647 !important;\n    width: 36px;\n    height: 36px;\n    overflow: hidden;\n    animation: mspin-rotate 1568.63ms infinite linear;\n  }\n\n  swg-loading-animate {\n    animation: mspin-revrot 5332ms infinite steps(4);\n  }\n\n  swg-loading-image {\n    background-image: url('","/loader.svg');\n    background-size: 100%;\n    width: 11664px;\n    height: 36px;\n    animation: swg-loading-film 5332ms infinite steps(324);\n  }\n\n  @keyframes swg-loading-film {\n    from {\n      transform: translateX(0);\n    }\n    to {\n      transform: translateX(-11664px);\n    }\n  }\n\n  @keyframes mspin-rotate {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  @keyframes mspin-revrot {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(-360deg);\n    }\n  }\n"])),i),vi=yi(_b||(_b=__template(["\n  /** Common styles across all window sizes. */\n  .swg-dialog,\n  .swg-toast {\n    box-sizing: border-box;\n    background-color: rgba(255, 255, 255, 1) !important;\n  }\n\n  .swg-toast {\n    position: fixed !important;\n    bottom: 0 !important;\n    max-height: 46px !important;\n    z-index: 2147483647 !important;\n    border: none !important;\n  }\n\n  /**\n  * Wide desktop screen support, when width is >= 871px and height is >= 641px.\n  */\n  @media (min-width: 871px) and (min-height: 641px) {\n    .swg-dialog.swg-wide-dialog {\n      width: 870px !important;\n      left: -435px !important;\n    }\n  }\n\n  /** Tablet/Medium screen support, when width OR height is <= 640px. */\n  @media (max-width: 640px), (max-height: 640px) {\n    .swg-dialog,\n    .swg-toast {\n      width: 480px !important;\n      left: -240px !important;\n      margin-inline-start: calc(100vw - 100vw / 2) !important;\n      border-top-left-radius: 8px !important;\n      border-top-right-radius: 8px !important;\n      box-shadow: rgba(60, 64, 67, 0.3) 0 1px 1px,\n        rgba(60, 64, 67, 0.15) 0 1px 4px 1px !important;\n    }\n\n    [dir='rtl'] .swg-dialog,\n    [dir='rtl'] .swg-toast {\n      margin-inline-start: calc(100vw - 100vw / 2 - 240px) !important;\n    }\n  }\n\n  /** Desktop/Large screen support, when width AND height are >= 641px. */\n  @media (min-width: 641px) and (min-height: 641px) {\n    .swg-dialog {\n      width: 630px !important;\n      left: -315px !important;\n      margin-inline-start: calc(100vw - 100vw / 2) !important;\n      background-color: transparent !important;\n      border: none !important;\n    }\n\n    [dir='rtl'] .swg-dialog {\n      margin-inline-start: calc(100vw - 100vw / 2 - 315px) !important;\n    }\n\n    .swg-toast {\n      border-radius: 4px !important;\n      bottom: 8px !important;\n      box-shadow: 0 3px 1px -2px rgb(0 0 0 / 20%), 0 2px 2px 0 rgb(0 0 0 / 14%),\n        0 1px 5px 0 rgb(0 0 0 / 12%) !important;\n      left: 8px !important;\n    }\n  }\n\n  /** Phone/Small screen support, when width is <= 480px. */\n  @media (max-width: 480px) {\n    .swg-dialog,\n    .swg-toast {\n      width: 100% !important;\n      left: 0 !important;\n      right: 0 !important;\n      margin-inline-start: 0 !important;\n    }\n  }\n\n  /**\n  * Class applied to content page to disable scrolling.\n  */\n  html.swg-disable-scroll,\n  html.swg-disable-scroll * {\n    overflow: hidden !important;\n  }\n"])));class Ni{constructor(t,e,s,i){this.entitlements=t,this.userData=e,this.purchaseDataList=s,this.ye=i,this.purchaseData=s[0]}clone(){return new Ni(this.entitlements,this.userData,this.purchaseDataList,this.ye)}json(){return{entitlements:this.entitlements.json(),userData:this.userData.json(),purchaseDataList:this.purchaseDataList.map((t=>t.json())),purchaseData:this.purchaseData.json()}}complete(){return this.ye()}}class Pi{constructor(t,e){this.se=t,this.xe=null,this.openPromise=null,this.he=t.win(),this.le=t.activities(),this.Fe=t.dialogManager(),this.Bs=Object.assign({entitlements:null,consent:!0},e||{})}async start(){const t=this.Bs.entitlements;if(!t||!t.getEntitlementForSource("google"))throw new Error('No entitlements with "google" source');this.se.callbacks().triggerFlowStarted(ne.COMPLETE_DEFERRED_ACCOUNT_CREATION),this.xe=new te(this.he,this.le,Tt("/recoveriframe"),It({publicationId:this.se.pageConfig().getPublicationId(),productId:this.se.pageConfig().getProductId(),entitlements:t.raw||null,consent:this.Bs.consent}),this.se.clientConfigManager().getLanguage(),!0),this.openPromise=this.Fe.openView(this.xe);try{const t=await this.xe.acceptResult();return this.Un(t.data)}catch(e){throw qt(e)?this.se.callbacks().triggerFlowCanceled(ne.COMPLETE_DEFERRED_ACCOUNT_CREATION):this.Fe.completeView(this.xe),e}}Un(t){this.se.entitlementsManager().blockNextNotification();const e=t.entitlements,s=t.idToken,i=t.productType,n=this.se.entitlementsManager().parseEntitlements({signedEntitlements:e}),r=new Ye(s,(new Ve).decode(s)),a=t.purchaseDataList?t.purchaseDataList.map((t=>new je(t.data,t.signature))):[new je(t.purchaseData.data,t.purchaseData.signature)],h=new $e(this.se),l=h.complete.bind(h),u=new Ni(n,r,a,l);this.se.eventManager().logSwgEvent(o.ACTION_NEW_DEFERRED_ACCOUNT,!0);const c=Promise.resolve.bind(Promise);return h.start(new ze("",a[0],r,n,i,c)),u}}function Li(t){const e=function(t){return t.readyState}(t);return"loading"!==e&&"uninitialized"!==e}class ki{constructor(t){const e="document"in t;this.he=e?t:t.defaultView,this._e=e?t.document:t}getWin(){return this.he}getRootNode(){return this._e}getRootElement(){return this._e.documentElement}getHead(){return this._e.head}getBody(){return this._e.body}isReady(){return Li(this._e)}async whenReady(){var t;await(t=this._e,new Promise((e=>{!function(t,e){!function(t,e,s){if(e(t))return void s(t);let i=!1;const n=()=>{e(t)&&!i&&(s(t),i=!0,t.removeEventListener("readystatechange",n))};t.addEventListener("readystatechange",n)}(t,Li,e)}(t,e)})))}}function Gi(t){return"nodeType"in t||"document"in t?new ki(t):t}const Mi={frameborder:"0",scrolling:"no",src:"about:blank"};class Di{constructor(t,e){const s=Object.assign({},Mi,e);this.fe=jt(t,"iframe",s),Qt(this.fe,Xt),this.Fn=new Promise((t=>{this.fe.onload=()=>{t()}}))}whenReady(){return this.Fn}getElement(){return this.fe}getDocument(){var t;const e=this.getElement().contentDocument||(null==(t=this.getElement().contentWindow)?void 0:t.document);if(!e)throw new Error("not loaded");return e}getBody(){return this.getDocument().body}isConnected(){return this.getElement().isConnected}}let xi=class{constructor(t,e){this._e=t,this.Wn=this._e.getWin().document.createElement("swg-popup-background"),this.Wn.setAttribute("role","button"),Qt(this.Wn,{"z-index":e.toString(),display:"none",position:"fixed",top:"0",right:"0",bottom:"0",left:"0","background-color":"rgba(32, 33, 36, .6)"})}getElement(){return this.Wn}isAttached(){return!!this.Wn.parentNode}attach(){var t;null==(t=this._e.getBody())||t.appendChild(this.Wn)}destroy(){var t;null==(t=this._e.getBody())||t.removeChild(this.Wn)}show(t){if(Qt(this.Wn,{display:"block",opacity:t?"0":"1"}),t)return ue(this.Wn,{opacity:"1"},300,"ease-out")}async hide(t=!0){t&&await ue(this.Wn,{opacity:"0"},300,"ease-out"),Qt(this.Wn,{display:"none"})}};class Ui{constructor(t,e={}){if(this._e=t,this.Bn=jt(this._e,"swg-loading-container",{}),e.additionalClasses)for(const s of e.additionalClasses)this.Bn.classList.add(s);this.Vn=jt(this._e,"swg-loading",{}),this.Bn.appendChild(this.Vn),this.Bn.style.setProperty("display","none","important"),this.zn()}getElement(){return this.Bn}show(){this.Bn.style.removeProperty("display")}hide(){this.Bn.style.setProperty("display","none","important")}zn(){const t=this.Vn,e=jt(this._e,"swg-loading-animate",{});t.appendChild(e);const s=jt(this._e,"swg-loading-image",{});e.appendChild(s)}}const Fi=2147483647,Wi={"min-height":"50px",border:"none",display:"block",position:"fixed","z-index":Fi,"box-sizing":"border-box"},Bi={position:"absolute",top:"0",left:"0",right:"0",bottom:"0",opacity:"0",height:"0","max-height":"100%","max-width":"100%","min-height":"100%","min-width":"100%",width:"0"};class Vi{constructor(t,e,s={},i={},n={},r=!1){this._e=t;const o=n.desktopConfig||{},a=!!o.supportsWideScreen,h="swg-dialog ".concat(a?"swg-wide-dialog":""),l=n.iframeCssClassOverride||h,u=$t(Ut,e);this.fe=new Di(t.getWin().document,{class:l,title:u}),this.jn=new xi(t,Fi-1),this.Yn=n.closeOnBackgroundClick,this.Kn=r;const c=Object.assign({},Wi,s);Qt(this.fe.getElement(),c),function(t,e){for(const[s,i]of Object.entries(e))Zt(t,s,i)}(this.fe.getElement(),i),this.qn=null,this.Hn=null,this.Jn=null,this.Ae=null,this.$n=0,this.Xn=!1,this.Qn=null,this.Zn=void 0!==n.maxAllowedHeightRatio?n.maxAllowedHeightRatio:.9,this.er=!!o.isCenterPositioned,this.ir=!!n.shouldDisableBodyScrolling,this.nr=this._e.getWin().matchMedia("(min-width: 641px)"),this.rr=null}async open(t=!1){var e;this.Kn&&void 0!==this.Yn&&this.jn.getElement().addEventListener("click",this.lr.bind(this));const s=this.fe;if(s.isConnected())throw new Error("already opened");return null==(e=this._e.getBody())||e.appendChild(s.getElement()),this.jn.attach(),t?(Qt(s.getElement(),{visibility:"hidden",opacity:"0"}),this.Xn=t):this.cr(),await s.whenReady(),this.dr(),this}dr(){const t=this.fe.getBody(),e=this.fe.getDocument();Yt(Gi(e),Oi);const s=[];this.isPositionCenterOnDesktop()&&s.push("centered-on-desktop"),this.qn=new Ui(e,{additionalClasses:s}),t.appendChild(this.qn.getElement()),this.Hn=jt(e,"swg-container",{}),t.appendChild(this.Hn),this.gr(),this.er&&(this.rr=()=>{this.gr()},this.nr.addListener(this.rr))}async close(t=!0){var e;let s;if(t){const t=this.pr()?{opacity:"0"}:{transform:"translateY(100%)"};s=this.Se((()=>(this.jn.hide(!0),ue(this.getElement(),t,300,"ease-out"))))}else s=Promise.resolve();this._e.getRootElement().classList.remove("swg-disable-scroll"),await s;const i=this.fe.getElement();null==(e=i.parentNode)||e.removeChild(i),this.Er(),this.jn.destroy(),this.rr&&this.nr.removeListener(this.rr)}getContainer(){if(!this.Hn)throw new Error("not opened yet");return this.Hn}getIframe(){return this.fe}getElement(){return this.fe.getElement()}getLoadingView(){return this.qn}getMaxAllowedHeightRatio(){return this.Zn}isPositionCenterOnDesktop(){return this.er}_r(){var t;this.Jn&&this.Jn.hasLoadingIndicator()?this.Qn=this.Jn:(this.getContainer().textContent="",null==(t=this.qn)||t.show())}wr(){var t,e;this.Qn?((e=this.Qn.getElement()).parentElement&&e.parentElement.removeChild(e),this.Qn=null):null==(t=this.qn)||t.hide()}getCurrentView(){return this.Jn}async openView(t){var e;Qt(t.getElement(),Bi),this._r(),this.Jn=t,this.getContainer().appendChild(t.getElement()),this.ir&&(null==(e=this._e.getRootElement())||e.classList.add("swg-disable-scroll")),t.shouldFadeBody()&&!this.Xn&&this.jn.show(t.shouldAnimateFade()),await t.init(this),Qt(t.getElement(),{opacity:"1"}),this.Xn&&(t.shouldFadeBody()&&this.jn.show(t.shouldAnimateFade()),this.cr()),this.wr()}cr(){this.Se((async()=>{Qt(this.getElement(),{transform:"translateY(100%)",opacity:"1",visibility:"visible"}),this.pr()&&await ue(this.getElement(),{transform:this.br(),opacity:"1",visibility:"visible"},300,"ease-out"),this.getElement().focus()})),this.Xn=!1}lr(t){if(t.stopPropagation(),this.Yn){const t=this.Jn;t.execute&&t.execute(new _)}return!1}async resizeView(t,e,s=!0){if(this.Jn!=t)return null;const i=this.Tr(e),n=++this.$n,r=()=>n!==this.$n;let o;if(s){const t=this.getElement().offsetHeight;o=i>=t?this.Se((()=>{if(r())return Promise.resolve();const e={height:"".concat(i,"px")};return this.pr()||(e.transform="translateY(".concat(i-t,"px)")),Qt(this.getElement(),e),requestAnimationFrame((()=>{ue(this.getElement(),{transform:this.br()},300,"ease-out")})),Promise.resolve()})):this.Se((async()=>{const e=r()?Promise.resolve():ue(this.getElement(),{transform:this.pr()?this.br():"translateY(".concat(t-i,"px)")},300,"ease-out");await e,r()||Qt(this.getElement(),{height:"".concat(i,"px"),transform:this.br()})}))}else Qt(this.getElement(),{height:"".concat(i,"px")}),o=Promise.resolve();await o,r()||(this.Ir(e),t.resized())}async Se(t){await this.Ae;try{await t()}catch{}this.Ae=null}Tr(t){return Math.min(t,this._e.getWin().innerHeight*this.Zn)}Ir(t){if(this.pr())return void this.Er();const e=t+20;Qt(this._e.getRootElement(),{"padding-bottom":"".concat(e,"px")})}Er(){this._e.getRootElement().style.removeProperty("padding-bottom")}gr(){Qt(this.getElement(),this.Ar())}pr(){return this.er&&this.nr.matches}Ar(){return this.pr()?{top:"50%",bottom:"0",transform:this.br()}:{top:"auto",bottom:"0",transform:this.br()}}br(){return this.pr()?"translateY(-50%)":"translateY(0px)"}}class zi{constructor(t,e){this.doc=t,this.clientConfigManager=e,this.Kn=!1,this.Cr=null,this.Sr=null,this.Rr=new xi(t,2147483647),this.yr=null,this.Rr.getElement().addEventListener("click",(()=>{if(this.yr)try{this.yr.focus()}catch{}}))}setEnableBackgroundClickExperiment(t){this.Kn=t}openDialog(t=!1,e={}){return this.Sr||(this.Cr=new Vi(this.doc,this.clientConfigManager.getLanguage(),{},{},e,this.Kn),this.Sr=this.Cr.open(t)),this.Sr}async openView(t,e=!1,s={}){return this.handleCancellations(t),(await this.openDialog(e,s)).openView(t)}async handleCancellations(t){try{await t.whenComplete()}catch(e){throw qt(e)&&this.completeView(t),e}}completeView(t){setTimeout((()=>{this.Cr&&this.Cr.getCurrentView()===t&&this.Xt()}),100)}completeAll(){this.Cr&&this.Xt(),this.Rr.isAttached()&&this.Rr.destroy()}getDialog(){return this.Cr}Xt(){var t;null==(t=this.Cr)||t.close(),this.Cr=null,this.Sr=null}popupOpened(t){this.yr=t||null,this.Rr.isAttached()||this.Rr.attach(),this.Rr.show(!0)}popupClosed(){this.yr=null;try{this.Rr.hide()}catch{}}}class ji{constructor(t,e){this.intervention=t,this.se=e,this.type=t.type,this.configurationId=t.configurationId}async show(t){if(this.intervention.type===Q.TYPE_NEWSLETTER_SIGNUP||this.intervention.type===Q.TYPE_REWARDED_SURVEY||this.intervention.type===Q.TYPE_BYO_CTA||this.intervention.type===Q.TYPE_REWARDED_AD)return new ls(this.se,{action:this.intervention.type,configurationId:this.intervention.configurationId,onResult:t.onResult,isClosable:t.isClosable,calledManually:!0,suppressToast:t.suppressToast,onAlternateAction:t.onAlternateAction,onSignIn:t.onSignIn,preference:this.intervention.preference}).start();throw Error("Can't show ".concat(this.type))}}const Yi="google:metering";class Ki{constructor(t,e,s,i,n,r,o=!1,a=null){this.service=t,this.raw=e,this.entitlements=s,this.Or=i,this.vr=n,this.Nr=r,this.decryptedDocumentKey=a,this.isReadyToPay=!!o}clone(){return new Ki(this.service,this.raw,this.entitlements.map((t=>t.clone())),this.Or,this.vr,this.Nr,this.isReadyToPay,this.decryptedDocumentKey)}json(){return{service:this.service,entitlements:this.entitlements.map((t=>t.json())),isReadyToPay:this.isReadyToPay}}enablesThisWithCacheableEntitlements(){return!!this.getEntitlementForThis()&&!this.enablesThisWithGoogleMetering()&&!this.enablesThisWithGoogleDevMode()}enablesThisWithGoogleMetering(){const t=this.getEntitlementForThis();return!!t&&t.source===Yi}enablesThisWithGoogleDevMode(){const t=this.getEntitlementForThis();if(!t)return!1;const e="google"===t.source&&-1!==t.subscriptionToken.indexOf("GOOGLE_DEV_MODE_ORDER"),s="GOOGLE_DEV_MODE_TOKEN"===t.subscriptionToken;return e||s}enablesThis(t){return this.enables(this.Or,t)}enablesAny(t){for(let e=0;e<this.entitlements.length;e++)if(this.entitlements[e].products.length>0&&(!t||t==this.entitlements[e].source))return!0;return!1}enables(t,e){return!!t&&!!this.getEntitlementFor(t,e)}getEntitlementForThis(t){return this.getEntitlementFor(this.Or,t)}getEntitlementFor(t,e){if(!t)return et("SwG needs this article to define a product ID (e.g. example.com:premium). Articles can define a product ID using JSON+LD. SwG can check entitlements after this article defines a product ID."),null;const s=this.entitlements.filter((s=>s.enables(t)&&(!e||e===s.source))),i=s.find((({source:t})=>t!==Yi)),n=s.find((({source:t})=>t===Yi));return i||n||null}getEntitlementForSource(t){if(this.entitlements.length>0)for(let e=0;e<this.entitlements.length;e++)if(this.entitlements[e].subscriptionToken&&t==this.entitlements[e].source)return this.entitlements[e];return null}ack(){this.vr(this)}consume(t){this.Nr(this,t)}}class qi{constructor(t,e,s,i,n,r){this.source=t,this.products=e,this.subscriptionToken=s,this.subscriptionTokenContents=i,this.subscriptionTimestamp=n,this.readerId=r}clone(){return new qi(this.source,this.products.slice(0),this.subscriptionToken,this.subscriptionTokenContents,this.subscriptionTimestamp,this.readerId)}json(){return{source:this.source,products:this.products,subscriptionToken:this.subscriptionToken,readerId:this.readerId}}enables(t){if(!t)return!1;const e=t.indexOf(":");if(-1!=e){const s=t.substring(0,e+1);if(s+"*"==t&&this.products.filter((t=>t.substring(0,e+1)==s)).length>=1)return Z("enabled with wildcard productId"),!0;if(this.products.includes(s+"*"))return Z("enabled with wildcard entitlement"),!0}return this.products.includes(t)}static parseFromJson(t,e){t||(t={});const s=t.source||"",i=t.products||[],n=t.subscriptionToken||"",r=t.readerId;let o;try{o=n?e.decode(n):null}catch{o=null}const a=t.subscriptionTimestamp;let h;try{const t=a.seconds_,e=a.nanos_;h=new W([t,e],!1)}catch{h=null}return new qi(s,i,n,o,h,r)}static parseListFromJson(t,e){return(Array.isArray(t)?t:[t]).map((t=>qi.parseFromJson(t,e)))}getSku(){if("google"!==this.source)return null;const t=Be(this.subscriptionToken,"productId")||null;return t||et("Unable to retrieve SKU from SwG subscription token"),t}}var Hi=(t=>(t[t.LICENSED_BY_GOOGLE=1]="LICENSED_BY_GOOGLE",t[t.METERED_BY_GOOGLE=2]="METERED_BY_GOOGLE",t))(Hi||{});const Ji="rgba(60, 64, 67, 0.3) 0px -2px 5px, rgba(60, 64, 67, 0.15) 0px -5px 5px",$i="anonymous_user",Xi={[Hi.LICENSED_BY_GOOGLE]:"/metertoastiframe",[Hi.METERED_BY_GOOGLE]:"/meteriframe"};class Qi{constructor(t,{meterClientType:e=Hi.LICENSED_BY_GOOGLE,meterClientUserAttribute:s=$i}={}){this.se=t,this.Pr=null,this.Lr=!1,this.kr=null,this.Gr=()=>{},this.he=t.win(),this.le=t.activities(),this.Fe=t.dialogManager(),this.Mr=e,this.Dr=s,this.Me=t.clientConfigManager();const i={isClosable:!0,hasSubscriptionCallback:t.callbacks().hasSubscribeRequestCallback()};this.Mr===Hi.METERED_BY_GOOGLE&&(i.meterType=this.Dr===$i?"UNKNOWN":"KNOWN");const n=this.le.addDefaultArguments(i),r=Xi[this.Mr],o={origin:ot(this.he.location.href).origin},a=this.Me.getLanguage();this.Me.shouldForceLangInIframes()&&(o.hl=a),this.xe=new te(this.he,this.le,Tt(r,o),n,a,!1)}async start(){this.Gr=()=>{const t=new B;t.setClose(!0),this.xe.execute(t),this.removeCloseEventListener(),this.se.eventManager().logSwgEvent(o.ACTION_METER_TOAST_CLOSED_BY_ARTICLE_INTERACTION,!0),this.Pr&&!this.Lr&&(this.Lr=!0,this.Pr())},this.se.callbacks().triggerFlowStarted(ne.SHOW_METER_TOAST),this.xe.on(V,this.Ur.bind(this)),this.xe.on(d,this.je.bind(this)),this.se.callbacks().hasSubscribeRequestCallback()||this.se.callbacks().hasOffersFlowRequestCallback()||et("[swg.js]: `setOnNativeSubscribeRequest` has not been set before starting the metering flow, so users will not be able to subscribe from the metering dialog directly. Please call `setOnNativeSubscribeRequest` with a subscription flow callback before starting metering."),this.Fe.handleCancellations(this.xe).catch((t=>{if(this.Pr&&!this.Lr&&(this.Lr=!0,this.Pr()),!qt(t))throw console.error("[swg.js]: Error occurred during meter toast handling: "+t),t}));const t=await this.Fe.openDialog();if(this.Fr(),this.Wr(),await t.openView(this.xe),this.he.addEventListener("click",this.Gr),this.he.addEventListener("touchstart",this.Gr),this.he.addEventListener("mousedown",this.Gr),this.Br())Zt(this.he.document.body,"overflow","hidden");else{let t,e;this.kr=()=>{t=t||this.he.pageYOffset,this.he.clearTimeout(e),e=this.he.setTimeout((()=>{Math.abs(this.he.pageYOffset-t)>100&&this.Gr()}),100)},this.he.addEventListener("scroll",this.kr)}this.se.eventManager().logSwgEvent(o.IMPRESSION_METER_TOAST),this.se.eventManager().logSwgEvent(o.EVENT_OFFERED_METER)}setOnConsumeCallback(t){this.Pr=t}removeCloseEventListener(){this.he.removeEventListener("click",this.Gr),this.he.removeEventListener("touchstart",this.Gr),this.he.removeEventListener("mousedown",this.Gr),this.Br()?Zt(this.he.document.body,"overflow","visible"):this.kr&&this.he.removeEventListener("scroll",this.kr)}Fr(){const t=this.he.matchMedia("(max-width: 640px), (max-height: 640px)"),e=this.Fe.getDialog().getElement();t.matches&&Qt(e,{"box-shadow":Ji}),t.addListener((t=>{t.matches?Qt(e,{"box-shadow":Ji}):Qt(e,{"box-shadow":""})}))}Wr(){this.he.matchMedia("(min-width: 640px) and (min-height: 640px)").matches&&Qt(this.Fe.getDialog().getLoadingView().getElement(),{width:"420px",margin:"auto"})}Ur(t){this.removeCloseEventListener(),this.Lr=!0,t.getNative()?this.se.callbacks().triggerSubscribeRequest():this.se.callbacks().triggerOffersFlowRequest()}Br(){return!!this.he.navigator.userAgent.match(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile/i)}je(t){t.getSubscriberOrMember()&&this.se.callbacks().triggerLoginRequest({linkRequested:!1})}showNoEntitlementFoundToast(){this.xe&&this.xe.execute(new I)}}function Zi(t,e=!1){const s=at(t);return!(!(s.gaa_at&&s.gaa_n&&s.gaa_sig&&s.gaa_ts)||!e&&"na"===s.gaa_at||parseInt(s.gaa_ts,16)<Date.now()/1e3)}const tn=new Set([Q.TYPE_NEWSLETTER_SIGNUP,Q.TYPE_REWARDED_SURVEY,Q.TYPE_REWARDED_AD,Q.TYPE_BYO_CTA]);class en{constructor(t,e,s,i,n){this.he=t,this.ke=e,this.ie=s,this.se=i,this.Vr=n,this.zr=null,this.jr=!1,this.Yr=!1,this.Kr=!1,this.qr=null,this.Hr=null,this.Jr=0,this.Ln=null,this.entitlementsPostPromise=null,this.Nn=this.ke.getPublicationId(),this.$r=new Ve,this.re=i.storage(),this.Ge=i.analytics(),this.Xr=i.config(),this.se.eventManager().registerEventListener(this.Qr.bind(this))}reset(t=!1){this.Ln=null,this.Jr=Math.max(this.Jr,t?3:0),t&&(this.re.remove(q),this.re.remove(H))}clear(){this.Ln=null,this.Jr=0,this.unblockNextNotification(),this.re.remove(q),this.re.remove($),this.re.remove(H)}async getEntitlements(t){"string"==typeof t&&(Date.now()>1600289016959&&et("[swg.js:getEntitlements]: If present, the first param of getEntitlements() should be an object of type GetEntitlementsParamsExternalDef."),t={encryption:{encryptedDocumentKey:t}}),this.Ln||(this.Ln=this.Zr(t));const e=await this.Ln;return null!=e.isReadyToPay&&this.Ge.setReadyToPay(e.isReadyToPay),e}pushNextEntitlements(t,e){const s=this.eo(t,!0,e);return!(!s||!s.enablesThis()||(this.re.set(q,t),0))}so(){return at(this.he.location.search).gaa_n}io(t){var e;if(!t||t.source!==Yi)return;let s,i;if((null==(e=t.subscriptionTokenContents)?void 0:e.metering.clientType)===Hi.METERED_BY_GOOGLE)i=l.SUBSCRIBE_WITH_GOOGLE_METERING_SERVICE;else{if(!Zi(this.he.location.search))return;i=l.GOOGLE_SHOWCASE_METERING_SERVICE,s=this.so()}this.se.eventManager().logSwgEvent(o.EVENT_UNLOCKED_BY_METER,!1);const n=new b;n.setSource(t.source),n.setJwt(t.subscriptionToken),this.entitlementsPostPromise=this.oo(n,h.UNLOCKED_METER,i,s)}Qr(t){var e,s,i,n;if(!Zi(this.he.location.search,!0))return;const r=function(t){return be[t]}(t.eventType);if(!r)return;let o=null;switch(t.eventOriginator){case u.SHOWCASE_CLIENT:o=l.PUBLISHER_ENTITLEMENT;break;case u.SWG_CLIENT:if(r==h.UNLOCKED_METER)return;o=l.GOOGLE_SUBSCRIBER_ENTITLEMENT;break;default:return}const a=this.so(),c=null==(s=null==(e=null==t?void 0:t.additionalParameters)?void 0:e.getIsUserRegistered)?void 0:s.call(e),d=null==(n=null==(i=null==t?void 0:t.additionalParameters)?void 0:i.getSubscriptionTimestamp)?void 0:n.call(i);this.entitlementsPostPromise=this.oo(new b,r,o,a,c,d)}async oo(t,e,s,i="",n=null,r=null){const o=new T;o.setUsedEntitlement(t),o.setClientEventTime(hi(Date.now())),o.setEntitlementResult(e),o.setEntitlementSource(s),o.setToken(i),"boolean"==typeof n&&o.setIsUserRegistered(n),r&&o.setSubscriptionTimestamp(r);let a="/publication/".concat(encodeURIComponent(this.Nn),"/article");if(a=sn(this.he.location,a),!this.Hr){const t={metering:{resource:{hashedCanonicalUrl:await this.ao()}}};this.Hr=Fe(xe(JSON.stringify(t)))}const h=await this.re.get(Y,!0);h&&(a=ht(a,"sut",h)),a=ht(a,"encodedEntitlementsParams",this.Hr),await this.ie.sendPost(wt(a),o)}async ao(){return async function(t){var e;const s=null==(e=self.crypto)?void 0:e.subtle;if(!s){const t="Swgjs only works on secure (HTTPS or localhost) pages.";return et(t),Promise.reject(t)}return function(t){const e=[],s=new DataView(t);for(let i=0;i<s.byteLength;i+=4){const t=s.getUint32(i).toString(16);e.push(("00000000"+t).slice(-8))}return e.join("")}(await s.digest("SHA-512",xe(t)))}(ct(this.se.doc()))}async Zr(t){const e=await this.ho(t);return this.lo(e),e}async ho(t){const e=await this.re.get(q),s=await this.re.get(H),i=!(!t||!t.encryption);if(e&&!i){const t=this.eo(e,!0,function(t){switch(t){case"true":return!0;case"false":return!1;default:return}}(s));if(t&&t.enablesThis())return this.Jr=0,t}const n=await this.uo(t);return n&&n.enablesThisWithCacheableEntitlements()&&n.raw&&this.re.set(q,n.raw),n}async getArticle(){return this.Ln?(await this.Ln,this.zr):null}async getExperimentConfigFlags(){const t=await this.getArticle();return this.parseArticleExperimentConfigFlags(t)}parseArticleExperimentConfigFlags(t){if(t){const e=t.experimentConfig;if(null!=e){const t=e.experimentFlags;if(null!=t)return t}}return[]}uo(t){let e=this.Jr;this.Jr=0;const s=async()=>{e--;const i=await this.Gn(t);return i.enablesThis()||e<=0?i:new Promise((t=>{this.he.setTimeout((()=>{t(s())}),550)}))};return s()}setToastShown(t){this.re.set($,t?"1":"0")}blockNextNotification(){this.jr=!0}blockNextToast(){this.Yr=!0}unblockNextNotification(){this.jr=!1}enableMeteredByGoogle(){this.Kr=!0}getLastMeterToast(){return this.qr}parseEntitlements(t){const e=t.isReadyToPay;null==e?this.re.remove(H):this.re.set(H,String(e));const s=t.signedEntitlements,i=t.decryptedDocumentKey,n=t.swgUserToken;if(n&&this.co(n),s){const t=this.eo(s,!1,e,i);if(t)return t}else{const s=t.entitlements;if(s)return this.do("",s,e,i)}return this.do("",[],e)}co(t){t&&this.re.set(Y,t,!0)}eo(t,e,s,i){try{const n=this.$r.decode(t);if(e){const t=Date.now(),e=n.exp;if(1e3*parseFloat(e)<t)return null}const r=n.entitlements;return r&&this.do(t,r,s,i)||null}catch(n){this.he.setTimeout((()=>{throw n}))}return null}do(t,e,s,i){return new Ki("subscribe.google.com",t,qi.parseListFromJson(e,this.$r),this.ke.getProductId(),this.po.bind(this),this.mo.bind(this),s,i)}lo(t){const e=this.jr;this.jr=!1;const s=this.Yr;if(this.Yr=!1,e)return;this.se.callbacks().triggerEntitlementsResponse(Promise.resolve(t)),this.Vr&&t.enablesThisWithGoogleMetering()&&t.consume();const i=t.getEntitlementForThis();i?s||this.Eo(i):this.se.eventManager().logSwgEvent(o.EVENT_NO_ENTITLEMENTS,!1)}async Eo(t){if(t.source===Yi)return this.se.eventManager().logSwgEvent(o.EVENT_HAS_METERING_ENTITLEMENTS,!1),Promise.resolve();const e=new A;e.setIsUserRegistered(!0),t.subscriptionTimestamp&&e.setSubscriptionTimestamp(t.subscriptionTimestamp);const s="privileged"===t.source?o.EVENT_UNLOCKED_FOR_CRAWLER:o.EVENT_UNLOCKED_BY_SUBSCRIPTION;if(this.se.eventManager().logSwgEvent(s,!1,e),"1"===await this.re.get($))return;const i=t.source||Yi;return new de(this.se,Tt("/toastiframe"),It({publicationId:this.Nn,source:i})).open()}po(t){t.getEntitlementForThis()&&this.setToastShown(!0)}mo(t,e){var s;if(t.enablesThisWithGoogleMetering()){const i=t.getEntitlementForThis(),n=()=>{e&&e(),this.io(i)},r=i.subscriptionTokenContents;if(!r)return n();if(!0===(null==(s=r.metering)?void 0:s.showToast)){const t=new Qi(this.se,{meterClientType:r.metering.clientType,meterClientUserAttribute:r.metering.clientUserAttribute});return t.setOnConsumeCallback(n),this.qr=t,t.start()}return n()}}async Gn(t){var e;const s=await this.re.get(Y,!0),i=await this.re.get(K,!1);let n="/publication/".concat(encodeURIComponent(this.Nn),"/article");if(n=sn(this.he.location,n),n=function(t,e){const s=at(t.hash).rrmPromptRequested;return void 0===s?e:ht(e,"previewConfigId",s)}(this.he.location,n),n=function(t,e){const s=at(t.hash).rrmPreviewKey;return void 0===s?e:ht(e,"previewKey",s)}(this.he.location,n),(null==t?void 0:t.encryption)&&(n=ht(n,"crypt",t.encryption.encryptedDocumentKey)),s&&(n=ht(n,"sut",s)),this.Xr.publisherProvidedId?n=ht(n,"ppid",this.Xr.publisherProvidedId):(null==t?void 0:t.publisherProvidedId)&&"string"==typeof t.publisherProvidedId&&t.publisherProvidedId.length>0&&(n=ht(n,"ppid",t.publisherProvidedId)),i){const t=parseInt(i,10);if(t){const e=Math.floor((Date.now()-t)/1e3);e>=0&&(n=ht(n,"interaction_age",e.toString()))}}n=ht(n,"locked",String(this.ke.isLocked())),n=ht(n,"contentType",this.ke.isLocked()?se.CLOSED.toString():se.OPEN.toString());const r=await this.ao();let a=this.Kr?{metering:{clientTypes:[Hi.METERED_BY_GOOGLE],owner:this.Nn,resource:{hashedCanonicalUrl:r}}}:void 0;if(this.Nn&&(null==(e=null==t?void 0:t.metering)?void 0:e.state)&&Zi(this.he.location.search)){const e=t.metering.state.id;if("string"==typeof e&&e.length>0){let s=function({attributes:t,category:e}){if(!t)return;const s=Object.keys(t);for(const i of s){const s="".concat(e,"_").concat(i),n=Number(t[i].timestamp),r=n>Date.now()/1e3*2;n&&!r||et('SwG Entitlements: Please specify a Unix timestamp, in seconds, for the "'.concat(i,'" ').concat(e," attribute. The timestamp you passed (").concat(t[i].timestamp,") looks invalid.")),a.metering.state.attributes.push({name:s,timestamp:n})}};a={metering:{clientTypes:[Hi.LICENSED_BY_GOOGLE],owner:this.Nn,resource:{hashedCanonicalUrl:r},state:{id:e,attributes:[]},token:this.so()}},s({attributes:t.metering.state.standardAttributes,category:"standard"}),s({attributes:t.metering.state.customAttributes,category:"custom"})}else et("SwG Entitlements: Please specify a metering state ID string, ideally a hash to avoid PII.")}a&&(this.Hr=Fe(xe(JSON.stringify(a))),n=ht(n,"encodedEntitlementsParams",this.Hr)),n=wt(n),this.se.eventManager().logSwgEvent(o.ACTION_GET_ENTITLEMENTS,!1);const h=await this.ie.fetchCredentialedJson(n);this.zr=h;const l=this.zr.entitlements||{},u=h.errorMessages;if(Number(null==u?void 0:u.length)>0)for(const o of u)et("SwG Entitlements: "+o);return this.parseEntitlements(l)}async getAvailableInterventions(){var t,e;const s=await this.getArticle();return s?(null==(e=null==(t=s.audienceActions)?void 0:t.actions)?void 0:e.filter((t=>tn.has(t.type))).map((t=>new ji(t,this.se))))||[]:(et("[swg.js:getAvailableInterventions] Article is null."),null)}}function sn(t,e){const s=at(t.hash)["swg.deventitlement"];return void 0===s?e:ht(e,"devEnt",s)}class nn{constructor(){}getSearch(){return self.window.location.search}}const rn=class t{constructor(t=new nn){this.locationProvider=t}shouldAllowFreeAccess(){const e=t.GOOGLE_REFERERS_PREFIX_LIST.some((t=>self.document.referrer.toLowerCase().startsWith(t))),s=this.getQueryParamsAsMap(),i=s.has(t.HOLDBACK_QUERY_PARAM)&&s.get(t.HOLDBACK_QUERY_PARAM)===t.HOLDBACK_ENABLED_VALUE;return e&&!i}getQueryParamsAsMap(){const t=new URLSearchParams(this.locationProvider.getSearch()),e=new Map;for(const[s,i]of t.entries())e.set(s.toLowerCase(),i.toLowerCase());return e}};rn.GOOGLE_REFERERS_PREFIX_LIST=["https://www.google.com","android-app://com.google.android.googlequicksearchbox","android-app://com.google.android.googlequicksearchbox/https/www.google.com","ios-app://com.google.app.ios"],rn.HOLDBACK_QUERY_PARAM="eafs_enabled",rn.HOLDBACK_ENABLED_VALUE="false";let on=rn;class an{constructor(t){this._e=t}async error(...t){await 0;const s=function(t){let e=null,s="";for(const i of t)i instanceof Error&&!e?e=hn(i):(s&&(s+=" "),s+=i);return e?s&&(e.message=s+": "+e.message):e=new Error(s),e}(t);s.reported||(this._e.getWin().document.createElement("img").src="".concat(e,"/swg/_/SubscribewithgoogleClientUi/jserror?error=")+encodeURIComponent(String(s))+"&script="+encodeURIComponent("".concat(e,"/swg/js/v1/swg.js"))+"&line="+(s.lineNumber||1)+"&trace="+encodeURIComponent(s.stack||""),s.reported=!0)}}function hn(t){const e=Object.getOwnPropertyDescriptor(t,"message");if(e&&e.writable)return t;const{lineNumber:s,message:i,reported:n,stack:r}=t,o=new Error(i);return o.lineNumber=s,o.stack=r,o.reported=n,o}const ln="swg-link";class un{constructor(t){this.se=t,this.le=t.activities(),this.ke=t.pageConfig(),this.Fe=t.dialogManager()}start(t={}){this.se.callbacks().triggerFlowStarted(ne.LINK_ACCOUNT);const e=this.se.config().windowOpenMode==oe.REDIRECT,s=t.ampReaderId?It({publicationId:this.ke.getPublicationId(),ampReaderId:t.ampReaderId}):It({publicationId:this.ke.getPublicationId()}),i=this.le.open(ln,Tt("/linkbackstart"),e?"_top":"_blank",s,{});return this.se.eventManager().logSwgEvent(o.IMPRESSION_LINK),this.Fe.popupOpened(i&&i.targetWin),Promise.resolve()}}class cn{constructor(t,e){this.se=t,this._o=e,this.xe=null,this.fo=null,this.he=t.win(),this.le=t.activities(),this.Fe=t.dialogManager(),this.Ve=t.entitlementsManager(),this.Cn=t.callbacks(),this._o||(this._o={}),this.wo=new Promise((t=>{this.fo=t}))}static configurePending(t){t.activities().onResult(ln,(async function(e){t.entitlementsManager().blockNextNotification(),t.callbacks().triggerLinkProgress(),t.dialogManager().popupClosed();try{const s=await zt(e,ft(),!1,!1);t.eventManager().logSwgEvent(o.ACTION_LINK_CONTINUE,!0),t.eventManager().logSwgEvent(o.EVENT_LINK_ACCOUNT_SUCCESS),new cn(t,s).start()}catch(s){t.entitlementsManager().unblockNextNotification(),qt(s)?(t.eventManager().logSwgEvent(o.ACTION_LINK_CANCEL,!0),t.callbacks().triggerFlowCanceled(ne.LINK_ACCOUNT)):t.eventManager().logSwgEvent(o.ACTION_LINK_CONTINUE,!0)}}))}async start(){if(this._o.saveAndRefresh)return this.t(this._o,!!this._o.linked),Promise.resolve();const t=this._o.index||"0";return this.xe=new te(this.he,this.le,Tt("/linkconfirmiframe",{},"u/"+t),It({productId:this.se.pageConfig().getProductId(),publicationId:this.se.pageConfig().getPublicationId()}),this.se.clientConfigManager().getLanguage(),!0),this.bo(),this.se.eventManager().logSwgEvent(o.EVENT_GOOGLE_UPDATED,!0),this.se.eventManager().logSwgEvent(o.IMPRESSION_GOOGLE_UPDATED,!0),this.Fe.openView(this.xe)}async bo(){try{const t=await this.xe.acceptResultAndVerify(ft(),!0,!0);this.t(t,!!t.success)}catch(t){this.he.setTimeout((()=>{throw t}))}this.Fe.completeView(this.xe)}t(t,e){this.se.eventManager().logSwgEvent(o.ACTION_GOOGLE_UPDATED_CLOSE,!0);const s=t.swgUserToken;s&&this.se.storage().set(Y,s,!0),this.Cn.triggerLinkComplete(),this.Cn.resetLinkProgress(),this.Ve.setToastShown(!0),this.Ve.unblockNextNotification(),this.Ve.reset(e),this.fo()}whenComplete(){return this.wo}}class dn{constructor(t,e){this.se=t,this.Vs=e,this.To=null,this.xe=null,this.openPromise=null,this.he=t.win(),this.le=t.activities(),this.Fe=t.dialogManager()}getRequestPromise(){return this.To}t(){this.Fe.completeView(this.xe)}async Io(t){if(this.t(),!t.linked)throw Ht("not linked");this.Fe.popupClosed(),this.se.callbacks().triggerFlowStarted(ne.LINK_ACCOUNT),this.se.eventManager().logSwgEvent(o.EVENT_SAVE_SUBSCRIPTION_SUCCESS);const e=new cn(this.se,t);return await e.start(),this.se.callbacks().triggerLinkProgress(),await e.whenComplete(),!0}async Ao(t){if(t&&t.getRequested())try{const t=await this.Vs(),e=new S;if(null==t?void 0:t.token){if(t.authCode)throw new Error("Both authCode and token are available");e.setToken(t.token)}else{if(!(null==t?void 0:t.authCode))throw new Error("Neither token or authCode is available");e.setAuthCode(t.authCode)}return this.xe.execute(e),t}catch(e){throw this.t(),e}}async start(){const t=this.le.addDefaultArguments({isClosable:!0});this.xe=new te(this.he,this.le,Tt("/linksaveiframe"),t,this.se.clientConfigManager().getLanguage(),!1,!0),this.xe.on(R,(t=>{this.To=this.Ao(t)})),this.openPromise=this.Fe.openView(this.xe,!0),this.se.eventManager().logSwgEvent(o.IMPRESSION_SAVE_SUBSCR_TO_GOOGLE);try{const t=await this.xe.acceptResultAndVerify(ft(),!0,!0);return await this.Io(t)}catch(e){if(this.t(),qt(e))return this.se.eventManager().logSwgEvent(o.ACTION_SAVE_SUBSCR_TO_GOOGLE_CANCEL,!0),this.se.callbacks().triggerFlowCanceled(ne.LINK_ACCOUNT),!1;throw e}}}class gn{constructor(t){this.ne=t.eventManager()}sendSubscriptionState(t,e){if(!ye(me,t))throw new Error("Invalid subscription state provided");if((me.SUBSCRIBER==t||me.PAST_SUBSCRIBER==t)&&!e)throw new Error("Entitlements must be provided for users with active or expired subscriptions");if(e&&!Re(e))throw new Error("Entitlements must be an Object");let s=null;e&&(s=JSON.stringify(e)),this.ne.logEvent({eventType:o.EVENT_SUBSCRIPTION_STATE,eventOriginator:u.PUBLISHER_CLIENT,isFromUserAction:null,additionalParameters:{state:t,productsOrSkus:s}})}sendEvent(t){let e=null;if(!ye(Ee,t.name)||!Se(t.name))throw new Error("Invalid user event provided("+t.name+")");if(t.data){if(!Re(t.data))throw new Error("Event data must be an Object("+t.data+")");e=Object.assign({},e,t.data)}if(ve(t.active))e||(e={}),Object.assign(e,{is_active:t.active});else if(null!=t.active)throw new Error("Event active must be a boolean");this.ne.logEvent({eventType:Se(t.name),eventOriginator:u.PUBLISHER_CLIENT,isFromUserAction:t.active,additionalParameters:e})}}class pn{constructor(t){this.se=t,this.openViewPromise=null,this.he=t.win(),this.le=t.activities(),this.Fe=t.dialogManager(),this.xe=new te(this.he,this.le,Tt("/loginiframe"),It({publicationId:t.pageConfig().getPublicationId(),productId:t.pageConfig().getProductId(),userConsent:!1}),this.se.clientConfigManager().getLanguage(),!0)}async start(){this.se.callbacks().triggerFlowStarted(ne.SHOW_LOGIN_NOTIFICATION),this.openViewPromise=this.Fe.openView(this.xe);try{await this.xe.acceptResult()}catch(t){throw this.Fe.completeView(this.xe),t}this.Fe.completeView(this.xe)}}class mn{constructor(t){this.se=t,this.openViewPromise=null,this.he=t.win(),this.le=t.activities(),this.Fe=t.dialogManager(),this.xe=new te(this.he,this.le,Tt("/loginiframe"),It({publicationId:t.pageConfig().getPublicationId(),productId:t.pageConfig().getProductId(),userConsent:!0}),this.se.clientConfigManager().getLanguage(),!0)}async start(){this.se.callbacks().triggerFlowStarted(ne.SHOW_LOGIN_PROMPT),this.openViewPromise=this.Fe.openView(this.xe);try{await this.xe.acceptResult()}catch(t){throw qt(t)?this.se.callbacks().triggerFlowCanceled(ne.SHOW_LOGIN_PROMPT):this.Fe.completeView(this.xe),t}this.Fe.completeView(this.xe)}}class En{constructor(t,e){this.Xr=t,this.ie=e}getOffers(t=this.Xr.getProductId()){if(!t)throw new Error("getOffers requires productId in config or arguments");return this.Gn(t)}async Gn(t){const e=wt("/publication/"+encodeURIComponent(this.Xr.getPublicationId())+"/offers?label="+encodeURIComponent(t));return(await this.ie.fetchCredentialedJson(e)).offers||[]}}class _n{constructor(t,e){let s,i,n;const r=t.indexOf(":");-1!=r?(i=t,s=i.substring(0,r),n=i.substring(r+1)):(s=t,i=null,n=null),this.Nn=s,this.Co=i,this.C=n,this.So=e}getPublicationId(){return this.Nn}getProductId(){return this.Co}getLabel(){return this.C}isLocked(){return this.So}}const fn="__SWG-SEEN__",wn=["CreativeWork","Article","NewsArticle","Blog","Comment","Course","HowTo","Message","Review","WebPage"],bn=new RegExp(wn.join("|"));class Tn{constructor(t){this.Ro=null,this.yo=null,this._e=Gi(t),this.Oo=new Promise(((t,e)=>{this.Ro=t,this.yo=e})),this.vo=new An(this._e),this.No=new Cn(this._e),this.Po=new Sn(this._e)}resolveConfig(){return Promise.resolve().then(this.check.bind(this)),this._e.whenReady().then(this.check.bind(this)),this.Oo}check(){if(!this.Ro||!this.yo)return null;const t=this.vo.check()||this.No.check()||this.Po.check();return t?(this.Ro(t),this.Ro=null,this.yo=null):this._e.isReady()&&(this.yo("No config could be discovered in the page"),this.Ro=null,this.yo=null),Z(t),t}}class In{checkValue(t,e){return!("string"!=typeof t&&!Array.isArray(t))&&this.Lo(this.Go(t),e)}checkSpaceDelimitedList(t,e){const s=t.split(/\s+/);return this.Lo(s,e)}Lo(t,e){for(let s of t)if(s=s.replace(/^http:\/\/schema.org\//i,""),e.includes(s))return!0;return!1}Go(t){return Array.isArray(t)?t:[t]}}class An{constructor(t){this._e=t}check(){if(!this._e.getBody())return null;const t=Rn(this._e.getRootNode(),"subscriptions-product-id");if(!t)return null;const e=Rn(this._e.getRootNode(),"subscriptions-accessible-for-free"),s=!(!e||"false"!==e.toLowerCase());return new _n(t,s)}}class Cn{constructor(t){this._e=t,this.Mo=new In}check(){if(!this._e.getBody())return null;const t=this._e.isReady(),e=Array.from(this._e.getRootNode().querySelectorAll('script[type="application/ld+json"]'));for(let s=0;s<e.length;s++){const i=e[s];if(i[fn]||!i.textContent||!t&&!Kt(i))continue;if(i[fn]=!0,!bn.test(i.textContent))continue;const n=this.Do(i);if(n)return n}return null}Do(t){let e=We(t.textContent);if(!e)return null;Array.isArray(e)||(e=[e]);let s=e;for(let i=0;i<s.length;i++){const t=s[i];if(t["@graph"]&&Array.isArray(t["@graph"])&&(s=s.concat(t["@graph"])),!this.Mo.checkValue(t["@type"],wn))continue;let e=null;const n=this.xo(t,"isPartOf");if(n)for(let s=0;s<n.length&&(e=this.Uo(n[s]),!e);s++);if(!e)continue;const r=this.Fo(this.Wo(t,"isAccessibleForFree"),!0);return new _n(e,!r)}return null}Fo(t,e){if("boolean"==typeof t)return t;if("string"==typeof t){const e=t.toLowerCase();if("false"===e)return!1;if("true"===e)return!0}return e}Uo(t){return this.Mo.checkValue(t["@type"],["Product"])?this.Wo(t,"productID"):null}xo(t,e){const s=t[e];return null==s||""===s?null:Array.isArray(s)?s:[s]}Wo(t,e){const s=this.xo(t,e),i=s&&s[0];return null==i||""===i?null:i}}class Sn{constructor(t){this._e=t,this.Bo=null,this.Co=null,this.Mo=new In}Vo(t){const e=t.querySelectorAll("[itemprop='isAccessibleForFree']");for(let s=0;e[s];s++){const t=e[s],i=t.getAttribute("content")||t.textContent;if(i&&this.zo(t,"alreadySeenForAccessInfo")){let t=null;return"true"===i.toLowerCase()?t=!0:"false"===i.toLowerCase()&&(t=!1),t}}return null}zo(t,e){for(let s=t;s&&!s[e];s=s.parentNode)if(s[e]=!0,s.hasAttribute&&s.hasAttribute("itemscope")&&s.hasAttribute("itemtype")){const t=s.getAttribute("itemtype");return this.Mo.checkSpaceDelimitedList(t,wn)}return!1}Uo(t){const e=t.querySelectorAll('[itemprop="productID"]');for(let s=0;e[s];s++){const t=e[s],i=t.getAttribute("content")||t.textContent,n=t.closest("[itemtype][itemscope]");if(!(n.getAttribute("itemtype").indexOf("http://schema.org/Product")<=-1)&&this.zo(n.parentElement,"alreadySeenForProductInfo"))return i}return null}jo(){let t=null;return null!=this.Bo?t=!this.Bo:this._e.isReady()&&(t=!1),null!=this.Co&&null!=t?new _n(this.Co,t):null}Do(){const t=Array.prototype.slice.call(this._e.getRootNode().querySelectorAll("[itemscope][itemtype]")).filter((t=>this.Mo.checkSpaceDelimitedList(t.getAttribute("itemtype"),wn)));for(const e of t){null==this.Bo&&(this.Bo=this.Vo(e)),this.Co||(this.Co=this.Uo(e));const t=this.jo();if(t)return t}return null}check(){return this._e.getBody()?this.Do():null}}function Rn(t,e){const s=t.querySelector('meta[name="'.concat(e,'"]'));return s?s.getAttribute("content"):null}const yn=Ds(ti),On=2147483647,vn={Environment:{LOCAL:"LOCAL",PREPROD:"PREPROD",PRODUCTION:"PRODUCTION",SANDBOX:"SANDBOX",TEST:"TEST",TIN:"TIN"},PaymentMethod:{CARD:"CARD",TOKENIZED_CARD:"TOKENIZED_CARD",UPI:"UPI"},AuthMethod:{CRYPTOGRAM_3DS:"CRYPTOGRAM_3DS",PAN_ONLY:"PAN_ONLY"},ResponseStatus:{CANCELED:"CANCELED",DEVELOPER_ERROR:"DEVELOPER_ERROR"},TotalPriceStatus:{ESTIMATED:"ESTIMATED",FINAL:"FINAL",NOT_CURRENTLY_KNOWN:"NOT_CURRENTLY_KNOWN"},ButtonType:{SHORT:"short",LONG:"long"},ButtonColor:{DEFAULT:"default",BLACK:"black",WHITE:"white"},Id:{POPUP_WINDOW_CONTAINER:"popup-window-container"},STORAGE_KEY_PREFIX:"google.payments.api.storage"};
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */vn.IS_READY_TO_PAY_RESULT_KEY=vn.STORAGE_KEY_PREFIX+".isreadytopay.result",vn.UPI_CAN_MAKE_PAYMENT_CACHE_KEY=vn.STORAGE_KEY_PREFIX+".upi.canMakePaymentCache",vn.CLASS_PREFIX="google-payments-",vn.IFRAME_ACTIVE_CONTAINER_CLASS="".concat(vn.CLASS_PREFIX,"activeContainer"),vn.IFRAME_CONTAINER_CLASS="".concat(vn.CLASS_PREFIX,"dialogContainer"),vn.IFRAME_STYLE_CENTER_CLASS="".concat(vn.CLASS_PREFIX,"dialogCenter"),vn.IFRAME_STYLE_CLASS="".concat(vn.CLASS_PREFIX,"dialog"),vn.IFRAME_STYLE="\n.".concat(vn.IFRAME_STYLE_CLASS," {\n    animation: none 0s ease 0s 1 normal none running;\n    background: none 0 0 / auto repeat scroll padding-box border-box #fff;\n    background-blend-mode: normal;\n    border: 0 none #333;\n    border-radius: 8px 8px 0 0;\n    border-collapse: separate;\n    bottom: 0;\n    box-shadow: #808080 0 3px 0 0, #808080 0 0 22px;\n    box-sizing: border-box;\n    letter-spacing: normal;\n    max-height: 100%;\n    overflow: visible;\n    position: fixed;\n    width: 100%;\n    z-index: ").concat(On,";\n    -webkit-appearance: none;\n    left: 0;\n}\n@media (min-width: 480px) {\n  .").concat(vn.IFRAME_STYLE_CLASS," {\n    width: 480px !important;\n    left: -240px !important;\n    margin-left: calc(100vw - 100vw / 2) !important;\n  }\n}\n.").concat(vn.IFRAME_CONTAINER_CLASS," {\n  background-color: rgba(0,0,0,0.26);\n  bottom: 0;\n  height: 100%;\n  left: 0;\n  position: absolute;\n  right: 0;\n}\n.iframeContainer {\n  -webkit-overflow-scrolling: touch;\n}\n"),vn.IFRAME_STYLE_CENTER="\n.".concat(vn.IFRAME_STYLE_CENTER_CLASS," {\n  animation: none 0s ease 0s 1 normal none running;\n  background-blend-mode: normal;\n  background: none 0 0 / auto repeat scroll padding-box border-box #fff;\n  border-collapse: separate;\n  border-radius: 8px;\n  border: 0px none #333;\n  bottom: auto;\n  box-shadow: #808080 0 0 22px;\n  box-sizing: border-box;\n  left: -240px;\n  letter-spacing: normal;\n  margin-left: calc(100vw - 100vw / 2) !important;\n  max-height: 90%;\n  overflow: visible;\n  position: absolute;\n  top: 100%;\n  transform: scale(0.8);\n  width: 480px;\n  z-index: ").concat(On,";\n  -webkit-appearance: none;\n}\n@media (min-height: 667px) {\n  .").concat(vn.IFRAME_STYLE_CENTER_CLASS," {\n    max-height: 600px;\n  }\n}\n.").concat(vn.IFRAME_ACTIVE_CONTAINER_CLASS," {\n  top: 50%;\n  transform: scale(1.0) translateY(-50%);\n}\n"),vn.GPAY_BUTTON_WITH_CARD_INFO_IMAGE="background-image: url(https://pay.google.com/gp/p/generate_gpay_btn_img);",vn.BUTTON_LOCALE_TO_MIN_WIDTH={en:152,bg:163,cs:192,de:183,es:183,fr:183,hr:157,id:186,ja:148,ko:137,ms:186,nl:167,pl:182,pt:193,ru:206,sk:157,sl:211,sr:146,tr:161,uk:207,zh:156},vn.GPAY_GRAYPANE="gpay-graypane",vn.GPAY_BUTTON_CLASS="gpay-button",vn.BUTTON_STYLE="\n.".concat(vn.GPAY_BUTTON_CLASS," {\n  background-origin: content-box;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: contain;\n  border: 0px;\n  border-radius: 4px;\n  box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 1px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n  cursor: pointer;\n  height: 40px;\n  min-height: 40px;\n  padding: 11px 24px;\n}\n\n.").concat(vn.GPAY_BUTTON_CLASS,".black {\n  background-color: #000;\n  box-shadow: none;\n  padding: 12px 24px 10px;\n}\n\n.").concat(vn.GPAY_BUTTON_CLASS,".white {\n  background-color: #fff;\n}\n\n.").concat(vn.GPAY_BUTTON_CLASS,".short {\n  min-width: 90px;\n  width: 160px;\n}\n\n.").concat(vn.GPAY_BUTTON_CLASS,".black.short {\n  background-image: url(https://www.gstatic.com/instantbuy/svg/dark_gpay.svg);\n}\n\n.").concat(vn.GPAY_BUTTON_CLASS,".white.short {\n  background-image: url(https://www.gstatic.com/instantbuy/svg/light_gpay.svg);\n}\n\n.").concat(vn.GPAY_BUTTON_CLASS,".black.active {\n  background-color: #5f6368;\n}\n\n.").concat(vn.GPAY_BUTTON_CLASS,".black.hover {\n  background-color: #3c4043;\n}\n\n.").concat(vn.GPAY_BUTTON_CLASS,".white.active {\n  background-color: #fff;\n}\n\n.").concat(vn.GPAY_BUTTON_CLASS,".white.focus {\n  box-shadow: #e8e8e8 0 1px 1px 0, #e8e8e8 0 1px 3px;\n}\n\n.").concat(vn.GPAY_BUTTON_CLASS,".white.hover {\n  background-color: #f8f8f8;\n}\n"),vn.GPAY_BUTTON_WITH_OFFER_ICON_ADDITIONAL_STYLE="position: relative;",vn.GPAY_OFFER_ICON_CLASS="gpay-offer-icon",vn.GPAY_OFFER_ICON_SVG='<svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="gpay-offer-icon"><defs><path d="M19.41,9.58 L10.41,0.58 C10.05,0.22 9.55,0 9,0 L2,0 C0.9,0 0,0.9 0,2 L0,9 C0,9.55 0.22,10.05 0.59,10.42 L9.59,19.42 C9.95,19.78 10.45,20 11,20 C11.55,20 12.05,19.78 12.41,19.41 L19.41,12.41 C19.78,12.05 20,11.55 20,11 C20,10.45 19.77,9.94 19.41,9.58 Z" id="path-1"></path></defs><g id="buttons_10.05" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Artboard" transform="translate(-40.000000, -43.000000)"><g id="Group-3" transform="translate(40.000000, 43.000000)"><g id="Group-2-Copy-2"><g id="Group-Copy"><g id="ic_loyalty_24px"><mask id="mask-2" fill="white"><use xlink:href="#path-1"></use></mask><use id="gpay-Shape" fill="#FF6100" fill-rule="nonzero" xlink:href="#path-1"></use><path d="M3.5,5 C2.67,5 2,4.33 2,3.5 C2,2.67 2.67,2 3.5,2 C4.33,2 5,2.67 5,3.5 C5,4.33 4.33,5 3.5,5 Z" id="Path" fill="#FFFFFF" fill-rule="nonzero" mask="url(#mask-2)"></path></g></g></g><g id="Group-13-Copy-7" transform="translate(6.000000, 6.000000)" fill="#FFFFFF" fill-rule="nonzero"><g id="Group-13-Copy-2"><path d="M2.15217391,4.55172414 C0.963561082,4.55172414 1.99840144e-14,3.53278598 1.99840144e-14,2.27586207 C1.99840144e-14,1.01893816 0.963561082,6.30606678e-14 2.15217391,6.30606678e-14 C3.34078674,6.30606678e-14 4.30434783,1.01893816 4.30434783,2.27586207 C4.30434783,3.53278598 3.34078674,4.55172414 2.15217391,4.55172414 Z M2.15217391,3.31034483 C2.69245247,3.31034483 3.13043478,2.84719112 3.13043478,2.27586207 C3.13043478,1.70453302 2.69245247,1.24137931 2.15217391,1.24137931 C1.61189535,1.24137931 1.17391304,1.70453302 1.17391304,2.27586207 C1.17391304,2.84719112 1.61189535,3.31034483 2.15217391,3.31034483 Z" id="Combined-Shape"></path><path d="M6.84782609,9 C5.65921326,9 4.69565217,7.98106184 4.69565217,6.72413793 C4.69565217,5.46721402 5.65921326,4.44827586 6.84782609,4.44827586 C8.03643892,4.44827586 9,5.46721402 9,6.72413793 C9,7.98106184 8.03643892,9 6.84782609,9 Z M6.84782609,7.75862069 C7.38810465,7.75862069 7.82608696,7.29546698 7.82608696,6.72413793 C7.82608696,6.15280888 7.38810465,5.68965517 6.84782609,5.68965517 C6.30754753,5.68965517 5.86956522,6.15280888 5.86956522,6.72413793 C5.86956522,7.29546698 6.30754753,7.75862069 6.84782609,7.75862069 Z" id="Combined-Shape"></path><polygon id="Rectangle" transform="translate(4.497720, 4.541938) rotate(34.000000) translate(-4.497720, -4.541938) " points="3.77901778 -0.202295978 4.9740273 -0.171019161 5.21642263 9.28617278 4.02141311 9.25489596"></polygon></g></g></g></g></g></svg>',vn.GPAY_OFFER_ICON_STYLE="\n.".concat(vn.GPAY_OFFER_ICON_CLASS," {\n  position: absolute;\n  right: -5px;\n  top: -5px;\n}\n\n#ic_loyalty_24px use.hover {\n  fill: #FC853B;\n}\n"),vn.GPAY_OFFER_DESCRIPTION_CLASS="gpay-offer-description",vn.GPAY_OFFER_DESCRIPTION_STYLE="\n@import url(//fonts.googleapis.com/css?family=Google+Sans:500);\n.".concat(vn.GPAY_OFFER_DESCRIPTION_CLASS," {\n  text-align: center;\n  font: 10px 'Google Sans';\n  margin-top: 2px;\n  margin-bottom: 0px;\n}\n\n.").concat(vn.GPAY_OFFER_DESCRIPTION_CLASS,".gpay-btn-clicked {\n  color: #3C4043;\n}\n\n.").concat(vn.GPAY_OFFER_DESCRIPTION_CLASS,".short {\n  min-width: 90px;\n  width: 160px;\n}\n\n.").concat(vn.GPAY_OFFER_DESCRIPTION_CLASS,".long {\n  min-width: 152px;\n  width: 240px;\n}\n"),vn.GPAY_BUTTON_CARD_INFO_CLASS="gpay-card-info-btn",vn.GPAY_BUTTON_CARD_INFO_BUTTON_STYLE="\n  .".concat(vn.GPAY_BUTTON_CARD_INFO_CLASS," {\n    background-origin: content-box;\n    background-position: center center;\n    background-repeat: no-repeat;\n    background-size: contain;\n    border: 0px;\n    border-radius: 4px;\n    box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 1px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n    cursor: pointer;\n    height: 40px;\n    min-height: 40px;\n    padding: 11px 24px;\n    background-color: #000;\n    box-shadow: none;\n    padding: 9px 24px 10px;\n    min-width: 190px;\n    width: 240px;\n  }\n\n  .").concat(vn.GPAY_BUTTON_CARD_INFO_CLASS,".active {\n    background-color: #5f6368;\n  }\n\n  .").concat(vn.GPAY_BUTTON_CARD_INFO_CLASS,".hover {\n    background-color: #3c4043;\n  }\n  "),vn.TRUSTED_DOMAIN=".google.com";
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
class Nn{constructor(t){this.Yo=t}postMessage(t,e){this.Yo.postMessage(t,e)}}
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */let Pn=null,Ln=null,kn=null,Gn=null,Mn=Date.now(),Dn=null,xn=!1,Un=[];class Fn{static load(){if(Pn)return;const t=window.gpayInitParams||{};kn=t.environment||vn.Environment.PRODUCTION,Pn=document.createElement("iframe"),Pn.src=Fn.Ko(window.location.origin,t.merchantInfo&&t.merchantInfo.merchantId),Fn.postMessage({eventType:15,clientLatencyStartMs:Date.now()}),Pn.height="0",Pn.width="0",Pn.style.display="none",Pn.style.visibility="hidden",Pn.onload=function(){Fn.postMessage({eventType:17,clientLatencyStartMs:Date.now()}),Fn.iframeLoaded()},document.body?Fn.qo():document.addEventListener("DOMContentLoaded",(()=>Fn.qo()))}static qo(){document.body.appendChild(Pn),Ln=new Nn(Pn.contentWindow)}static sendAndWaitForResponse(t,e,s,i){Fn.Ho((function t(e){e.data[s]&&(i(e),Fn.Jo(t))}));const n=Object.assign({eventType:e},t);Fn.postMessage(n)}static Ho(t){window.addEventListener("message",t)}static Jo(t){window.removeEventListener("message",t)}static postMessage(t){if(!xn)return void Un.push(t);const e=Object.assign({buyFlowActivityMode:Dn,googleTransactionId:Gn,originTimeMs:Mn},t);Ln.postMessage(e,Fn.$o())}static setBuyFlowActivityMode(t){Dn=t}static setGoogleTransactionId(t){Gn=t}static setOriginTimeMs(t){Mn=t}static setPostMessageService(t){Ln=t}static reset(){Pn=null,Un.length=0,xn=!1,Dn=null}static setIframeLoaded(t){xn=t}static iframeLoaded(){xn=!0,Un.forEach((function(t){Fn.postMessage(t)})),Un.length=0}static getBuffer(){return Un}static injectIframeForTesting(){Fn.reset(),Pn=document.createElement("p"),Fn.iframeLoaded()}static $o(){let t="https://pay";return kn==vn.Environment.SANDBOX?t+=".sandbox":kn==vn.Environment.PREPROD&&(t+="-preprod.sandbox"),t+".google.com"}static Ko(t,e){return"https://pay".concat(kn==vn.Environment.PREPROD?"-preprod.sandbox":kn==vn.Environment.SANDBOX?".sandbox":"",".google.com/gp/p/ui/payframe?origin=").concat(t,"&mid=%{merchantId}")}}
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */class Wn{constructor(t){this.Xo=t,this.Vs=null}onResult(t){this.Vs=t}isReadyToPay(t){const e=this.Qo(t);return new Promise(((s,i)=>{e.canMakePayment().then((e=>{window.sessionStorage.setItem(vn.IS_READY_TO_PAY_RESULT_KEY,e.toString());const i={result:e};t.apiVersion>=2&&t.existingPaymentMethodRequired&&(i.paymentMethodPresent=e),s(i)})).catch((function(t){window.sessionStorage.getItem(vn.IS_READY_TO_PAY_RESULT_KEY)?s({result:"true"==window.sessionStorage.getItem(vn.IS_READY_TO_PAY_RESULT_KEY)}):s({result:!1})}))}))}prefetchPaymentData(t){this.Qo(t,this.Xo,t.transactionInfo.currencyCode,t.transactionInfo.totalPrice)}loadPaymentData(t){this.Zo(t)}Qo(t,e,s,i){let n={};return t&&(n=JSON.parse(JSON.stringify(t))),n.apiVersion||(n.apiVersion=1),n.swg&&(n.allowedPaymentMethods=[vn.PaymentMethod.CARD]),e&&e==vn.Environment.TEST&&(n.environment=e),new PaymentRequest([{supportedMethods:["https://google.com/pay"],data:n}],{total:{label:"Estimated Total Price",amount:{currency:s||"USD",value:i||"0"}}})}Zo(t){const e=t.transactionInfo&&t.transactionInfo.currencyCode||void 0,s=t.transactionInfo&&t.transactionInfo.totalPrice||void 0,i=this.Qo(t,this.Xo,e,s);this.Vs(i.show().then((t=>(t.complete("success"),t.details))).catch((function(t){throw t.statusCode=vn.ResponseStatus.CANCELED,t})))}}
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */class Bn{constructor(t){this._e=t,this.ea=t.createElement(vn.GPAY_GRAYPANE),Vn(this.ea,{"z-index":2147483647,display:"none",position:"fixed",top:0,right:0,bottom:0,left:0,"background-color":"rgba(32, 33, 36, .6)"}),this.sa=null,this.ea.addEventListener("click",(()=>{if(this.sa)try{this.sa.focus()}catch(t){}}))}show(t){return this.sa=t||null,this._e.body.appendChild(this.ea),Vn(this.ea,{display:"block",opacity:0}),zn(this.ea,{opacity:1},300,"ease-out")}hide(){if(this.sa=null,this.ea.parentElement)return zn(this.ea,{opacity:0},300,"ease-out").then((()=>{Vn(this.ea,{display:"none"}),this._e.body.removeChild(this.ea)}))}}function Vn(t,e){for(const s in e)t.style.setProperty(s,e[s].toString(),"important")}function zn(t,e,s,i){const n=t.ownerDocument.defaultView,r=t.style.transition||"";return new Promise((r=>{n.setTimeout((()=>{n.setTimeout(r,s);const o="".concat(s,"ms ").concat(i);Vn(t,Object.assign({transition:"transform ".concat(o,", opacity ").concat(o)},e))}))})).then((()=>{Vn(t,Object.assign({transition:r},e))}))}
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function jn(){if(-1!=window.navigator.userAgent.indexOf("OPR/"))return!1;const t=window.navigator.userAgent.match(/Android/i),e=window.navigator.userAgent.match(/Chrome\/([0-9]+)\./i);return null!=t&&"PaymentRequest"in window&&"Google Inc."==window.navigator.vendor&&null!=e&&Number(e[1])>=59}function Yn(t){if(t.apiVersion>=2){const e=Qn(t);if(e&&1==e.length&&e[0]==vn.AuthMethod.CRYPTOGRAM_3DS)return!0}return 1==t.allowedPaymentMethods.length&&t.allowedPaymentMethods[0]==vn.PaymentMethod.TOKENIZED_CARD}function Kn(t,e){if(t.apiVersion>=2){const s=Qn(t);return!(!s||!s.includes(e))}return!1}function qn(){return window.location.hostname.endsWith(vn.TRUSTED_DOMAIN)||void 0===window.isSecureContext||window.isSecureContext?null:"Google Pay APIs should be called in secure context!"}function Hn(t){return Object.values(vn.PaymentMethod).includes(t)}function Jn(t){return Object.values(vn.AuthMethod).includes(t)}function $n(t){if(!t)return"paymentDataRequest must be set!";if(t.swg)return(e=t.swg)?e.skuId&&e.publicationId?null:"Both skuId and publicationId must be provided":"Swg parameters must be provided";var e;if(!t.transactionInfo)return"transactionInfo must be set!";if(!t.transactionInfo.currencyCode)return"currencyCode in transactionInfo must be set!";if(!t.transactionInfo.totalPriceStatus||!Object.values(vn.TotalPriceStatus).includes(t.transactionInfo.totalPriceStatus))return"totalPriceStatus in transactionInfo must be set to one of NOT_CURRENTLY_KNOWN, ESTIMATED or FINAL!";if("NOT_CURRENTLY_KNOWN"!==t.transactionInfo.totalPriceStatus&&!t.transactionInfo.totalPrice)return"totalPrice in transactionInfo must be set when totalPriceStatus is ESTIMATED or FINAL!";const s=Xn(t);if(s){if(!s.parameters)return"parameters must be set in allowedPaymentMethod!";var i=s.parameters;if(!i.payeeVpa)return"payeeVpa in allowedPaymentMethod parameters must be set!";if(!i.payeeName)return"payeeName in allowedPaymentMethod parameters must be set!";if(!i.referenceUrl)return"referenceUrl in allowedPaymentMethod parameters must be set!";if(!i.mcc)return"mcc in allowedPaymentMethod parameters must be set!";if(!i.transactionReferenceId)return"transactionReferenceId in allowedPaymentMethod parameters must be set!";if("INR"!==t.transactionInfo.currencyCode)return"currencyCode in transactionInfo must be set to INR!";if("FINAL"!==t.transactionInfo.totalPriceStatus)return"totalPriceStatus in transactionInfo must be set to FINAL!";if(!t.transactionInfo.transactionNote)return"transactionNote in transactionInfo must be set!"}return null}function Xn(t){return!jn()||t.apiVersion<2||!t.allowedPaymentMethods?null:Zn(t,vn.PaymentMethod.UPI)}function Qn(t){if(t.allowedPaymentMethods){const e=Zn(t,vn.PaymentMethod.CARD);if(e&&e.parameters)return e.parameters.allowedAuthMethods}return null}function Zn(t,e){for(var s=0;s<t.allowedPaymentMethods.length;s++){const i=t.allowedPaymentMethods[s];if(i.type==e)return i}return null}
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
const{ActivityPort:tr,ActivityPorts:er,ActivityIframePort:sr}=yn,ir="GPAY",nr="height ".concat(250,"ms"),rr="Safari";class or{constructor(t,e,s,i,n){this.Xo=t,this.activities=i||new er(window),this.jn=new Bn(window.document),this.Vs=null,this.ia=null,this.na=!1,this.Ee=null,this.ra=null,this.oa=e,this.aa=n||null,this.ha=null}onResult(t){this.Vs||(this.Vs=t,this.activities.onResult(ir,this.la.bind(this)))}la(t){this.jn.hide(),this.Vs(t.acceptResult().then((t=>{if(t.origin!=this.ua())throw new Error("channel mismatch");const e=t.data;if(e.redirectEncryptedCallbackData)return Fn.setBuyFlowActivityMode(3),this.ca(e.redirectEncryptedCallbackData).then((t=>{const s=Object.assign({},e);return delete s.redirectEncryptedCallbackData,Object.assign(s,t)}));if(!t.originVerified||!t.secureChannel)throw new Error("channel mismatch");return e}),(t=>{const e=t.message;let s=t.message;try{s=JSON.parse(e.substring(7))}catch(i){}return s.statusCode&&-1==["DEVELOPER_ERROR","MERCHANT_ACCOUNT_ERROR"].indexOf(s.statusCode)&&(s={statusCode:"CANCELED"}),"AbortError"==s&&(s={statusCode:"CANCELED"}),Promise.reject(s)})))}ca(t){return new Promise(((e,s)=>{const i=this.ma(),n=new XMLHttpRequest;n.open("POST",i,!0),"withCredentials"in n&&(n.withCredentials=!0),n.onreadystatechange=()=>{if(!(n.readyState<2)){if(n.status<100||n.status>599)return n.onreadystatechange=null,void s(new Error("Unknown HTTP status ".concat(n.status)));if(4==n.readyState)try{e(JSON.parse(n.responseText))}catch(t){s(t)}}},n.onerror=()=>{s(new Error("Network failure"))},n.onabort=()=>{s(new Error("Request aborted"))},n.send(t)}))}isReadyToPay(t){return new Promise(((e,s)=>{if(Yn(t))return void e({result:!1});const i=window.navigator.userAgent;if(i.indexOf("GSA/")>0&&i.indexOf(rr)>0)return void e({result:!1});if(i.indexOf("FxiOS")>0)return void e({result:!1});const n=i.indexOf("Chrome")>0||i.indexOf("Firefox")>0||i.indexOf(rr)>0;n&&t.apiVersion>=2&&t.existingPaymentMethodRequired?(t.environment=this.Xo,Fn.sendAndWaitForResponse(t,6,"isReadyToPayResponse",(s=>{const i={result:n};t.existingPaymentMethodRequired&&(i.paymentMethodPresent="READY_TO_PAY"==s.data.isReadyToPayResponse),e(i)}))):e({result:n})}))}prefetchPaymentData(t){}loadPaymentData(t){t.swg||t.apiVersion||(t.apiVersion=1),t.environment=this.Xo,Fn.setBuyFlowActivityMode(t.forceRedirect?3:2);const e=this.activities.open(ir,this.Ea(this._a(t)),this.fa(t),t,{width:600,height:600});this.jn.show(e&&e.targetWin)}fa(t){return t.forceRedirect?"_top":"gp-js-popup"}ua(){if(this.Xo==vn.Environment.LOCAL)return"";let t;return t=this.Xo==vn.Environment.PREPROD?"pay-preprod.sandbox":this.Xo==vn.Environment.SANDBOX?"pay.sandbox":"pay","https://"+t+".google.com"}wa(){return this.ua()+"/gp/p"}ma(){let t=this.wa()+"/apis/buyflow/process";return this.aa&&(t+="?rk="+encodeURIComponent(this.aa)),t}_a(t){const e=t.swg;if(e)return e.swgVersion}Ea(t){if(this.Xo==vn.Environment.TIN)return"/ui/pay";let e=this.wa()+"/ui/pay?swg=true";return t&&(e=e+"&swgVersion="+t),e}getIframeUrl(t,e,s){let i="https://pay.google.com/gp/p/ui/pay?origin=".concat(e,"&swg=true");return t!=vn.Environment.SANDBOX&&t!=vn.Environment.PREPROD||(i="https://pay'+  (environment == Constants.Environment.PREPROD ? '-preprod' : '')+  '.sandbox.google.com/gp/p/ui/pay?origin=".concat(e,"&swg=true")),s&&(i=i+"&swgVersion="+s),i}ba(t,e){this.Ta(e,"all 250ms ease 0s"),e.height="0px",setTimeout((()=>{t.parentNode&&t.parentNode.removeChild(t)}),250)}Ia(t){const e=function(t){const e=document.createElement("div");e.classList.add(vn.IFRAME_CONTAINER_CLASS);const s=document.createElement("div");s.classList.add("iframeContainer");const i=document.createElement("iframe");return i.classList.add(t),i.setAttribute("frameborder","0"),i.setAttribute("scrolling","no"),s.appendChild(i),e.appendChild(s),document.body.appendChild(e),{container:e,iframe:i}}(this.Aa(t)?vn.IFRAME_STYLE_CENTER_CLASS:vn.IFRAME_STYLE_CLASS),s=e.iframe,i=e.container;return i.addEventListener("click",this.Ca.bind(this,e)),i.style.display="none",s.style.display="none",s.height="0px",this.Ta(s,"all 250ms ease 0s"),this.na=!1,e}Sa(t){this.Ra(t)}Ca(t){t.container.parentNode&&history.back()}Ra(t){t.container.parentNode&&(this.ra(Promise.reject({errorCode:"CANCELED"})),this.ba(t.container,t.iframe),this.Ee&&this.Ee.disconnect())}Aa(t){return null}ya(t,e,s){t.style.display="block",e.style.display="block",setTimeout((()=>{e.height="280px",this.Aa(s)&&e.classList.add(vn.IFRAME_ACTIVE_CONTAINER_CLASS),setTimeout((()=>{this.na=!0,this.ha&&(this.Ta(e,this.ha.transition),e.height=this.ha.height,this.ha=null)}),250)}),1)}Ta(t,e){t.style.setProperty("transition",e),t.style.setProperty("-webkit-transition",e)}Oa(t,e,s){let i;s.swg||s.apiVersion||(s.apiVersion=1),s.environment=this.Xo;const n=this.getIframeUrl(this.Xo,window.location.origin,this._a(s));return this.activities.openIframe(e,n,s).then((t=>(this.Ee=t,t.onMessage((t=>{"resize"===t.type&&this.na?(i||(i=Date.now()),Date.now()<i+250?this.Ta(e,t.transition+", "+nr):this.Ta(e,t.transition),e.height=t.height):this.ha={height:t.height,transition:t.transition}})),t.acceptResult()))).then((s=>(this.ba(t,e),history.back(),s.data)),(s=>(this.ba(t,e),history.back(),Promise.reject(s))))}}
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */class ar{constructor(){}isUpiRequest(t){return!!Xn(t)}isReadyToPay(t){if(Xn(t))return t.existingPaymentMethodRequired?Promise.resolve({result:!0,paymentMethodPresent:!0}):Promise.resolve({result:!0});throw new Error("No Upi payment method found in handler")}loadPaymentData(t,e,s){const i=e.parameters,n=t.transactionInfo,r=[{supportedMethods:["https://tez.google.com/pay"],data:{pa:i.payeeVpa,pn:i.payeeName,tr:i.transactionReferenceId,url:i.referenceUrl,mc:i.mcc,tn:n.transactionNote}}];i.transactionId&&(r[0].data.tid=i.transactionId);const o={total:{label:"Total",amount:{currency:n.currencyCode,value:n.totalPrice}},displayItems:[{label:"Original Amount",amount:{currency:n.currencyCode,value:n.totalPrice}}]};let a=new PaymentRequest(r,o);s(this.va(a).then((t=>t?this.Na(a):this.Pa())).then((s=>this.La(s,t,e))).catch((t=>(t.statusCode=vn.ResponseStatus.CANCELED,Promise.reject(t)))))}Na(t){return t.show().then((t=>(t.complete("success"),t.details)))}va(t){const e=window.sessionStorage.getItem(vn.UPI_CAN_MAKE_PAYMENT_CACHE_KEY);return e?Promise.resolve("true"===e):t.canMakePayment?t.canMakePayment().then((t=>(t&&window.sessionStorage.setItem(vn.UPI_CAN_MAKE_PAYMENT_CACHE_KEY,t.toString()),t))):Promise.resolve(!0)}Pa(){return window.location.replace("https://play.google.com/store/apps/details?id=com.google.android.apps.nbu.paisa.user"),Promise.reject({errorMessage:"Cannot redirect to Tez page in Google Play."})}La(t,e,s){const i=JSON.parse(t.tezResponse);if("FAILURE"===i.Status){let t;switch(i.responseCode){case"ZM":t={errorCode:3,errorMessage:"Payment failure due to invalid MPIN."};break;case"Z9":t={errorCode:3,errorMessage:"Payment failure due to insufficient funds."};break;case"91":t={errorCode:1,errorMessage:"Payment failure due to transaction timeout or connection issue."};break;default:t={errorMessage:"Payment cancelled."}}return Promise.reject(t)}const n={paymentMethodType:"UPI",payeeVpa:s.parameters.payeeVpa,status:i.Status,transactionReferenceId:s.parameters.transactionReferenceId,transactionId:s.parameters.transactionId?s.parameters.transactionId:i.txnId,transactionInfo:e.transactionInfo};let r={apiVersion:e.apiVersion,apiVersionMinor:e.apiVersionMinor,paymentMethodData:{type:s.type,tokenizationData:{type:"DIRECT",token:{protocolVersion:"ECv1",signature:"",signedMessage:n}}}};return Promise.resolve(r)}}
/** @license
  Math.uuid.js (v1.4)
  http://www.broofa.com
  mailto:robert@broofa.com
  Copyright (c) 2010 Robert Kieffer
  Dual licensed under the MIT and GPL licenses.
  */class hr{}var lr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");hr.uuid=function(t,e){var s,i,n=lr,r=[];if(e=e||n.length,t)for(s=0;s<t;s++)r[s]=n[0|Math.random()*e];else for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",s=0;s<36;s++)r[s]||(i=0|16*Math.random(),r[s]=n[19==s?3&i|8:i]);return r.join("")},hr.uuidFast=function(){for(var t,e=lr,s=new Array(36),i=0,n=0;n<36;n++)8==n||13==n||18==n||23==n?s[n]="-":14==n?s[n]="4":(i<=2&&(i=33554432+16777216*Math.random()|0),t=15&i,i>>=4,s[n]=e[19==n?3&t|8:t]);return s.join("")},hr.uuidCompact=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))};
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
const{ActivityPorts:ur}=yn,cr=["actions.google.com","amp-actions.sandbox.google.com","amp-actions-staging.sandbox.google.com","amp-actions-autopush.sandbox.google.com","payments.developers.google.com","payments.google.com"];class dr{constructor(t,e,s,i){
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
var n;this.ka=e,function(t){if(t.environment&&!Object.values(vn.Environment).includes(t.environment))throw new Error("Parameter environment in PaymentOptions can optionally be set to PRODUCTION, otherwise it defaults to TEST. "+t.environment)}(t),this.Ga=null,this.Xo=t.environment||vn.Environment.TEST,dr.oa||(dr.oa=this.Ma()&&t.i&&t.i.googleTransactionId?t.i.googleTransactionId:(n=this.Xo,hr.uuidFast()+"."+n)),this.Da=t,this.xa=new or(this.Xo,dr.oa,s,i,t.i&&t.i.redirectKey),this.Ua=5;const r=jn();this.Fa=r&&!s?new Wn(this.Xo):this.xa,this.Wa=new ar,this.xa.onResult(this.Ba.bind(this)),this.Fa.onResult(this.Ba.bind(this)),Fn.load(),r&&Fn.setBuyFlowActivityMode(4),Fn.setGoogleTransactionId(dr.oa),Fn.postMessage({eventType:9,clientLatencyStartMs:Date.now()}),window.addEventListener("message",(t=>this.Va(t)))}isReadyToPay(t){t&&(t=Object.assign({},this.Da,t));const e=Date.now(),s=qn()||function(t){if(!t)return"isReadyToPayRequest must be set!";if(t.apiVersion>=2){if(!("apiVersionMinor"in t))return"apiVersionMinor must be set!";if(!t.allowedPaymentMethods||!Array.isArray(t.allowedPaymentMethods)||0==t.allowedPaymentMethods.length)return"for v2 allowedPaymentMethods must be set to an array containing a list of accepted payment methods";for(var e=0;e<t.allowedPaymentMethods.length;e++){let n=t.allowedPaymentMethods[e];if(n.type==vn.PaymentMethod.CARD){if(!n.parameters)return"Field parameters must be setup in each allowedPaymentMethod";var s=n.parameters.allowedCardNetworks;if(!s||!Array.isArray(s)||0==s.length)return"allowedCardNetworks must be setup in parameters for type CARD";var i=n.parameters.allowedAuthMethods;if(!i||!Array.isArray(i)||0==i.length||!i.every(Jn))return"allowedAuthMethods must be setup in parameters for type 'CARD'  and must contain 'CRYPTOGRAM_3DS' and/or 'PAN_ONLY'"}}return null}return t.allowedPaymentMethods&&Array.isArray(t.allowedPaymentMethods)&&0!=t.allowedPaymentMethods.length&&t.allowedPaymentMethods.every(Hn)?null:"allowedPaymentMethods must be set to an array containing 'CARD' and/or 'TOKENIZED_CARD'!"}(t);if(s)return new Promise(((t,e)=>{dr.za("isReadyToPay",s),Fn.postMessage({eventType:0,error:2}),e({statusCode:vn.ResponseStatus.DEVELOPER_ERROR,statusMessage:s})}));const i=this.Ya(t);return i.then((t=>(Fn.postMessage({eventType:0,clientLatencyStartMs:e,isReadyToPayApiResponse:t}),t))),i}Ya(t){if(this.Wa.isUpiRequest(t))return this.Wa.isReadyToPay(t);if(jn()&&!gr(t)){if(t.apiVersion>=2)return this.Ka(t);{const e=this.xa.isReadyToPay(t),s=this.Fa.isReadyToPay(t);return Yn(t)?s:s.then((()=>e))}}return this.xa.isReadyToPay(t)}Ka(t){let e=Promise.resolve({result:!1});t.existingPaymentMethodRequired&&(e=Promise.resolve({result:!1,paymentMethodPresent:!1}));let s=e;if(Kn(t,vn.AuthMethod.CRYPTOGRAM_3DS)){const e=JSON.parse(JSON.stringify(t));for(let t=0;t<e.allowedPaymentMethods.length;t++)e.allowedPaymentMethods[t].type==vn.PaymentMethod.CARD&&(e.allowedPaymentMethods[t].parameters.allowedAuthMethods=[vn.AuthMethod.CRYPTOGRAM_3DS]);s=this.Fa.isReadyToPay(e)}let i=e;return Kn(t,vn.AuthMethod.PAN_ONLY)&&(i=this.xa.isReadyToPay(t)),s.then((t=>1==(t&&t.result)?t:i))}prefetchPaymentData(t){const e=qn()||$n(t);e?dr.za("prefetchPaymentData",e):(this.qa(t),jn()&&!gr(t)?this.Fa.prefetchPaymentData(t):this.xa.prefetchPaymentData(t))}loadPaymentData(t){Fn.postMessage({eventType:5});const e=qn()||$n(t);if(this.Ua=t&&t.swg?6:5,e)return void this.ka(new Promise(((t,s)=>{Fn.postMessage({eventType:1,error:2,buyFlowMode:this.Ua}),dr.za("loadPaymentData",e),s({statusCode:vn.ResponseStatus.DEVELOPER_ERROR,statusMessage:e})})));const s=Xn(t);s?this.Wa.loadPaymentData(t,s,this.Ba.bind(this)):(this.Ga=Date.now(),this.qa(t),gr(t)?this.xa.loadPaymentData(t):this.Fa.loadPaymentData(t))}static za(t,e){console.error("DEVELOPER_ERROR in "+t+" : "+e)}createButton(t={}){const e=Date.now();return Fn.postMessage({eventType:2,clientLatencyStartMs:e}),null}Va(t){this.Ma()&&"logPaymentData"===t.data.name&&Fn.postMessage(t.data.data)}Ma(){return-1!=cr.indexOf(window.location.hostname)}Ba(t){t.then((t=>{Fn.postMessage({eventType:1,clientLatencyStartMs:this.Ga,buyFlowMode:this.Ua})})).catch((t=>{t.errorCode?Fn.postMessage({eventType:1,error:t.errorCode,buyFlowMode:this.Ua}):Fn.postMessage({eventType:1,error:6,buyFlowMode:this.Ua})})),this.ka(t)}qa(t){const e={startTimeMs:Date.now(),googleTransactionId:dr.oa};return t.i=t.i?Object.assign(e,t.i):e,t}}function gr(t){return!0===(t.i&&t.i.disableNative)}class pr{constructor(t){this._e=t}preconnect(t){this.Ha(t,"preconnect")}prefetch(t){this.Ha(t,"preconnect prefetch")}Ha(t,e){const s=jt(this._e,"link",{rel:e,href:t});this._e.head.appendChild(s)}}class mr{constructor(t){this.Ja=null,this._o=null,this.$a=null,this.Xa=null,this.he=t.win(),this.le=t.activities(),this.Qa=t.analytics(),this.Za=new Er(this.he),this.eh=new pr(this.he.document),this.sh()&&(this.preconnect(this.eh),this.ih()),this.Za.prepare(),this.ne=t.eventManager()}nh(t,e,s){return dr.oa=e,new dr(t,s,!1,this.le.getOriginalWebActivityPorts())}preconnect(t){t.prefetch("https://payments.google.com/payments/v4/js/integrator.js?ss=md"),t.prefetch("https://clients2.google.com/gr/gr_full_2.0.6.js")}ih(){this.Ja=this.nh({environment:_t().payEnv,i:{redirectKey:this.Za.restoreKey()}},this.Qa.getTransactionId(),this.rh.bind(this))}sh(){const t=this.he.location.hash,e=/redirectEncryptedCallbackData/.test(t),s=/swgRequest/.test(t);return e&&s}getType(){return"PAYJS"}start(t,e={}){let s;this.Xa=t,this.Ja||(this.preconnect(this.eh),this.ih()),e.forceRedirect&&(t.forceRedirect=!0),_r(t,"disableNative",!0),_r(t,"disableNgbf",!0);const i=new Promise((t=>{s=t}));return this.Za.useVerifier((async i=>{i&&_r(t,"redirectVerifier",i),e.forceRedirect&&(await this.ne.getReadyPromise(),await this.Qa.getLoggingPromise()),this.Ja.loadPaymentData(t),s(!0)})),i}async onResponse(t){this.$a=t,this._o&&(await 0,t(this.oh(this._o,this.Xa)))}rh(t){this._o=t,this.$a&&this.$a(this.oh(this._o,this.Xa))}async oh(t,e){try{const s=await t;return e&&(s.paymentRequest=e),s}catch(s){const t=s;if("object"==typeof t&&"CANCELED"===t.statusCode){const t=Ht("Cancelled");throw t.productType=e?e.i.productType:null,t}throw t}}}class Er{constructor(t){this.he=t,this.ah=null,this.hh=null}prepare(){return this.uh((()=>{}))}useVerifier(t){this.uh((e=>{if(e)try{this.he.localStorage.setItem(J,e.key)}catch{e=null}t(e&&e.verifier||null)}))}restoreKey(){try{return this.he.localStorage&&this.he.localStorage.getItem(J)||null}catch{return null}}async uh(t){this.ah||(this.dh()?(this.ah=this.gh(),this.hh=await this.ah):(this.ah=Promise.resolve(null),this.hh=null)),t(this.hh)}dh(){let t;try{t=!!this.he.localStorage}catch{return!1}const e=this.he.crypto;return!!(t&&e&&e.subtle&&e.subtle.digest)}async gh(){const t=this.he.crypto;try{const e=new Uint8Array(16);t.getRandomValues(e);const s=btoa(Me(e)),i=await t.subtle.digest({name:"SHA-384"},Ge(s));return{key:s,verifier:btoa(Me(new Uint8Array(i)))}}catch{return null}}}function _r(t,e,s){t.i=Object.assign(t.i||{},{[e]:s})}var fr=(t=>(t.GENERAL="general",t.PAYWALL="paywall",t))(fr||{});class wr{constructor(t,e,s){this.he=t,this.se=e,this.ie=s,this.ph=null,this.mh=1,this.Nn=this.se.pageConfig().getPublicationId(),this.se.eventManager().registerEventListener(this.oe.bind(this))}Eh(){return this.he.document.cookie}_h(){if(!this.ph){const t=this.Eh().match("(^|;)\\s*__gads\\s*=\\s*([^;]+)");this.ph=t&&encodeURIComponent(t.pop())}return this.ph}fh(t){t=ht(t,"u_tz","240"),t=ht(t,"v",String(this.mh));const e=this._h();return e&&(t=ht(t,"cookie",e)),ht(t,"cdm",this.he.location.hostname)}sendSubscriptionState(t,e){let s=bt("/subopt/data");return s=ht(s,"states",this.Nn+":"+t),e&&(s=ht(s,"extrainfo",e)),this.ie.fetch(this.fh(s),{method:"GET",credentials:"include"})}wh(t,e){let s=bt("/subopt/data");return s=ht(s,"events",this.Nn+":"+t),e&&(s=ht(s,"extrainfo",e)),this.ie.fetch(this.fh(s),{method:"GET",credentials:"include"})}oe(t){if(t.eventOriginator===u.SHOWCASE_CLIENT)return;if(!this.se.config().enablePropensity&&t.eventOriginator!==u.PROPENSITY_CLIENT)return;let e=t.additionalParameters;if(t.eventType===o.EVENT_SUBSCRIPTION_STATE)return void this.sendSubscriptionState(e.state,e.productsOrSkus);const s=(i=t.eventType)&&fe[i]||null;var i;null!=s&&(e instanceof A&&(e=void 0),ve(t.isFromUserAction)&&(Re(e)||(e={}),e.is_active=t.isFromUserAction),this.wh(s,JSON.stringify(e)))}bh(t){if(!t.header)return{header:{ok:!1},body:{error:"No valid response"}};if(t.header.ok){let e=null;const s=t.scores,i=[];for(let t=0;t<s.length;t++){const n=s[t];let r;if(n.score){const t={value:n.score,bucketed:2==n.score_type};r={product:n.product,score:t}}else r={product:n.product,error:n.error_message};i.push(r),e={header:{ok:!0},body:{scores:i}}}return e}return{header:{ok:!1},body:{error:t.error}}}async getPropensity(t,e){const s=bt("/subopt/pts?products=")+this.Nn+"&type="+e+"&ref="+t,i=await this.ie.fetch(this.fh(s),{method:"GET",credentials:"include"}),n=await i.json();return this.bh(n)}}class br{constructor(t,e,s){this.he=t,this.Th=new wr(t,e,s),this.ne=e.eventManager()}sendSubscriptionState(t,e){if(!Object.values(me).includes(t))throw new Error("Invalid subscription state provided");if((me.SUBSCRIBER==t||me.PAST_SUBSCRIBER==t)&&!e)throw new Error("Entitlements must be provided for users with active or expired subscriptions");if(e&&!Re(e))throw new Error("Entitlements must be an Object");let s=null;e&&(s=JSON.stringify(e)),this.Th.sendSubscriptionState(t,s)}getPropensity(t){if(t&&!Object.values(fr).includes(t))throw new Error("Invalid propensity type requested");return t||(t=fr.GENERAL),this.Th.getPropensity(this.he.document.referrer,t)}sendEvent(t){const e=Se(t.name);let s=null;if(!ye(Ee,t.name)||!e)throw new Error("Invalid user event provided("+t.name+")");if(t.data){if(!Re(t.data))throw new Error("Event data must be an Object("+t.data+")");s={},Object.assign(s,t.data)}if(ve(t.active))s||(s={}),Object.assign(s,{is_active:t.active});else if(null!=t.active)throw new Error("Event active must be a boolean");this.ne.logEvent({eventType:e,eventOriginator:u.PROPENSITY_CLIENT,isFromUserAction:t.active,additionalParameters:s})}}class Tr{constructor(t){this.se=t,this.Ih=()=>{},this.le=t.activities(),this.he=t.win(),this.ke=t.pageConfig(),this.Fe=t.dialogManager()}getRenderPromise(){return this.Ah}async startMultipleLinks(t){const{linkTo:e}=t;if(!e||0===e.length)throw new Error("Missing required field: linkTo");const s=this.ke.getPublicationId(),i=e.map((t=>encodeURIComponent("".concat(t.publicationId,",").concat(t.publisherProvidedId)))).join("&linkTo="),n=It({publicationId:s}),r=Tt("/linksaveiframe",{subscriptionLinking:"true"})+"&linkTo=".concat(i),a=new te(this.he,this.le,r,n,this.se.clientConfigManager().getLanguage(),!1);a.onCancel((()=>this.onCancel(e))),a.on(G,this.onResponse.bind(this));const h=new Promise((t=>this.Ih=t));try{this.se.eventManager().logSwgEvent(o.IMPRESSION_SUBSCRIPTION_LINKING_LOADING);const t={desktopConfig:{isCenterPositioned:!1}};return this.Ah=this.Fe.openView(a,!1,t),await this.Ah,this.se.eventManager().logSwgEvent(o.IMPRESSION_SUBSCRIPTION_LINKING_COMPLETE),h}catch(l){throw this.se.eventManager().logSwgEvent(o.IMPRESSION_SUBSCRIPTION_LINKING_ERROR),l}}onResponse(t){const e=t.getSuccess()?o.EVENT_SUBSCRIPTION_LINKING_SUCCESS:o.EVENT_SUBSCRIPTION_LINKING_FAILED;this.se.eventManager().logSwgEvent(e);const s=t.getLinkResultsList()||[];this.Ih({anyFailure:!t.getSuccess(),anySuccess:s.filter((t=>t.getSuccess())).length>0,links:s.map((t=>({publicationId:t.getSwgPublicationId(),publisherProvidedId:t.getPublisherProvidedId(),success:!!t.getSuccess()})))})}onCancel(t){const e=o.ACTION_SUBSCRIPTION_LINKING_CLOSE;this.se.eventManager().logSwgEvent(e,!0),this.Ih({anyFailure:!0,anySuccess:!1,links:t.map((t=>({publicationId:t.publicationId,publisherProvidedId:t.publisherProvidedId,success:!1})))})}async start(t){const{publisherProvidedId:e}=t;if(!e)throw new Error("Missing required field: publisherProvidedId");const s={linkTo:[{publicationId:this.ke.getPublicationId(),publisherProvidedId:e}]};return this.startMultipleLinks(s).then((t=>({publisherProvidedId:e,success:!t.anyFailure})))}}class Ir{constructor(t,e){this.Ch=e,this.openViewPromise=null,this.he=t.win(),this.le=t.activities(),this.Fe=t.dialogManager(),this.Ch||(this.Ch=Promise.reject("No account promise provided")),this.xe=new te(this.he,this.le,Tt("/waitforsubscriptionlookupiframe"),It({publicationId:t.pageConfig().getPublicationId(),productId:t.pageConfig().getProductId()}),t.clientConfigManager().getLanguage(),!0,!0)}async start(){this.openViewPromise=this.Fe.openView(this.xe);try{const t=await this.Ch;return this.Fe.completeView(this.xe),t}catch(t){throw this.Fe.completeView(this.xe),t}}}class Ar{constructor(t,e,s,n,r,a=0){this.Sh=a,this.Rh=null,this.yh=null,(s=s||{}).configPromise||(s.configPromise=Promise.resolve()),this.ne=new oi(s.configPromise),this._e=Gi(t),this.he=this._e.getWin(),this.Xr={windowOpenMode:"auto",analyticsMode:0,enableSwgAnalytics:!1,enablePropensity:!1},n&&this.Oh(n),this.ke=e,this.Nh=this._e.whenReady(),this.Ph=new an(this._e),this.ie=s.fetcher||new pe(this.he),this.re=new _s(this.he,this.ke),this.Cn=new gi,s.enableGoogleAnalytics&&(this.Lh=new Pe(this),this.Lh.start()),this.le=new ii(this),this.Ge=new di(this),this.Le=new mr(this),this.kh=new gn(this),this.Ve=new en(this.he,this.ke,this.ie,this,s.enableDefaultMeteringHandler||!1),this.Me=new Si(this,e.getPublicationId(),this.ie,r),this.Fe=new zi(this._e,this.Me),this.Gh=new br(this.he,this,this.ie),this.ne.logSwgEvent(o.IMPRESSION_PAGE_LOAD,!1),this.Mh=new En(this.ke,this.ie),this.Dh=new Ns(this._e,Promise.resolve(this));const h=new pr(this.he.document);h.prefetch("".concat(i,"/loader.svg")),h.preconnect("https://www.gstatic.com/"),h.preconnect("https://www.google.com/"),cn.configurePending(this),$e.configurePending(this),Yt(this._e,vi),this.le.onRedirectError((t=>{this.Ge.addLabels(["redirect"]),this.ne.logSwgEvent(o.EVENT_PAYMENT_FAILED,!1),this.Ph.error("Redirect error",t)}))}creationTimestamp(){return this.Sh}doc(){return this._e}win(){return this.he}pageConfig(){return this.ke}jserror(){return this.Ph}activities(){return this.le}payClient(){return this.Le}dialogManager(){return this.Fe}entitlementsManager(){return this.Ve}callbacks(){return this.Cn}storage(){return this.re}clientConfigManager(){return this.Me}analytics(){return this.Ge}init(){}configure(t){this.Oh(t)}Oh(t){let e="";for(const i in t){const n=t[i];switch(i){case"windowOpenMode":n!=oe.AUTO&&n!=oe.REDIRECT&&(e="Unknown windowOpenMode: "+n);break;case"experiments":for(const t of n)s=t,ds(this.he)[s]=!0;this.analytics()&&this.analytics().addLabels(n);break;case"analyticsMode":n!=re.DEFAULT&&n!=re.IMPRESSIONS&&(e="Unknown analytics mode: "+n);break;case"enableSwgAnalytics":ve(n)||(e="enableSwgAnalytics must be a boolean, type: "+typeof n);break;case"enablePropensity":ve(n)||(e="enablePropensity must be a boolean, type: "+typeof n);break;case"skipAccountCreationScreen":ve(n)||(e="skipAccountCreationScreen must be a boolean, type: "+typeof n);break;case"publisherProvidedId":null==n||"string"==typeof n&&""!=n||(e="publisherProvidedId must be a string, value: "+n);break;case"paySwgVersion":if("string"!=typeof n){e="paySwgVersion must be a string, type: "+typeof n;break}break;default:e="Unknown config property: "+i}}var s;st(!e,e||void 0),Object.assign(this.Xr,t)}config(){return this.Xr}reset(){this.Ve.reset(),this.closeDialog()}clear(){this.Ve.clear(),this.closeDialog()}closeDialog(){this.Fe.completeAll()}start(){if(!this.ke.getProductId()||!this.ke.isLocked())return Promise.resolve();this.getEntitlements()}async getEntitlements(t){(null==t?void 0:t.publisherProvidedId)&&(t.publisherProvidedId=this.Ut);const e=this.Ve.getEntitlements(t);this.clientConfigManager().fetchClientConfig(e);const s=await e;if(this.Ge.setReadyForLogging(),this.Ge.start(),s)try{const t=s.entitlements.map((t=>t.getSku()||"unknown subscriptionToken"));t.length>0&&this.Ge.setSku(t.join(","))}catch{}const i=await this.Ve.getExperimentConfigFlags().then((t=>t.includes(r.BACKGROUND_CLICK_BEHAVIOR_EXPERIMENT)));return this.Fe.setEnableBackgroundClickExperiment(i),s.clone()}setOnEntitlementsResponse(t){this.Cn.setOnEntitlementsResponse(t)}getOffers(t){return this.Mh.getOffers(t&&t.productId)}async showOffers(t){return await this.Nh,st(!t||!t.oldSku,"The showOffers() method cannot be used to update a subscription. Use the showUpdateOffers() method instead."),this.Rh=new Ls(this,t),this.Rh.start()}async showUpdateOffers(t){return await this.Nh,st(!!t&&!!t.oldSku,"The showUpdateOffers() method cannot be used for new subscribers. Use the showOffers() method instead."),new Ls(this,t).start()}async showSubscribeOption(t){return await this.Nh,new ks(this,t).start()}async showAbbrvOffer(t){return await this.Nh,new Gs(this,t).start()}async showContributionOptions(t){return await this.Nh,this.yh=new Ri(this,t),this.yh.start()}getLastContributionsFlow(){return this.yh}async waitForSubscriptionLookup(t){return await this.Nh,new Ir(this,t).start()}setOnLoginRequest(t){this.Cn.setOnLoginRequest(t)}triggerLoginRequest(t){this.Cn.triggerLoginRequest(t)}setOnLinkComplete(t){this.Cn.setOnLinkComplete(t)}async linkAccount(t){return await this.Nh,new un(this).start(t)}async saveSubscription(t){return await this.Nh,await new dn(this,t).start()}async showLoginPrompt(){return await this.Nh,new mn(this).start()}async showLoginNotification(){return await this.Nh,new pn(this).start()}setOnNativeSubscribeRequest(t){this.Cn.setOnSubscribeRequest(t)}setOnSubscribeResponse(t){this.Cn.setOnSubscribeResponse(t)}setOnPaymentResponse(t){this.Cn.setOnPaymentResponse(t)}async subscribe(t){return st("string"==typeof t,"The subscribe() method can only take a sku as its parameter; for subscription updates please use the updateSubscription() method"),await this.Nh,new He(this,{skuId:t}).start()}async updateSubscription(t){return st(null==t?void 0:t.oldSku,"The updateSubscription() method should be used for subscription updates; for new subscriptions please use the subscribe() method"),await this.Nh,new He(this,t).start()}setOnContributionResponse(t){this.Cn.setOnContributionResponse(t)}async contribute(t){const e="string"==typeof t?{skuId:t}:t;return await this.Nh,new He(this,e,ae.UI_CONTRIBUTION).start()}async completeDeferredAccountCreation(t=null){return await this.Nh,new Pi(this,t).start()}setOnFlowStarted(t){this.Cn.setOnFlowStarted(t)}setOnFlowCanceled(t){this.Cn.setOnFlowCanceled(t)}createButton(t,e){return this.Dh.create(t,e)}attachButton(t,e,s){this.Dh.attach(t,e,s)}attachSmartButton(t,e,s){this.Dh.attachSmartButton(this,t,e,s)}getPropensityModule(){return Promise.resolve(this.Gh)}eventManager(){return this.ne}getLastOffersFlow(){return this.Rh}getEventManager(){return Promise.resolve(this.ne)}getLogger(){return Promise.resolve(this.kh)}setShowcaseEntitlement(t){if(!t||!function(t=dt){return"https"===t.protocol||"https:"===t.protocol}(this.win().location)||!Zi(this.win().location.search,!0))return Promise.resolve();const e=(s=t.entitlement,we[s]||[]);var s;const i=new A;i.setIsUserRegistered(t.isUserRegistered),t.subscriptionTimestamp&&i.setSubscriptionTimestamp(hi(function(t){let e;return e=t>=1e14||t<=-1e14?Math.floor(t/1e3):t>=1e11||t<=-3e10?t:Math.floor(1e3*t),e}(t.subscriptionTimestamp)));for(let n=0;n<e.length;n++)this.eventManager().logEvent({eventType:e[n],eventOriginator:u.SHOWCASE_CLIENT,isFromUserAction:!1,additionalParameters:i});return Promise.resolve()}consumeShowcaseEntitlementJwt(t,e){this.entitlementsManager().parseEntitlements({signedEntitlements:t}).consume(e)}showBestAudienceAction(){et("Not implemented yet")}setPublisherProvidedId(t){this.Ut=t}async linkSubscription(t){return await this.Nh,new Tr(this).start(t)}async linkSubscriptions(t){return await this.Nh,new Tr(this).startMultipleLinks(t)}async getAvailableInterventions(){return await this.getEntitlements(),this.entitlementsManager().getAvailableInterventions()}async getFreeAccess(){return new on}}const Cr=ae.UI_CONTRIBUTION;class Sr{constructor(t){this.se=t,this._e=t.doc(),this.he=t.win(),this.le=t.activities(),this.Ve=t.entitlementsManager(),this.Me=t.clientConfigManager(),this.re=t.storage(),st(this.Me,"InlineCta requires an instance of ClientConfigManager.")}xh(t,e){const s={origin:ot(this.he.location.href).origin,configurationId:e,isClosable:"true",calledManually:"false",previewEnabled:"false",publicationId:this.se.pageConfig().getPublicationId(),ctaMode:"CTA_MODE_INLINE"};return this.Me.shouldForceLangInIframes()&&(s.hl=this.Me.getLanguage()),Tt(t,s)}ze(t,e,s){this.Ve.clear();const i=t.getSwgUserToken();i&&this.re.set(Y,i,!0),t.getAlreadyCompleted()&&(this.Uh(s),Ze(e,this.Me.getLanguage(),this.se));const n=Date.now().toString();this.re.set(K,n,!1),this.Ve.getEntitlements()}Uh(t){t.firstChild&&t.removeChild(t.firstChild)}async Fh(t,e,s){var i;const n=null==(i=t.getAttribute("rrm-inline-cta"))?void 0:i.trim().replace(/['"“”‘’]/g,"");if(!n)return void et("No Inline CTA Config Id");const r=e.find((t=>t.configurationId===n));if(!r)return void et("No Inline CTA Matching Action");if(r.type===Q.TYPE_REWARDED_AD||r.type===Q.TYPE_BYO_CTA)return;const o=gt[r.type],h=r.type===Q.TYPE_SUBSCRIPTION?ss(s,this.Me,this.se.pageConfig(),this.he.location.hash,!0):r.type===Q.TYPE_CONTRIBUTION?ts(s,this.Me,this.se.pageConfig(),!0):this.xh(o,n),l=r.type===Q.TYPE_SUBSCRIPTION?this.le.addDefaultArguments({showNative:this.se.callbacks().hasSubscribeRequestCallback(),productType:ae.SUBSCRIPTION,list:"default",skus:null,isClosable:!1,supportsEventManager:!0}):r.type===Q.TYPE_CONTRIBUTION?It({productId:this.se.pageConfig().getProductId(),publicationId:this.se.pageConfig().getPublicationId(),productType:ae.UI_CONTRIBUTION,list:"default",skus:null,isClosable:!1,supportsEventManager:!0}):It({supportsEventManager:!0,productType:Cr}),u=new te(this.he,this.le,h,l,this.Me.getLanguage());Qt(u.getElement(),{width:"100%"}),r.type===Q.TYPE_SUBSCRIPTION?(this.se.callbacks().triggerFlowStarted(ne.SHOW_OFFERS,{skus:["*"],source:"SwG"}),u.onCancel((()=>{this.se.callbacks().triggerFlowCanceled(ne.SHOW_OFFERS)})),u.on(P,(t=>is(this.se,t,!0,n))),u.on(V,(t=>ns(this.se,t)))):r.type===Q.TYPE_CONTRIBUTION?(this.se.callbacks().triggerFlowStarted(ne.SHOW_CONTRIBUTION_OPTIONS),u.onCancel((()=>{this.se.callbacks().triggerFlowCanceled(ne.SHOW_CONTRIBUTION_OPTIONS)})),u.on(P,(t=>es(this.se,t,!0,n)))):(u.on(f,(e=>this.ze(e,r.type,t))),u.on(x,(t=>Le(t,this.se,u,n,a.CTA_MODE_INLINE)))),t.appendChild(u.getElement()),await u.init()}async attachInlineCtasWithAttribute(){var t,e,s;const i=Array.from(this._e.getWin().document.querySelectorAll("div[rrm-inline-cta]"));if(0===i.length)return;const[n,r,o]=await Promise.all([this.Me.getClientConfig(),this.Ve.getEntitlements(),this.Ve.getArticle()]);if(!(null==(t=n.uiPredicates)?void 0:t.canDisplayAutoPrompt)||!o||r.enablesThis())return void et("Inline CTA Client Config: "+!(null==(e=n.uiPredicates)?void 0:e.canDisplayAutoPrompt)+"Article: "+!o+"Entitlements: "+!!r.enablesThis());const a=null==(s=o.audienceActions)?void 0:s.actions;if(a&&0!==a.length)for(const h of i)this.Fh(h,a,n);else et("No Inline CTA Actions")}}class Rr{constructor(t){this.Wh=null,this.Bh=null,this._e=Gi(t),this.Vh=new Promise((t=>{this.Bh=t}))}writeConfigWhenReady(t){return this.Wh=t,this._e.whenReady().then((()=>{this.jh()})),this.Vh}jh(){var t,e,s,i,n,r,o,a,h;if(!this.Bh)return;const l={productID:null==(t=this.Wh)?void 0:t.isPartOfProductId,"@type":null==(e=this.Wh)?void 0:e.isPartOfType},u={"@context":"http://schema.org","@type":null==(s=this.Wh)?void 0:s.type,isAccessibleForFree:null==(i=this.Wh)?void 0:i.isAccessibleForFree,isPartOf:l},c=this._e.getRootNode().querySelectorAll('script[type="application/ld+json"]');for(let g=0;g<c.length;g++){const t=c[g];if(t.textContent){const e=We(t.textContent);if(!e)continue;let s;return s=Array.isArray(e)?e[0]:e,s["@type"]=this.Yh(s["@type"],null==(n=this.Wh)?void 0:n.type),s.isAccessibleForFree=s.isAccessibleForFree||(null==(r=this.Wh)?void 0:r.isAccessibleForFree),s.isPartOf?(s.isPartOf["@type"]=this.Yh(s.isPartOf["@type"],null==(o=this.Wh)?void 0:o.isPartOfType),s.isPartOf.productID=s.isPartOf.productID||(null==(a=this.Wh)?void 0:a.isPartOfProductId)):s.isPartOf=l,t.textContent=JSON.stringify(e),this.Bh(),void(this.Bh=null)}}const d=jt(this._e.getWin().document,"script",{type:"application/ld+json"},JSON.stringify(u));null==(h=this._e.getHead())||h.appendChild(d),this.Bh(),this.Bh=null}Yh(t,e){if(!t&&!e)return[];if(!t)return e;if(!e)return t;const s=this.Go(t),i=this.Go(e),n=s.concat(i.filter((t=>s.indexOf(t)<0)));return 1==n.length?n.pop():n}Go(t){return Array.isArray(t)?t:[t]}}const yr="SWG_BASIC",Or="CHECK_ENTITLEMENTS";class vr{constructor(t){this.Kh=!1,this.qh=null,this.Hh=null,this.Jh=null,this.Vr=!0,this.Xr={},this.Sh=Date.now(),this._e=Gi(t),this.$h=new Promise((t=>{this.qh=t}))}Xh(t){return this.Xr.publisherProvidedId=this.Ut,this.Kh||!t||this.Hh?t&&this.Jh&&this.Jh.check():(this.Kh=!0,this.Jh=new Tn(this._e),this.Jh.resolveConfig().then((t=>{this.Jh=null,this.qh(new Nr(this._e,t,{configPromise:this.$h.then(),enableDefaultMeteringHandler:this.Vr},this.Xr,this.Pn,this.Sh)),this.qh=null}),(t=>{this.qh(Promise.reject(t)),this.qh=null}))),this.$h}async Qh(t){this.Hh=new Rr(this._e),await this.Hh.writeConfigWhenReady(t),this.Hh=null,this.Xh(!0)}init({type:t,isAccessibleForFree:e,isPartOfType:s,isPartOfProductId:i,clientOptions:n,autoPromptType:r,alwaysShow:o=!1,disableDefaultMeteringHandler:a=!1,publisherProvidedId:h}){this.Vr=!a,this.Ut=h;const l=this.Zh(i);this.Qh({type:t,isAccessibleForFree:null!=e?e:l,isPartOfType:s,isPartOfProductId:i});const u=this._e.getRootElement().lang;this.Pn=Object.assign({lang:u},n,{forceLangInIframes:!!u||!!(null==n?void 0:n.lang)});let c=e;l&&(null!=c||(c=!0)),this.setupAndShowAutoPrompt({autoPromptType:r,alwaysShow:o,isClosable:c,contentType:this.tl(null!=e?e:l)}),this.setOnLoginRequest(),this.processEntitlements()}async setOnEntitlementsResponse(t){(await this.Xh(!1)).setOnEntitlementsResponse(t)}async setOnPaymentResponse(t){(await this.Xh(!1)).setOnPaymentResponse(t)}async setOnLoginRequest(){(await this.Xh(!1)).setOnLoginRequest()}async setupAndShowAutoPrompt(t){(await this.Xh(!1)).setupAndShowAutoPrompt(t)}async dismissSwgUI(){(await this.Xh(!1)).dismissSwgUI()}async setupButtons(){(await this.Xh(!1)).setupButtons()}async setupInlineCta(){(await this.Xh(!1)).setupInlineCta()}async processEntitlements(){(await this.Xh(!1)).processEntitlements()}Zh(t){return t.endsWith(":openaccess")}tl(t){return t?se.OPEN:se.CLOSED}}class Nr{constructor(t,e,s={},i,n,r=0){this.Sh=r,this._e=Gi(t),this.he=this._e.getWin(),s.configPromise||(s.configPromise=Promise.resolve()),s.fetcher=s.fetcher||new pe(this.he),s.enableGoogleAnalytics=!0,this.ie=s.fetcher,this.il=new Ar(t,e,s,i,n,r),this.entitlementsManager().blockNextToast(),e.isLocked()&&this.entitlementsManager().enableMeteredByGoogle(),this.rl((()=>{this.dismissSwgUI(),this.il.showOffers({isClosable:!0})})),this.il.start(),this.il.clientConfigManager().fetchClientConfig(this.il.getEntitlements()),this.ol=new Ct(this,this.ie),this.ol.start(),this.al=new Ss(this,this.il),this.ll=new Sr(this),this.Dh=new Ns(this._e,Promise.resolve(this.il)),this.Dh.init()}configuredClassicRuntime(){return this.il}creationTimestamp(){return this.Sh}doc(){return this._e}win(){return this.he}config(){return this.il.config()}pageConfig(){return this.il.pageConfig()}activities(){return this.il.activities()}payClient(){return this.il.payClient()}dialogManager(){return this.il.dialogManager()}entitlementsManager(){return this.il.entitlementsManager()}callbacks(){return this.il.callbacks()}storage(){return this.il.storage()}analytics(){return this.il.analytics()}jserror(){return this.il.jserror()}eventManager(){return this.il.eventManager()}clientConfigManager(){return this.il.clientConfigManager()}init(){}setOnEntitlementsResponse(t){this.il.setOnEntitlementsResponse(t)}setOnPaymentResponse(t){this.il.setOnPaymentResponse(t)}setOnLoginRequest(){this.il.setOnLoginRequest((()=>{const t=this.pageConfig().getPublicationId(),e=It({publicationId:t});this.activities().open(Or,Tt("/checkentitlements",{publicationId:t}),"_blank",e,{width:600,height:600})}))}processEntitlements(){this.activities().onResult(Or,this.entitlementsResponseHandler.bind(this))}async entitlementsResponseHandler(t){const e=await zt(t,ft(),!0,!1),s=e.jwt;if(s){this.il.closeDialog(),this.entitlementsManager().pushNextEntitlements(s);const t=e.usertoken;t&&this.storage().set(Y,t,!0),new de(this,Tt("/toastiframe",{flavor:"basic"})).open()}else{const t=this.il.getLastOffersFlow();if(t)return void t.showNoEntitlementFoundToast();const e=this.il.getLastContributionsFlow();if(e)return void e.showNoEntitlementFoundToast();const s=this.entitlementsManager().getLastMeterToast();if(s)return void s.showNoEntitlementFoundToast();const i=this.al.getLastAudienceActionFlow();if(i)return void i.showNoEntitlementFoundToast();const n=this.clientConfigManager().getLanguage(),r=$t(xt,n);new de(this,Tt("/toastiframe",{flavor:"custom",customText:r})).open()}}setupAndShowAutoPrompt(t){return this.al.showAutoPrompt(t)}dismissSwgUI(){this.dialogManager().completeAll()}async setupButtons(){const t=await this.clientConfigManager().shouldEnableButton();this.Dh.attachButtonsWithAttribute("swg-standard-button",[Os.SUBSCRIPTION,Os.CONTRIBUTION],{theme:this.clientConfigManager().getTheme(),lang:this.clientConfigManager().getLanguage(),enable:!!t},{[Os.SUBSCRIPTION]:()=>{this.il.showOffers({isClosable:!0})},[Os.CONTRIBUTION]:()=>{this.il.showContributionOptions({isClosable:!0})}})}async setupInlineCta(){await this.entitlementsManager().getExperimentConfigFlags().then((t=>{t.includes(r.INLINE_CTA_EXPERIMENT)&&this.win().setTimeout((()=>{this.ll.attachInlineCtasWithAttribute()}),2e3)}))}rl(t){this.callbacks().setOnOffersFlowRequest(t)}}tt("BasicSubscriptions Runtime: ".concat(s)),function(t){if(t[yr]&&!Array.isArray(t[yr]))return;const e=new vr(t),s=function(t){return{init:t.init.bind(t),setOnEntitlementsResponse:t.setOnEntitlementsResponse.bind(t),setOnPaymentResponse:t.setOnPaymentResponse.bind(t),setOnLoginRequest:t.setOnLoginRequest.bind(t),setupAndShowAutoPrompt:t.setupAndShowAutoPrompt.bind(t),dismissSwgUI:t.dismissSwgUI.bind(t)}}(e);async function i(t){t&&(await 0,t(s))}const n=[].concat(t[yr]);for(const r of n)i(r);t[yr]={push:i},e.setupButtons(),e.setupInlineCta()}(self)}();
//# sourceMappingURL=swg-basic.js.map
 })();
